# ğŸ“‹ Divine Friend PWA å®Œæ•´æœåŠ¡æ¸…å•

## âœ… **å·²åŒ…å«çš„æ‰€æœ‰æœåŠ¡**

### ğŸ¯ **æ ¸å¿ƒåº”ç”¨æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **å‰ç«¯åº”ç”¨** | `divine-frontend` | 80/443 | React PWAç”¨æˆ·ç«¯ | âœ… å·²åŒ…å« |
| **ç®¡ç†åå°** | `divine-admin` | 80/443 | React Adminç®¡ç†ç«¯ | âœ… å·²åŒ…å« |
| **åç«¯API** | `divine-backend` | 5000 | Flask RESTful API | âœ… å·²åŒ…å« |

### ğŸ—„ï¸ **æ•°æ®å­˜å‚¨æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **MySQLæ•°æ®åº“** | `divine-mysql` | 3306 | ä¸»æ•°æ®åº“ | âœ… å·²åŒ…å« |
| **Redisç¼“å­˜** | `divine-redis` | 6379 | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ | âœ… å·²åŒ…å« |

### ğŸŒ **ç½‘ç»œå’Œä»£ç†æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **Nginxåå‘ä»£ç†** | `divine-nginx` | 80/443 | è´Ÿè½½å‡è¡¡å’ŒSSLç»ˆæ­¢ | âœ… å·²åŒ…å« |

### ğŸ“Š **ç›‘æ§å’Œè¿ç»´æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **Prometheus** | `divine-prometheus` | 9090 | ç›‘æ§æŒ‡æ ‡æ”¶é›† | âœ… å·²åŒ…å« |
| **Grafana** | `divine-grafana` | 3001 | ç›‘æ§ä»ªè¡¨æ¿ | âœ… å·²åŒ…å« |
| **Node Exporter** | `divine-node-exporter` | 9100 | ç³»ç»ŸæŒ‡æ ‡æ”¶é›† | âœ… å·²åŒ…å« |
| **cAdvisor** | `divine-cadvisor` | 8080 | Dockerå®¹å™¨ç›‘æ§ | âœ… å·²åŒ…å« |

### ğŸ› ï¸ **ç®¡ç†å·¥å…·æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **phpMyAdmin** | `divine-phpmyadmin` | 8081 | MySQLæ•°æ®åº“ç®¡ç† | âœ… å·²åŒ…å« |
| **Redis Commander** | `divine-redis-commander` | 8082 | Redisç®¡ç†ç•Œé¢ | âœ… å·²åŒ…å« |

### ğŸ“§ **é‚®ä»¶å’Œé€šä¿¡æœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **MailHog** | `divine-mailhog` | 1025/8025 | é‚®ä»¶æµ‹è¯•æœåŠ¡ | âœ… å·²åŒ…å« |

### ğŸ“ **æ—¥å¿—å’Œåˆ†ææœåŠ¡**

| æœåŠ¡åç§° | å®¹å™¨å | ç«¯å£ | è¯´æ˜ | çŠ¶æ€ |
|----------|--------|------|------|------|
| **Elasticsearch** | `divine-elasticsearch` | 9200 | æ—¥å¿—æœç´¢å¼•æ“ | âœ… å·²åŒ…å« |
| **Kibana** | `divine-kibana` | 5601 | æ—¥å¿—åˆ†æç•Œé¢ | âœ… å·²åŒ…å« |

## ğŸš€ **æœåŠ¡è®¿é—®åœ°å€æ€»è§ˆ**

### **ä¸»è¦åº”ç”¨**
- **å‰ç«¯åº”ç”¨**: https://your-domain.com
- **ç®¡ç†åå°**: https://admin.your-domain.com  
- **APIæ¥å£**: https://api.your-domain.com

### **ç®¡ç†å·¥å…·**
- **æ•°æ®åº“ç®¡ç†**: http://localhost:8081 (phpMyAdmin)
- **Redisç®¡ç†**: http://localhost:8082 (Redis Commander)
- **é‚®ä»¶æµ‹è¯•**: http://localhost:8025 (MailHog)

### **ç›‘æ§é¢æ¿**
- **Grafanaç›‘æ§**: http://localhost:3001
- **PrometheusæŒ‡æ ‡**: http://localhost:9090
- **ç³»ç»Ÿç›‘æ§**: http://localhost:9100 (Node Exporter)
- **Dockerç›‘æ§**: http://localhost:8080 (cAdvisor)

### **æ—¥å¿—åˆ†æ**
- **Kibanaæ—¥å¿—**: http://localhost:5601 (å¯é€‰)

## ğŸ”§ **æœåŠ¡é…ç½®è¯¦æƒ…**

### **æ•°æ®åº“é…ç½®**
```yaml
MySQL:
  - æ•°æ®åº“å: divine_friend_prod
  - ç”¨æˆ·å: divine_friend
  - ç«¯å£: 3306
  - æŒä¹…åŒ–: mysql_data å·

Redis:
  - ç«¯å£: 6379
  - å¯†ç ä¿æŠ¤: å¯ç”¨
  - æŒä¹…åŒ–: redis_data å·
  - AOF: å¯ç”¨
```

### **ç›‘æ§é…ç½®**
```yaml
Prometheus:
  - æ•°æ®ä¿ç•™: 200å°æ—¶
  - æŠ“å–é—´éš”: 15ç§’
  - ç›®æ ‡: æ‰€æœ‰æœåŠ¡

Grafana:
  - ç®¡ç†å‘˜å¯†ç : ç¯å¢ƒå˜é‡é…ç½®
  - æ•°æ®æº: Prometheus
  - ä»ªè¡¨æ¿: è‡ªåŠ¨å¯¼å…¥
```

### **å®‰å…¨é…ç½®**
```yaml
SSL/TLS:
  - è¯ä¹¦: Let's Encrypt æˆ–è‡ªç­¾å
  - åè®®: TLS 1.2/1.3
  - å¼ºåˆ¶HTTPS: å¯ç”¨

å®‰å…¨å¤´:
  - X-Frame-Options: DENY
  - X-Content-Type-Options: nosniff
  - X-XSS-Protection: 1; mode=block
  - HSTS: å¯ç”¨
```

## ğŸ“Š **èµ„æºéœ€æ±‚ä¼°ç®—**

### **æœ€å°é…ç½®**
- **CPU**: 4æ ¸
- **å†…å­˜**: 8GB
- **å­˜å‚¨**: 50GB SSD
- **ç½‘ç»œ**: 100Mbps

### **æ¨èé…ç½®**
- **CPU**: 8æ ¸
- **å†…å­˜**: 16GB
- **å­˜å‚¨**: 100GB SSD
- **ç½‘ç»œ**: 1Gbps

### **å„æœåŠ¡èµ„æºåˆ†é…**
```yaml
å‰ç«¯åº”ç”¨: 512MB RAM
ç®¡ç†åå°: 512MB RAM
åç«¯API: 1GB RAM
MySQL: 2GB RAM
Redis: 512MB RAM
Nginx: 256MB RAM
Prometheus: 1GB RAM
Grafana: 512MB RAM
Elasticsearch: 2GB RAM
å…¶ä»–æœåŠ¡: 1GB RAM
æ€»è®¡: ~8.5GB RAM
```

## ğŸ”„ **æœåŠ¡ä¾èµ–å…³ç³»**

```mermaid
graph TD
    A[Nginx] --> B[å‰ç«¯åº”ç”¨]
    A --> C[ç®¡ç†åå°]
    A --> D[åç«¯API]
    D --> E[MySQL]
    D --> F[Redis]
    D --> G[MailHog]
    
    H[Prometheus] --> I[Node Exporter]
    H --> J[cAdvisor]
    H --> K[åç«¯API]
    H --> F
    
    L[Grafana] --> H
    
    M[phpMyAdmin] --> E
    N[Redis Commander] --> F
    
    O[Kibana] --> P[Elasticsearch]
```

## ğŸ› ï¸ **ç®¡ç†å‘½ä»¤**

### **æœåŠ¡ç®¡ç†**
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose -f deploy/docker/docker-compose.production.yml ps

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose -f deploy/docker/docker-compose.production.yml logs -f backend

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose -f deploy/docker/docker-compose.production.yml restart backend

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose -f deploy/docker/docker-compose.production.yml down

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f deploy/docker/docker-compose.production.yml up -d
```

### **æ•°æ®åº“ç®¡ç†**
```bash
# MySQLè¿æ¥
mysql -h localhost -P 3306 -u divine_friend -p

# Redisè¿æ¥
redis-cli -h localhost -p 6379 -a your-redis-password

# æ•°æ®åº“å¤‡ä»½
docker exec divine-mysql mysqldump -u root -p divine_friend_prod > backup.sql

# Rediså¤‡ä»½
docker exec divine-redis redis-cli BGSAVE
```

### **ç›‘æ§ç®¡ç†**
```bash
# æŸ¥çœ‹Prometheusç›®æ ‡
curl http://localhost:9090/api/v1/targets

# æŸ¥çœ‹Grafanaæ•°æ®æº
curl http://localhost:3001/api/datasources

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
docker stats
```

## ğŸ” **å¥åº·æ£€æŸ¥**

### **è‡ªåŠ¨å¥åº·æ£€æŸ¥**
æ‰€æœ‰æœåŠ¡éƒ½é…ç½®äº†å¥åº·æ£€æŸ¥ï¼š

```yaml
åç«¯API: HTTP GET /api/health
MySQL: mysqladmin ping
Redis: redis-cli ping
Prometheus: HTTP GET /-/healthy
Grafana: HTTP GET /api/health
Nginx: HTTP GET /
```

### **æ‰‹åŠ¨å¥åº·æ£€æŸ¥**
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡
./deploy/docker/deploy.sh health-check

# æ£€æŸ¥ç‰¹å®šæœåŠ¡
curl http://localhost/api/health
curl http://localhost:9090/-/healthy
curl http://localhost:3001/api/health
```

## ğŸ“ˆ **æ‰©å±•æ€§è€ƒè™‘**

### **æ°´å¹³æ‰©å±•**
- **åç«¯API**: æ”¯æŒå¤šå®ä¾‹è´Ÿè½½å‡è¡¡
- **Redis**: æ”¯æŒä¸»ä»å¤åˆ¶å’Œé›†ç¾¤
- **MySQL**: æ”¯æŒä¸»ä»å¤åˆ¶
- **Nginx**: æ”¯æŒå¤šå®ä¾‹

### **å‚ç›´æ‰©å±•**
- **èµ„æºé™åˆ¶**: æ¯ä¸ªæœåŠ¡å¯ç‹¬ç«‹è°ƒæ•´èµ„æº
- **å­˜å‚¨æ‰©å±•**: æ”¯æŒå¤–éƒ¨å­˜å‚¨å·
- **ç½‘ç»œæ‰©å±•**: æ”¯æŒè‡ªå®šä¹‰ç½‘ç»œé…ç½®

## ğŸ¯ **æ€»ç»“**

âœ… **å·²åŒ…å«æ‰€æœ‰æ ¸å¿ƒæœåŠ¡** - å‰ç«¯ã€ç®¡ç†åå°ã€åç«¯API  
âœ… **å®Œæ•´çš„æ•°æ®å­˜å‚¨** - MySQLã€Redis  
âœ… **å…¨é¢çš„ç›‘æ§ç³»ç»Ÿ** - Prometheusã€Grafanaã€Node Exporterã€cAdvisor  
âœ… **å®Œå–„çš„ç®¡ç†å·¥å…·** - phpMyAdminã€Redis Commander  
âœ… **é‚®ä»¶å’Œæ—¥å¿—æœåŠ¡** - MailHogã€Elasticsearchã€Kibana  
âœ… **å®‰å…¨é…ç½®** - SSL/TLSã€å®‰å…¨å¤´ã€è®¿é—®æ§åˆ¶  
âœ… **è‡ªåŠ¨åŒ–éƒ¨ç½²** - ä¸€é”®éƒ¨ç½²è„šæœ¬ã€å¥åº·æ£€æŸ¥  

**æ‰€æœ‰å¿…è¦çš„æœåŠ¡éƒ½å·²åŒ…å«åœ¨Dockeréƒ¨ç½²æ–¹æ¡ˆä¸­ï¼** ğŸš€

---

**Â© 2024 Divine Friend PWA Team**  
**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ  
**çŠ¶æ€**: å®Œæ•´æœåŠ¡æ¸…å• âœ… 