var Du=Object.defineProperty;var Pu=(t,e,n)=>e in t?Du(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>(Pu(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Tu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var co={exports:{}},yr={},uo={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),bu=Symbol.for("react.portal"),_u=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),Iu=Symbol.for("react.profiler"),Ru=Symbol.for("react.provider"),Lu=Symbol.for("react.context"),zu=Symbol.for("react.forward_ref"),$u=Symbol.for("react.suspense"),Fu=Symbol.for("react.memo"),Ou=Symbol.for("react.lazy"),Ya=Symbol.iterator;function Bu(t){return t===null||typeof t!="object"?null:(t=Ya&&t[Ya]||t["@@iterator"],typeof t=="function"?t:null)}var mo={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ho=Object.assign,po={};function wn(t,e,n){this.props=t,this.context=e,this.refs=po,this.updater=n||mo}wn.prototype.isReactComponent={};wn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fo(){}fo.prototype=wn.prototype;function sa(t,e,n){this.props=t,this.context=e,this.refs=po,this.updater=n||mo}var ra=sa.prototype=new fo;ra.constructor=sa;ho(ra,wn.prototype);ra.isPureReactComponent=!0;var Za=Array.isArray,go=Object.prototype.hasOwnProperty,ia={current:null},yo={key:!0,ref:!0,__self:!0,__source:!0};function vo(t,e,n){var s,r={},a=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)go.call(e,s)&&!yo.hasOwnProperty(s)&&(r[s]=e[s]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return{$$typeof:ds,type:t,key:a,ref:l,props:r,_owner:ia.current}}function Uu(t,e){return{$$typeof:ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aa(t){return typeof t=="object"&&t!==null&&t.$$typeof===ds}function Vu(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qa=/\/+/g;function Ar(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vu(""+t.key):e.toString(36)}function Is(t,e,n,s,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ds:case bu:l=!0}}if(l)return l=t,r=r(l),t=s===""?"."+Ar(l,0):s,Za(r)?(n="",t!=null&&(n=t.replace(qa,"$&/")+"/"),Is(r,e,n,"",function(u){return u})):r!=null&&(aa(r)&&(r=Uu(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(qa,"$&/")+"/")+t)),e.push(r)),1;if(l=0,s=s===""?".":s+":",Za(t))for(var o=0;o<t.length;o++){a=t[o];var c=s+Ar(a,o);l+=Is(a,e,n,c,r)}else if(c=Bu(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=s+Ar(a,o++),l+=Is(a,e,n,c,r);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function gs(t,e,n){if(t==null)return t;var s=[],r=0;return Is(t,s,"","",function(a){return e.call(n,a,r++)}),s}function Hu(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ye={current:null},Rs={transition:null},Gu={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:Rs,ReactCurrentOwner:ia};function xo(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:gs,forEach:function(t,e,n){gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gs(t,function(){e++}),e},toArray:function(t){return gs(t,function(e){return e})||[]},only:function(t){if(!aa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=wn;F.Fragment=_u;F.Profiler=Iu;F.PureComponent=sa;F.StrictMode=Au;F.Suspense=$u;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gu;F.act=xo;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=ho({},t.props),r=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=ia.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)go.call(e,c)&&!yo.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:ds,type:t.type,key:r,ref:a,props:s,_owner:l}};F.createContext=function(t){return t={$$typeof:Lu,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ru,_context:t},t.Consumer=t};F.createElement=vo;F.createFactory=function(t){var e=vo.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:zu,render:t}};F.isValidElement=aa;F.lazy=function(t){return{$$typeof:Ou,_payload:{_status:-1,_result:t},_init:Hu}};F.memo=function(t,e){return{$$typeof:Fu,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=Rs.transition;Rs.transition={};try{t()}finally{Rs.transition=e}};F.unstable_act=xo;F.useCallback=function(t,e){return ye.current.useCallback(t,e)};F.useContext=function(t){return ye.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return ye.current.useDeferredValue(t)};F.useEffect=function(t,e){return ye.current.useEffect(t,e)};F.useId=function(){return ye.current.useId()};F.useImperativeHandle=function(t,e,n){return ye.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return ye.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return ye.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return ye.current.useMemo(t,e)};F.useReducer=function(t,e,n){return ye.current.useReducer(t,e,n)};F.useRef=function(t){return ye.current.useRef(t)};F.useState=function(t){return ye.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return ye.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return ye.current.useTransition()};F.version="18.3.1";uo.exports=F;var S=uo.exports;const Wu=Tu(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=S,Ju=Symbol.for("react.element"),Ku=Symbol.for("react.fragment"),Xu=Object.prototype.hasOwnProperty,Yu=Qu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zu={key:!0,ref:!0,__self:!0,__source:!0};function No(t,e,n){var s,r={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)Xu.call(e,s)&&!Zu.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Ju,type:t,key:a,ref:l,props:r,_owner:Yu.current}}yr.Fragment=Ku;yr.jsx=No;yr.jsxs=No;co.exports=yr;var i=co.exports,li={},jo={exports:{}},be={},wo={exports:{}},ko={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,L){var I=b.length;b.push(L);e:for(;0<I;){var U=I-1>>>1,A=b[U];if(0<r(A,L))b[U]=L,b[I]=A,I=U;else break e}}function n(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var L=b[0],I=b.pop();if(I!==L){b[0]=I;e:for(var U=0,A=b.length,H=A>>>1;U<H;){var We=2*(U+1)-1,En=b[We],qe=We+1,Gt=b[qe];if(0>r(En,I))qe<A&&0>r(Gt,En)?(b[U]=Gt,b[qe]=I,U=qe):(b[U]=En,b[We]=I,U=We);else if(qe<A&&0>r(Gt,I))b[U]=Gt,b[qe]=I,U=qe;else break e}}return L}function r(b,L){var I=b.sortIndex-L.sortIndex;return I!==0?I:b.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],f=1,g=null,y=3,k=!1,C=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(b){for(var L=n(u);L!==null;){if(L.callback===null)s(u);else if(L.startTime<=b)s(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function N(b){if(v=!1,p(b),!C)if(n(c)!==null)C=!0,D(E);else{var L=n(u);L!==null&&B(N,L.startTime-b)}}function E(b,L){C=!1,v&&(v=!1,h(x),x=-1),k=!0;var I=y;try{for(p(L),g=n(c);g!==null&&(!(g.expirationTime>L)||b&&!z());){var U=g.callback;if(typeof U=="function"){g.callback=null,y=g.priorityLevel;var A=U(g.expirationTime<=L);L=t.unstable_now(),typeof A=="function"?g.callback=A:g===n(c)&&s(c),p(L)}else s(c);g=n(c)}if(g!==null)var H=!0;else{var We=n(u);We!==null&&B(N,We.startTime-L),H=!1}return H}finally{g=null,y=I,k=!1}}var P=!1,d=null,x=-1,j=5,M=-1;function z(){return!(t.unstable_now()-M<j)}function pe(){if(d!==null){var b=t.unstable_now();M=b;var L=!0;try{L=d(!0,b)}finally{L?re():(P=!1,d=null)}}else P=!1}var re;if(typeof m=="function")re=function(){m(pe)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,w=Ee.port2;Ee.port1.onmessage=pe,re=function(){w.postMessage(null)}}else re=function(){_(pe,0)};function D(b){d=b,P||(P=!0,re())}function B(b,L){x=_(function(){b(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){C||k||(C=!0,D(E))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(b){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var I=y;y=L;try{return b()}finally{y=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,L){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var I=y;y=b;try{return L()}finally{y=I}},t.unstable_scheduleCallback=function(b,L,I){var U=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?U+I:U):I=U,b){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=I+A,b={id:f++,callback:L,priorityLevel:b,startTime:I,expirationTime:A,sortIndex:-1},I>U?(b.sortIndex=I,e(u,b),n(c)===null&&b===n(u)&&(v?(h(x),x=-1):v=!0,B(N,I-U))):(b.sortIndex=A,e(c,b),C||k||(C=!0,D(E))),b},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(b){var L=y;return function(){var I=y;y=L;try{return b.apply(this,arguments)}finally{y=I}}}})(ko);wo.exports=ko;var qu=wo.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=S,Te=qu;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var So=new Set,Jn={};function Vt(t,e){fn(t,e),fn(t+"Capture",e)}function fn(t,e){for(Jn[t]=e,t=0;t<e.length;t++)So.add(e[t])}var it=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oi=Object.prototype.hasOwnProperty,td=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,el={},tl={};function nd(t){return oi.call(tl,t)?!0:oi.call(el,t)?!1:td.test(t)?tl[t]=!0:(el[t]=!0,!1)}function sd(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rd(t,e,n,s){if(e===null||typeof e>"u"||sd(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ve(t,e,n,s,r,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ce[t]=new ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ce[e]=new ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ce[t]=new ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ce[t]=new ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ce[t]=new ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ce[t]=new ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ce[t]=new ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ce[t]=new ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ce[t]=new ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var la=/[\-:]([a-z])/g;function oa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(la,oa);ce[e]=new ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(la,oa);ce[e]=new ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(la,oa);ce[e]=new ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ce[t]=new ve(t,1,!1,t.toLowerCase(),null,!1,!1)});ce.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ce[t]=new ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function ca(t,e,n,s){var r=ce.hasOwnProperty(e)?ce[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rd(e,n,r,s)&&(n=null),s||r===null?nd(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ct=ed.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ys=Symbol.for("react.element"),Kt=Symbol.for("react.portal"),Xt=Symbol.for("react.fragment"),ua=Symbol.for("react.strict_mode"),ci=Symbol.for("react.profiler"),Eo=Symbol.for("react.provider"),Co=Symbol.for("react.context"),da=Symbol.for("react.forward_ref"),ui=Symbol.for("react.suspense"),di=Symbol.for("react.suspense_list"),ma=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),Mo=Symbol.for("react.offscreen"),nl=Symbol.iterator;function Cn(t){return t===null||typeof t!="object"?null:(t=nl&&t[nl]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,Ir;function In(t){if(Ir===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ir=e&&e[1]||""}return`
`+Ir+t}var Rr=!1;function Lr(t,e){if(!t||Rr)return"";Rr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=s.stack.split(`
`),l=r.length-1,o=a.length-1;1<=l&&0<=o&&r[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(r[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||r[l]!==a[o]){var c=`
`+r[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Rr=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?In(t):""}function id(t){switch(t.tag){case 5:return In(t.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return t=Lr(t.type,!1),t;case 11:return t=Lr(t.type.render,!1),t;case 1:return t=Lr(t.type,!0),t;default:return""}}function mi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xt:return"Fragment";case Kt:return"Portal";case ci:return"Profiler";case ua:return"StrictMode";case ui:return"Suspense";case di:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Co:return(t.displayName||"Context")+".Consumer";case Eo:return(t._context.displayName||"Context")+".Provider";case da:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ma:return e=t.displayName||null,e!==null?e:mi(t.type)||"Memo";case dt:e=t._payload,t=t._init;try{return mi(t(e))}catch{}}return null}function ad(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mi(e);case 8:return e===ua?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ct(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Do(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ld(t){var e=Do(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vs(t){t._valueTracker||(t._valueTracker=ld(t))}function Po(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Do(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ws(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hi(t,e){var n=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sl(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Ct(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function To(t,e){e=e.checked,e!=null&&ca(t,"checked",e,!1)}function pi(t,e){To(t,e);var n=Ct(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fi(t,e.type,n):e.hasOwnProperty("defaultValue")&&fi(t,e.type,Ct(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fi(t,e,n){(e!=="number"||Ws(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rn=Array.isArray;function on(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Ct(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gi(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function il(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Rn(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ct(n)}}function bo(t,e){var n=Ct(e.value),s=Ct(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function al(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _o(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yi(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_o(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xs,Ao=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kn(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},od=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(t){od.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fn[e]=Fn[t]})});function Io(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fn.hasOwnProperty(t)&&Fn[t]?(""+e).trim():e+"px"}function Ro(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Io(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var cd=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vi(t,e){if(e){if(cd[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function xi(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ni=null;function ha(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,cn=null,un=null;function ll(t){if(t=ps(t)){if(typeof ji!="function")throw Error(T(280));var e=t.stateNode;e&&(e=wr(e),ji(t.stateNode,t.type,e))}}function Lo(t){cn?un?un.push(t):un=[t]:cn=t}function zo(){if(cn){var t=cn,e=un;if(un=cn=null,ll(t),e)for(t=0;t<e.length;t++)ll(e[t])}}function $o(t,e){return t(e)}function Fo(){}var zr=!1;function Oo(t,e,n){if(zr)return t(e,n);zr=!0;try{return $o(t,e,n)}finally{zr=!1,(cn!==null||un!==null)&&(Fo(),zo())}}function Xn(t,e){var n=t.stateNode;if(n===null)return null;var s=wr(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var wi=!1;if(it)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{wi=!1}function ud(t,e,n,s,r,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var On=!1,Qs=null,Js=!1,ki=null,dd={onError:function(t){On=!0,Qs=t}};function md(t,e,n,s,r,a,l,o,c){On=!1,Qs=null,ud.apply(dd,arguments)}function hd(t,e,n,s,r,a,l,o,c){if(md.apply(this,arguments),On){if(On){var u=Qs;On=!1,Qs=null}else throw Error(T(198));Js||(Js=!0,ki=u)}}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bo(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ol(t){if(Ht(t)!==t)throw Error(T(188))}function pd(t){var e=t.alternate;if(!e){if(e=Ht(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return ol(r),t;if(a===s)return ol(r),e;a=a.sibling}throw Error(T(188))}if(n.return!==s.return)n=r,s=a;else{for(var l=!1,o=r.child;o;){if(o===n){l=!0,n=r,s=a;break}if(o===s){l=!0,s=r,n=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===n){l=!0,n=a,s=r;break}if(o===s){l=!0,s=a,n=r;break}o=o.sibling}if(!l)throw Error(T(189))}}if(n.alternate!==s)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Uo(t){return t=pd(t),t!==null?Vo(t):null}function Vo(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vo(t);if(e!==null)return e;t=t.sibling}return null}var Ho=Te.unstable_scheduleCallback,cl=Te.unstable_cancelCallback,fd=Te.unstable_shouldYield,gd=Te.unstable_requestPaint,ee=Te.unstable_now,yd=Te.unstable_getCurrentPriorityLevel,pa=Te.unstable_ImmediatePriority,Go=Te.unstable_UserBlockingPriority,Ks=Te.unstable_NormalPriority,vd=Te.unstable_LowPriority,Wo=Te.unstable_IdlePriority,vr=null,Ye=null;function xd(t){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(vr,t,void 0,(t.current.flags&128)===128)}catch{}}var Ve=Math.clz32?Math.clz32:wd,Nd=Math.log,jd=Math.LN2;function wd(t){return t>>>=0,t===0?32:31-(Nd(t)/jd|0)|0}var Ns=64,js=4194304;function Ln(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xs(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~r;o!==0?s=Ln(o):(a&=l,a!==0&&(s=Ln(a)))}else l=n&~r,l!==0?s=Ln(l):a!==0&&(s=Ln(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,a=e&-e,r>=a||r===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ve(e),r=1<<n,s|=t[n],e&=~r;return s}function kd(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sd(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ve(a),o=1<<l,c=r[l];c===-1?(!(o&n)||o&s)&&(r[l]=kd(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function Si(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qo(){var t=Ns;return Ns<<=1,!(Ns&4194240)&&(Ns=64),t}function $r(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ms(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ve(e),t[e]=n}function Ed(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ve(n),a=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~a}}function fa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ve(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var V=0;function Jo(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ko,ga,Xo,Yo,Zo,Ei=!1,ws=[],vt=null,xt=null,Nt=null,Yn=new Map,Zn=new Map,ht=[],Cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ul(t,e){switch(t){case"focusin":case"focusout":vt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Yn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(e.pointerId)}}function Dn(t,e,n,s,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},e!==null&&(e=ps(e),e!==null&&ga(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Md(t,e,n,s,r){switch(e){case"focusin":return vt=Dn(vt,t,e,n,s,r),!0;case"dragenter":return xt=Dn(xt,t,e,n,s,r),!0;case"mouseover":return Nt=Dn(Nt,t,e,n,s,r),!0;case"pointerover":var a=r.pointerId;return Yn.set(a,Dn(Yn.get(a)||null,t,e,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,Zn.set(a,Dn(Zn.get(a)||null,t,e,n,s,r)),!0}return!1}function qo(t){var e=At(t.target);if(e!==null){var n=Ht(e);if(n!==null){if(e=n.tag,e===13){if(e=Bo(n),e!==null){t.blockedOn=e,Zo(t.priority,function(){Xo(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ls(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ci(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ni=s,n.target.dispatchEvent(s),Ni=null}else return e=ps(n),e!==null&&ga(e),t.blockedOn=n,!1;e.shift()}return!0}function dl(t,e,n){Ls(t)&&n.delete(e)}function Dd(){Ei=!1,vt!==null&&Ls(vt)&&(vt=null),xt!==null&&Ls(xt)&&(xt=null),Nt!==null&&Ls(Nt)&&(Nt=null),Yn.forEach(dl),Zn.forEach(dl)}function Pn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ei||(Ei=!0,Te.unstable_scheduleCallback(Te.unstable_NormalPriority,Dd)))}function qn(t){function e(r){return Pn(r,t)}if(0<ws.length){Pn(ws[0],t);for(var n=1;n<ws.length;n++){var s=ws[n];s.blockedOn===t&&(s.blockedOn=null)}}for(vt!==null&&Pn(vt,t),xt!==null&&Pn(xt,t),Nt!==null&&Pn(Nt,t),Yn.forEach(e),Zn.forEach(e),n=0;n<ht.length;n++)s=ht[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<ht.length&&(n=ht[0],n.blockedOn===null);)qo(n),n.blockedOn===null&&ht.shift()}var dn=ct.ReactCurrentBatchConfig,Ys=!0;function Pd(t,e,n,s){var r=V,a=dn.transition;dn.transition=null;try{V=1,ya(t,e,n,s)}finally{V=r,dn.transition=a}}function Td(t,e,n,s){var r=V,a=dn.transition;dn.transition=null;try{V=4,ya(t,e,n,s)}finally{V=r,dn.transition=a}}function ya(t,e,n,s){if(Ys){var r=Ci(t,e,n,s);if(r===null)Jr(t,e,s,Zs,n),ul(t,s);else if(Md(r,t,e,n,s))s.stopPropagation();else if(ul(t,s),e&4&&-1<Cd.indexOf(t)){for(;r!==null;){var a=ps(r);if(a!==null&&Ko(a),a=Ci(t,e,n,s),a===null&&Jr(t,e,s,Zs,n),a===r)break;r=a}r!==null&&s.stopPropagation()}else Jr(t,e,s,null,n)}}var Zs=null;function Ci(t,e,n,s){if(Zs=null,t=ha(s),t=At(t),t!==null)if(e=Ht(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bo(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zs=t,null}function ec(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yd()){case pa:return 1;case Go:return 4;case Ks:case vd:return 16;case Wo:return 536870912;default:return 16}default:return 16}}var gt=null,va=null,zs=null;function tc(){if(zs)return zs;var t,e=va,n=e.length,s,r="value"in gt?gt.value:gt.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(s=1;s<=l&&e[n-s]===r[a-s];s++);return zs=r.slice(t,1<s?1-s:void 0)}function $s(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ks(){return!0}function ml(){return!1}function _e(t){function e(n,s,r,a,l){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ks:ml,this.isPropagationStopped=ml,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),e}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=_e(kn),hs=Y({},kn,{view:0,detail:0}),bd=_e(hs),Fr,Or,Tn,xr=Y({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tn&&(Tn&&t.type==="mousemove"?(Fr=t.screenX-Tn.screenX,Or=t.screenY-Tn.screenY):Or=Fr=0,Tn=t),Fr)},movementY:function(t){return"movementY"in t?t.movementY:Or}}),hl=_e(xr),_d=Y({},xr,{dataTransfer:0}),Ad=_e(_d),Id=Y({},hs,{relatedTarget:0}),Br=_e(Id),Rd=Y({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ld=_e(Rd),zd=Y({},kn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$d=_e(zd),Fd=Y({},kn,{data:0}),pl=_e(Fd),Od={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vd(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ud[t])?!!e[t]:!1}function Na(){return Vd}var Hd=Y({},hs,{key:function(t){if(t.key){var e=Od[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$s(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(t){return t.type==="keypress"?$s(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$s(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gd=_e(Hd),Wd=Y({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=_e(Wd),Qd=Y({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),Jd=_e(Qd),Kd=Y({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=_e(Kd),Yd=Y({},xr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=_e(Yd),qd=[9,13,27,32],ja=it&&"CompositionEvent"in window,Bn=null;it&&"documentMode"in document&&(Bn=document.documentMode);var em=it&&"TextEvent"in window&&!Bn,nc=it&&(!ja||Bn&&8<Bn&&11>=Bn),gl=String.fromCharCode(32),yl=!1;function sc(t,e){switch(t){case"keyup":return qd.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yt=!1;function tm(t,e){switch(t){case"compositionend":return rc(e);case"keypress":return e.which!==32?null:(yl=!0,gl);case"textInput":return t=e.data,t===gl&&yl?null:t;default:return null}}function nm(t,e){if(Yt)return t==="compositionend"||!ja&&sc(t,e)?(t=tc(),zs=va=gt=null,Yt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nc&&e.locale!=="ko"?null:e.data;default:return null}}var sm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sm[t.type]:e==="textarea"}function ic(t,e,n,s){Lo(s),e=qs(e,"onChange"),0<e.length&&(n=new xa("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Un=null,es=null;function rm(t){gc(t,0)}function Nr(t){var e=en(t);if(Po(e))return t}function im(t,e){if(t==="change")return e}var ac=!1;if(it){var Ur;if(it){var Vr="oninput"in document;if(!Vr){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),Vr=typeof xl.oninput=="function"}Ur=Vr}else Ur=!1;ac=Ur&&(!document.documentMode||9<document.documentMode)}function Nl(){Un&&(Un.detachEvent("onpropertychange",lc),es=Un=null)}function lc(t){if(t.propertyName==="value"&&Nr(es)){var e=[];ic(e,es,t,ha(t)),Oo(rm,e)}}function am(t,e,n){t==="focusin"?(Nl(),Un=e,es=n,Un.attachEvent("onpropertychange",lc)):t==="focusout"&&Nl()}function lm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nr(es)}function om(t,e){if(t==="click")return Nr(e)}function cm(t,e){if(t==="input"||t==="change")return Nr(e)}function um(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ge=typeof Object.is=="function"?Object.is:um;function ts(t,e){if(Ge(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!oi.call(e,r)||!Ge(t[r],e[r]))return!1}return!0}function jl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wl(t,e){var n=jl(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jl(n)}}function oc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cc(){for(var t=window,e=Ws();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ws(t.document)}return e}function wa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dm(t){var e=cc(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oc(n.ownerDocument.documentElement,n)){if(s!==null&&wa(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,a=Math.min(s.start,r);s=s.end===void 0?a:Math.min(s.end,r),!t.extend&&a>s&&(r=s,s=a,a=r),r=wl(n,a);var l=wl(n,s);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mm=it&&"documentMode"in document&&11>=document.documentMode,Zt=null,Mi=null,Vn=null,Di=!1;function kl(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Di||Zt==null||Zt!==Ws(s)||(s=Zt,"selectionStart"in s&&wa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Vn&&ts(Vn,s)||(Vn=s,s=qs(Mi,"onSelect"),0<s.length&&(e=new xa("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Zt)))}function Ss(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qt={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionend:Ss("Transition","TransitionEnd")},Hr={},uc={};it&&(uc=document.createElement("div").style,"AnimationEvent"in window||(delete qt.animationend.animation,delete qt.animationiteration.animation,delete qt.animationstart.animation),"TransitionEvent"in window||delete qt.transitionend.transition);function jr(t){if(Hr[t])return Hr[t];if(!qt[t])return t;var e=qt[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uc)return Hr[t]=e[n];return t}var dc=jr("animationend"),mc=jr("animationiteration"),hc=jr("animationstart"),pc=jr("transitionend"),fc=new Map,Sl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dt(t,e){fc.set(t,e),Vt(e,[t])}for(var Gr=0;Gr<Sl.length;Gr++){var Wr=Sl[Gr],hm=Wr.toLowerCase(),pm=Wr[0].toUpperCase()+Wr.slice(1);Dt(hm,"on"+pm)}Dt(dc,"onAnimationEnd");Dt(mc,"onAnimationIteration");Dt(hc,"onAnimationStart");Dt("dblclick","onDoubleClick");Dt("focusin","onFocus");Dt("focusout","onBlur");Dt(pc,"onTransitionEnd");fn("onMouseEnter",["mouseout","mouseover"]);fn("onMouseLeave",["mouseout","mouseover"]);fn("onPointerEnter",["pointerout","pointerover"]);fn("onPointerLeave",["pointerout","pointerover"]);Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fm=new Set("cancel close invalid load scroll toggle".split(" ").concat(zn));function El(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,hd(s,e,void 0,t),t.currentTarget=null}function gc(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&r.isPropagationStopped())break e;El(r,o,u),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&r.isPropagationStopped())break e;El(r,o,u),a=c}}}if(Js)throw t=ki,Js=!1,ki=null,t}function W(t,e){var n=e[Ai];n===void 0&&(n=e[Ai]=new Set);var s=t+"__bubble";n.has(s)||(yc(e,t,2,!1),n.add(s))}function Qr(t,e,n){var s=0;e&&(s|=4),yc(n,t,s,e)}var Es="_reactListening"+Math.random().toString(36).slice(2);function ns(t){if(!t[Es]){t[Es]=!0,So.forEach(function(n){n!=="selectionchange"&&(fm.has(n)||Qr(n,!1,t),Qr(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Es]||(e[Es]=!0,Qr("selectionchange",!1,e))}}function yc(t,e,n,s){switch(ec(e)){case 1:var r=Pd;break;case 4:r=Td;break;default:r=ya}n=r.bind(null,e,n,t),r=void 0,!wi||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Jr(t,e,n,s,r){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;l=l.return}for(;o!==null;){if(l=At(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}Oo(function(){var u=a,f=ha(n),g=[];e:{var y=fc.get(t);if(y!==void 0){var k=xa,C=t;switch(t){case"keypress":if($s(n)===0)break e;case"keydown":case"keyup":k=Gd;break;case"focusin":C="focus",k=Br;break;case"focusout":C="blur",k=Br;break;case"beforeblur":case"afterblur":k=Br;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Jd;break;case dc:case mc:case hc:k=Ld;break;case pc:k=Xd;break;case"scroll":k=bd;break;case"wheel":k=Zd;break;case"copy":case"cut":case"paste":k=$d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=fl}var v=(e&4)!==0,_=!v&&t==="scroll",h=v?y!==null?y+"Capture":null:y;v=[];for(var m=u,p;m!==null;){p=m;var N=p.stateNode;if(p.tag===5&&N!==null&&(p=N,h!==null&&(N=Xn(m,h),N!=null&&v.push(ss(m,N,p)))),_)break;m=m.return}0<v.length&&(y=new k(y,C,null,n,f),g.push({event:y,listeners:v}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",y&&n!==Ni&&(C=n.relatedTarget||n.fromElement)&&(At(C)||C[at]))break e;if((k||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,k?(C=n.relatedTarget||n.toElement,k=u,C=C?At(C):null,C!==null&&(_=Ht(C),C!==_||C.tag!==5&&C.tag!==6)&&(C=null)):(k=null,C=u),k!==C)){if(v=hl,N="onMouseLeave",h="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=fl,N="onPointerLeave",h="onPointerEnter",m="pointer"),_=k==null?y:en(k),p=C==null?y:en(C),y=new v(N,m+"leave",k,n,f),y.target=_,y.relatedTarget=p,N=null,At(f)===u&&(v=new v(h,m+"enter",C,n,f),v.target=p,v.relatedTarget=_,N=v),_=N,k&&C)t:{for(v=k,h=C,m=0,p=v;p;p=Wt(p))m++;for(p=0,N=h;N;N=Wt(N))p++;for(;0<m-p;)v=Wt(v),m--;for(;0<p-m;)h=Wt(h),p--;for(;m--;){if(v===h||h!==null&&v===h.alternate)break t;v=Wt(v),h=Wt(h)}v=null}else v=null;k!==null&&Cl(g,y,k,v,!1),C!==null&&_!==null&&Cl(g,_,C,v,!0)}}e:{if(y=u?en(u):window,k=y.nodeName&&y.nodeName.toLowerCase(),k==="select"||k==="input"&&y.type==="file")var E=im;else if(vl(y))if(ac)E=cm;else{E=lm;var P=am}else(k=y.nodeName)&&k.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(E=om);if(E&&(E=E(t,u))){ic(g,E,n,f);break e}P&&P(t,y,u),t==="focusout"&&(P=y._wrapperState)&&P.controlled&&y.type==="number"&&fi(y,"number",y.value)}switch(P=u?en(u):window,t){case"focusin":(vl(P)||P.contentEditable==="true")&&(Zt=P,Mi=u,Vn=null);break;case"focusout":Vn=Mi=Zt=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,kl(g,n,f);break;case"selectionchange":if(mm)break;case"keydown":case"keyup":kl(g,n,f)}var d;if(ja)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Yt?sc(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(nc&&n.locale!=="ko"&&(Yt||x!=="onCompositionStart"?x==="onCompositionEnd"&&Yt&&(d=tc()):(gt=f,va="value"in gt?gt.value:gt.textContent,Yt=!0)),P=qs(u,x),0<P.length&&(x=new pl(x,t,null,n,f),g.push({event:x,listeners:P}),d?x.data=d:(d=rc(n),d!==null&&(x.data=d)))),(d=em?tm(t,n):nm(t,n))&&(u=qs(u,"onBeforeInput"),0<u.length&&(f=new pl("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:u}),f.data=d))}gc(g,e)})}function ss(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qs(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Xn(t,n),a!=null&&s.unshift(ss(t,a,r)),a=Xn(t,e),a!=null&&s.push(ss(t,a,r))),t=t.return}return s}function Wt(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cl(t,e,n,s,r){for(var a=e._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,r?(c=Xn(n,a),c!=null&&l.unshift(ss(n,c,o))):r||(c=Xn(n,a),c!=null&&l.push(ss(n,c,o)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var gm=/\r\n?/g,ym=/\u0000|\uFFFD/g;function Ml(t){return(typeof t=="string"?t:""+t).replace(gm,`
`).replace(ym,"")}function Cs(t,e,n){if(e=Ml(e),Ml(t)!==e&&n)throw Error(T(425))}function er(){}var Pi=null,Ti=null;function bi(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _i=typeof setTimeout=="function"?setTimeout:void 0,vm=typeof clearTimeout=="function"?clearTimeout:void 0,Dl=typeof Promise=="function"?Promise:void 0,xm=typeof queueMicrotask=="function"?queueMicrotask:typeof Dl<"u"?function(t){return Dl.resolve(null).then(t).catch(Nm)}:_i;function Nm(t){setTimeout(function(){throw t})}function Kr(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),qn(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);qn(e)}function jt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pl(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),Xe="__reactFiber$"+Sn,rs="__reactProps$"+Sn,at="__reactContainer$"+Sn,Ai="__reactEvents$"+Sn,jm="__reactListeners$"+Sn,wm="__reactHandles$"+Sn;function At(t){var e=t[Xe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[at]||n[Xe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pl(t);t!==null;){if(n=t[Xe])return n;t=Pl(t)}return e}t=n,n=t.parentNode}return null}function ps(t){return t=t[Xe]||t[at],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function en(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function wr(t){return t[rs]||null}var Ii=[],tn=-1;function Pt(t){return{current:t}}function Q(t){0>tn||(t.current=Ii[tn],Ii[tn]=null,tn--)}function G(t,e){tn++,Ii[tn]=t.current,t.current=e}var Mt={},he=Pt(Mt),we=Pt(!1),$t=Mt;function gn(t,e){var n=t.type.contextTypes;if(!n)return Mt;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function ke(t){return t=t.childContextTypes,t!=null}function tr(){Q(we),Q(he)}function Tl(t,e,n){if(he.current!==Mt)throw Error(T(168));G(he,e),G(we,n)}function vc(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(T(108,ad(t)||"Unknown",r));return Y({},n,s)}function nr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mt,$t=he.current,G(he,t),G(we,we.current),!0}function bl(t,e,n){var s=t.stateNode;if(!s)throw Error(T(169));n?(t=vc(t,e,$t),s.__reactInternalMemoizedMergedChildContext=t,Q(we),Q(he),G(he,t)):Q(we),G(we,n)}var tt=null,kr=!1,Xr=!1;function xc(t){tt===null?tt=[t]:tt.push(t)}function km(t){kr=!0,xc(t)}function Tt(){if(!Xr&&tt!==null){Xr=!0;var t=0,e=V;try{var n=tt;for(V=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}tt=null,kr=!1}catch(r){throw tt!==null&&(tt=tt.slice(t+1)),Ho(pa,Tt),r}finally{V=e,Xr=!1}}return null}var nn=[],sn=0,sr=null,rr=0,Ae=[],Ie=0,Ft=null,nt=1,st="";function bt(t,e){nn[sn++]=rr,nn[sn++]=sr,sr=t,rr=e}function Nc(t,e,n){Ae[Ie++]=nt,Ae[Ie++]=st,Ae[Ie++]=Ft,Ft=t;var s=nt;t=st;var r=32-Ve(s)-1;s&=~(1<<r),n+=1;var a=32-Ve(e)+r;if(30<a){var l=r-r%5;a=(s&(1<<l)-1).toString(32),s>>=l,r-=l,nt=1<<32-Ve(e)+r|n<<r|s,st=a+t}else nt=1<<a|n<<r|s,st=t}function ka(t){t.return!==null&&(bt(t,1),Nc(t,1,0))}function Sa(t){for(;t===sr;)sr=nn[--sn],nn[sn]=null,rr=nn[--sn],nn[sn]=null;for(;t===Ft;)Ft=Ae[--Ie],Ae[Ie]=null,st=Ae[--Ie],Ae[Ie]=null,nt=Ae[--Ie],Ae[Ie]=null}var Pe=null,De=null,J=!1,Ue=null;function jc(t,e){var n=Re(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _l(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pe=t,De=jt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pe=t,De=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ft!==null?{id:nt,overflow:st}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Re(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pe=t,De=null,!0):!1;default:return!1}}function Ri(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Li(t){if(J){var e=De;if(e){var n=e;if(!_l(t,e)){if(Ri(t))throw Error(T(418));e=jt(n.nextSibling);var s=Pe;e&&_l(t,e)?jc(s,n):(t.flags=t.flags&-4097|2,J=!1,Pe=t)}}else{if(Ri(t))throw Error(T(418));t.flags=t.flags&-4097|2,J=!1,Pe=t}}}function Al(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pe=t}function Ms(t){if(t!==Pe)return!1;if(!J)return Al(t),J=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bi(t.type,t.memoizedProps)),e&&(e=De)){if(Ri(t))throw wc(),Error(T(418));for(;e;)jc(t,e),e=jt(e.nextSibling)}if(Al(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){De=jt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}De=null}}else De=Pe?jt(t.stateNode.nextSibling):null;return!0}function wc(){for(var t=De;t;)t=jt(t.nextSibling)}function yn(){De=Pe=null,J=!1}function Ea(t){Ue===null?Ue=[t]:Ue.push(t)}var Sm=ct.ReactCurrentBatchConfig;function bn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var s=n.stateNode}if(!s)throw Error(T(147,t));var r=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=r.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Ds(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Il(t){var e=t._init;return e(t._payload)}function kc(t){function e(h,m){if(t){var p=h.deletions;p===null?(h.deletions=[m],h.flags|=16):p.push(m)}}function n(h,m){if(!t)return null;for(;m!==null;)e(h,m),m=m.sibling;return null}function s(h,m){for(h=new Map;m!==null;)m.key!==null?h.set(m.key,m):h.set(m.index,m),m=m.sibling;return h}function r(h,m){return h=Et(h,m),h.index=0,h.sibling=null,h}function a(h,m,p){return h.index=p,t?(p=h.alternate,p!==null?(p=p.index,p<m?(h.flags|=2,m):p):(h.flags|=2,m)):(h.flags|=1048576,m)}function l(h){return t&&h.alternate===null&&(h.flags|=2),h}function o(h,m,p,N){return m===null||m.tag!==6?(m=si(p,h.mode,N),m.return=h,m):(m=r(m,p),m.return=h,m)}function c(h,m,p,N){var E=p.type;return E===Xt?f(h,m,p.props.children,N,p.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===dt&&Il(E)===m.type)?(N=r(m,p.props),N.ref=bn(h,m,p),N.return=h,N):(N=Gs(p.type,p.key,p.props,null,h.mode,N),N.ref=bn(h,m,p),N.return=h,N)}function u(h,m,p,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=ri(p,h.mode,N),m.return=h,m):(m=r(m,p.children||[]),m.return=h,m)}function f(h,m,p,N,E){return m===null||m.tag!==7?(m=zt(p,h.mode,N,E),m.return=h,m):(m=r(m,p),m.return=h,m)}function g(h,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=si(""+m,h.mode,p),m.return=h,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ys:return p=Gs(m.type,m.key,m.props,null,h.mode,p),p.ref=bn(h,null,m),p.return=h,p;case Kt:return m=ri(m,h.mode,p),m.return=h,m;case dt:var N=m._init;return g(h,N(m._payload),p)}if(Rn(m)||Cn(m))return m=zt(m,h.mode,p,null),m.return=h,m;Ds(h,m)}return null}function y(h,m,p,N){var E=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return E!==null?null:o(h,m,""+p,N);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ys:return p.key===E?c(h,m,p,N):null;case Kt:return p.key===E?u(h,m,p,N):null;case dt:return E=p._init,y(h,m,E(p._payload),N)}if(Rn(p)||Cn(p))return E!==null?null:f(h,m,p,N,null);Ds(h,p)}return null}function k(h,m,p,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return h=h.get(p)||null,o(m,h,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ys:return h=h.get(N.key===null?p:N.key)||null,c(m,h,N,E);case Kt:return h=h.get(N.key===null?p:N.key)||null,u(m,h,N,E);case dt:var P=N._init;return k(h,m,p,P(N._payload),E)}if(Rn(N)||Cn(N))return h=h.get(p)||null,f(m,h,N,E,null);Ds(m,N)}return null}function C(h,m,p,N){for(var E=null,P=null,d=m,x=m=0,j=null;d!==null&&x<p.length;x++){d.index>x?(j=d,d=null):j=d.sibling;var M=y(h,d,p[x],N);if(M===null){d===null&&(d=j);break}t&&d&&M.alternate===null&&e(h,d),m=a(M,m,x),P===null?E=M:P.sibling=M,P=M,d=j}if(x===p.length)return n(h,d),J&&bt(h,x),E;if(d===null){for(;x<p.length;x++)d=g(h,p[x],N),d!==null&&(m=a(d,m,x),P===null?E=d:P.sibling=d,P=d);return J&&bt(h,x),E}for(d=s(h,d);x<p.length;x++)j=k(d,h,x,p[x],N),j!==null&&(t&&j.alternate!==null&&d.delete(j.key===null?x:j.key),m=a(j,m,x),P===null?E=j:P.sibling=j,P=j);return t&&d.forEach(function(z){return e(h,z)}),J&&bt(h,x),E}function v(h,m,p,N){var E=Cn(p);if(typeof E!="function")throw Error(T(150));if(p=E.call(p),p==null)throw Error(T(151));for(var P=E=null,d=m,x=m=0,j=null,M=p.next();d!==null&&!M.done;x++,M=p.next()){d.index>x?(j=d,d=null):j=d.sibling;var z=y(h,d,M.value,N);if(z===null){d===null&&(d=j);break}t&&d&&z.alternate===null&&e(h,d),m=a(z,m,x),P===null?E=z:P.sibling=z,P=z,d=j}if(M.done)return n(h,d),J&&bt(h,x),E;if(d===null){for(;!M.done;x++,M=p.next())M=g(h,M.value,N),M!==null&&(m=a(M,m,x),P===null?E=M:P.sibling=M,P=M);return J&&bt(h,x),E}for(d=s(h,d);!M.done;x++,M=p.next())M=k(d,h,x,M.value,N),M!==null&&(t&&M.alternate!==null&&d.delete(M.key===null?x:M.key),m=a(M,m,x),P===null?E=M:P.sibling=M,P=M);return t&&d.forEach(function(pe){return e(h,pe)}),J&&bt(h,x),E}function _(h,m,p,N){if(typeof p=="object"&&p!==null&&p.type===Xt&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ys:e:{for(var E=p.key,P=m;P!==null;){if(P.key===E){if(E=p.type,E===Xt){if(P.tag===7){n(h,P.sibling),m=r(P,p.props.children),m.return=h,h=m;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===dt&&Il(E)===P.type){n(h,P.sibling),m=r(P,p.props),m.ref=bn(h,P,p),m.return=h,h=m;break e}n(h,P);break}else e(h,P);P=P.sibling}p.type===Xt?(m=zt(p.props.children,h.mode,N,p.key),m.return=h,h=m):(N=Gs(p.type,p.key,p.props,null,h.mode,N),N.ref=bn(h,m,p),N.return=h,h=N)}return l(h);case Kt:e:{for(P=p.key;m!==null;){if(m.key===P)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(h,m.sibling),m=r(m,p.children||[]),m.return=h,h=m;break e}else{n(h,m);break}else e(h,m);m=m.sibling}m=ri(p,h.mode,N),m.return=h,h=m}return l(h);case dt:return P=p._init,_(h,m,P(p._payload),N)}if(Rn(p))return C(h,m,p,N);if(Cn(p))return v(h,m,p,N);Ds(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(h,m.sibling),m=r(m,p),m.return=h,h=m):(n(h,m),m=si(p,h.mode,N),m.return=h,h=m),l(h)):n(h,m)}return _}var vn=kc(!0),Sc=kc(!1),ir=Pt(null),ar=null,rn=null,Ca=null;function Ma(){Ca=rn=ar=null}function Da(t){var e=ir.current;Q(ir),t._currentValue=e}function zi(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function mn(t,e){ar=t,Ca=rn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(je=!0),t.firstContext=null)}function ze(t){var e=t._currentValue;if(Ca!==t)if(t={context:t,memoizedValue:e,next:null},rn===null){if(ar===null)throw Error(T(308));rn=t,ar.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var It=null;function Pa(t){It===null?It=[t]:It.push(t)}function Ec(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Pa(e)):(n.next=r.next,r.next=n),e.interleaved=n,lt(t,s)}function lt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mt=!1;function Ta(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wt(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,O&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,lt(t,n)}return r=s.interleaved,r===null?(e.next=e,Pa(s)):(e.next=r.next,r.next=e),s.interleaved=e,lt(t,n)}function Fs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fa(t,n)}}function Rl(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lr(t,e,n,s){var r=t.updateQueue;mt=!1;var a=r.firstBaseUpdate,l=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=c))}if(a!==null){var g=r.baseState;l=0,f=u=c=null,o=a;do{var y=o.lane,k=o.eventTime;if((s&y)===y){f!==null&&(f=f.next={eventTime:k,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var C=t,v=o;switch(y=e,k=n,v.tag){case 1:if(C=v.payload,typeof C=="function"){g=C.call(k,g,y);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=v.payload,y=typeof C=="function"?C.call(k,g,y):C,y==null)break e;g=Y({},g,y);break e;case 2:mt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[o]:y.push(o))}else k={eventTime:k,lane:y,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=k,c=g):f=f.next=k,l|=y;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;y=o,o=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(1);if(f===null&&(c=g),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else a===null&&(r.shared.lanes=0);Bt|=l,t.lanes=l,t.memoizedState=g}}function Ll(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(T(191,r));r.call(s)}}}var fs={},Ze=Pt(fs),is=Pt(fs),as=Pt(fs);function Rt(t){if(t===fs)throw Error(T(174));return t}function ba(t,e){switch(G(as,e),G(is,t),G(Ze,fs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yi(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yi(e,t)}Q(Ze),G(Ze,e)}function xn(){Q(Ze),Q(is),Q(as)}function Mc(t){Rt(as.current);var e=Rt(Ze.current),n=yi(e,t.type);e!==n&&(G(is,t),G(Ze,n))}function _a(t){is.current===t&&(Q(Ze),Q(is))}var K=Pt(0);function or(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yr=[];function Aa(){for(var t=0;t<Yr.length;t++)Yr[t]._workInProgressVersionPrimary=null;Yr.length=0}var Os=ct.ReactCurrentDispatcher,Zr=ct.ReactCurrentBatchConfig,Ot=0,X=null,ne=null,ie=null,cr=!1,Hn=!1,ls=0,Em=0;function ue(){throw Error(T(321))}function Ia(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ge(t[n],e[n]))return!1;return!0}function Ra(t,e,n,s,r,a){if(Ot=a,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Os.current=t===null||t.memoizedState===null?Pm:Tm,t=n(s,r),Hn){a=0;do{if(Hn=!1,ls=0,25<=a)throw Error(T(301));a+=1,ie=ne=null,e.updateQueue=null,Os.current=bm,t=n(s,r)}while(Hn)}if(Os.current=ur,e=ne!==null&&ne.next!==null,Ot=0,ie=ne=X=null,cr=!1,e)throw Error(T(300));return t}function La(){var t=ls!==0;return ls=0,t}function Ke(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?X.memoizedState=ie=t:ie=ie.next=t,ie}function $e(){if(ne===null){var t=X.alternate;t=t!==null?t.memoizedState:null}else t=ne.next;var e=ie===null?X.memoizedState:ie.next;if(e!==null)ie=e,ne=t;else{if(t===null)throw Error(T(310));ne=t,t={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},ie===null?X.memoizedState=ie=t:ie=ie.next=t}return ie}function os(t,e){return typeof e=="function"?e(t):e}function qr(t){var e=$e(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var s=ne,r=s.baseQueue,a=n.pending;if(a!==null){if(r!==null){var l=r.next;r.next=a.next,a.next=l}s.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,s=s.baseState;var o=l=null,c=null,u=a;do{var f=u.lane;if((Ot&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var g={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=g,l=s):c=c.next=g,X.lanes|=f,Bt|=f}u=u.next}while(u!==null&&u!==a);c===null?l=s:c.next=o,Ge(s,e.memoizedState)||(je=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do a=r.lane,X.lanes|=a,Bt|=a,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ei(t){var e=$e(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do a=t(a,l.action),l=l.next;while(l!==r);Ge(a,e.memoizedState)||(je=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Dc(){}function Pc(t,e){var n=X,s=$e(),r=e(),a=!Ge(s.memoizedState,r);if(a&&(s.memoizedState=r,je=!0),s=s.queue,za(_c.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||ie!==null&&ie.memoizedState.tag&1){if(n.flags|=2048,cs(9,bc.bind(null,n,s,r,e),void 0,null),ae===null)throw Error(T(349));Ot&30||Tc(n,e,r)}return r}function Tc(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bc(t,e,n,s){e.value=n,e.getSnapshot=s,Ac(e)&&Ic(t)}function _c(t,e,n){return n(function(){Ac(e)&&Ic(t)})}function Ac(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ge(t,n)}catch{return!0}}function Ic(t){var e=lt(t,1);e!==null&&He(e,t,1,-1)}function zl(t){var e=Ke();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},e.queue=t,t=t.dispatch=Dm.bind(null,X,t),[e.memoizedState,t]}function cs(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Rc(){return $e().memoizedState}function Bs(t,e,n,s){var r=Ke();X.flags|=t,r.memoizedState=cs(1|e,n,void 0,s===void 0?null:s)}function Sr(t,e,n,s){var r=$e();s=s===void 0?null:s;var a=void 0;if(ne!==null){var l=ne.memoizedState;if(a=l.destroy,s!==null&&Ia(s,l.deps)){r.memoizedState=cs(e,n,a,s);return}}X.flags|=t,r.memoizedState=cs(1|e,n,a,s)}function $l(t,e){return Bs(8390656,8,t,e)}function za(t,e){return Sr(2048,8,t,e)}function Lc(t,e){return Sr(4,2,t,e)}function zc(t,e){return Sr(4,4,t,e)}function $c(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fc(t,e,n){return n=n!=null?n.concat([t]):null,Sr(4,4,$c.bind(null,e,t),n)}function $a(){}function Oc(t,e){var n=$e();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Ia(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Bc(t,e){var n=$e();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Ia(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Uc(t,e,n){return Ot&21?(Ge(n,e)||(n=Qo(),X.lanes|=n,Bt|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,je=!0),t.memoizedState=n)}function Cm(t,e){var n=V;V=n!==0&&4>n?n:4,t(!0);var s=Zr.transition;Zr.transition={};try{t(!1),e()}finally{V=n,Zr.transition=s}}function Vc(){return $e().memoizedState}function Mm(t,e,n){var s=St(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Hc(t))Gc(e,n);else if(n=Ec(t,e,n,s),n!==null){var r=ge();He(n,t,s,r),Wc(n,e,s)}}function Dm(t,e,n){var s=St(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hc(t))Gc(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,n);if(r.hasEagerState=!0,r.eagerState=o,Ge(o,l)){var c=e.interleaved;c===null?(r.next=r,Pa(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Ec(t,e,r,s),n!==null&&(r=ge(),He(n,t,s,r),Wc(n,e,s))}}function Hc(t){var e=t.alternate;return t===X||e!==null&&e===X}function Gc(t,e){Hn=cr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wc(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,fa(t,n)}}var ur={readContext:ze,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useInsertionEffect:ue,useLayoutEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useMutableSource:ue,useSyncExternalStore:ue,useId:ue,unstable_isNewReconciler:!1},Pm={readContext:ze,useCallback:function(t,e){return Ke().memoizedState=[t,e===void 0?null:e],t},useContext:ze,useEffect:$l,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bs(4194308,4,$c.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bs(4,2,t,e)},useMemo:function(t,e){var n=Ke();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Ke();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Mm.bind(null,X,t),[s.memoizedState,t]},useRef:function(t){var e=Ke();return t={current:t},e.memoizedState=t},useState:zl,useDebugValue:$a,useDeferredValue:function(t){return Ke().memoizedState=t},useTransition:function(){var t=zl(!1),e=t[0];return t=Cm.bind(null,t[1]),Ke().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=X,r=Ke();if(J){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),ae===null)throw Error(T(349));Ot&30||Tc(s,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,$l(_c.bind(null,s,a,t),[t]),s.flags|=2048,cs(9,bc.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=Ke(),e=ae.identifierPrefix;if(J){var n=st,s=nt;n=(s&~(1<<32-Ve(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=ls++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Em++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tm={readContext:ze,useCallback:Oc,useContext:ze,useEffect:za,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:zc,useMemo:Bc,useReducer:qr,useRef:Rc,useState:function(){return qr(os)},useDebugValue:$a,useDeferredValue:function(t){var e=$e();return Uc(e,ne.memoizedState,t)},useTransition:function(){var t=qr(os)[0],e=$e().memoizedState;return[t,e]},useMutableSource:Dc,useSyncExternalStore:Pc,useId:Vc,unstable_isNewReconciler:!1},bm={readContext:ze,useCallback:Oc,useContext:ze,useEffect:za,useImperativeHandle:Fc,useInsertionEffect:Lc,useLayoutEffect:zc,useMemo:Bc,useReducer:ei,useRef:Rc,useState:function(){return ei(os)},useDebugValue:$a,useDeferredValue:function(t){var e=$e();return ne===null?e.memoizedState=t:Uc(e,ne.memoizedState,t)},useTransition:function(){var t=ei(os)[0],e=$e().memoizedState;return[t,e]},useMutableSource:Dc,useSyncExternalStore:Pc,useId:Vc,unstable_isNewReconciler:!1};function Oe(t,e){if(t&&t.defaultProps){e=Y({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $i(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Y({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Er={isMounted:function(t){return(t=t._reactInternals)?Ht(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ge(),r=St(t),a=rt(s,r);a.payload=e,n!=null&&(a.callback=n),e=wt(t,a,r),e!==null&&(He(e,t,r,s),Fs(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ge(),r=St(t),a=rt(s,r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=wt(t,a,r),e!==null&&(He(e,t,r,s),Fs(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ge(),s=St(t),r=rt(n,s);r.tag=2,e!=null&&(r.callback=e),e=wt(t,r,s),e!==null&&(He(e,t,s,n),Fs(e,t,s))}};function Fl(t,e,n,s,r,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,l):e.prototype&&e.prototype.isPureReactComponent?!ts(n,s)||!ts(r,a):!0}function Qc(t,e,n){var s=!1,r=Mt,a=e.contextType;return typeof a=="object"&&a!==null?a=ze(a):(r=ke(e)?$t:he.current,s=e.contextTypes,a=(s=s!=null)?gn(t,r):Mt),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Er,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ol(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Er.enqueueReplaceState(e,e.state,null)}function Fi(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ta(t);var a=e.contextType;typeof a=="object"&&a!==null?r.context=ze(a):(a=ke(e)?$t:he.current,r.context=gn(t,a)),r.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&($i(t,e,a,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Er.enqueueReplaceState(r,r.state,null),lr(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Nn(t,e){try{var n="",s=e;do n+=id(s),s=s.return;while(s);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:r,digest:null}}function ti(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oi(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _m=typeof WeakMap=="function"?WeakMap:Map;function Jc(t,e,n){n=rt(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){mr||(mr=!0,Xi=s),Oi(t,e)},n}function Kc(t,e,n){n=rt(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Oi(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Oi(t,e),typeof s!="function"&&(kt===null?kt=new Set([this]):kt.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Bl(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new _m;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=Wm.bind(null,t,e,n),e.then(t,t))}function Ul(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vl(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rt(-1,1),e.tag=2,wt(n,e,1))),n.lanes|=1),t)}var Am=ct.ReactCurrentOwner,je=!1;function fe(t,e,n,s){e.child=t===null?Sc(e,null,n,s):vn(e,t.child,n,s)}function Hl(t,e,n,s,r){n=n.render;var a=e.ref;return mn(e,r),s=Ra(t,e,n,s,a,r),n=La(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ot(t,e,r)):(J&&n&&ka(e),e.flags|=1,fe(t,e,s,r),e.child)}function Gl(t,e,n,s,r){if(t===null){var a=n.type;return typeof a=="function"&&!Wa(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Xc(t,e,a,s,r)):(t=Gs(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&r)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(l,s)&&t.ref===e.ref)return ot(t,e,r)}return e.flags|=1,t=Et(a,s),t.ref=e.ref,t.return=e,e.child=t}function Xc(t,e,n,s,r){if(t!==null){var a=t.memoizedProps;if(ts(a,s)&&t.ref===e.ref)if(je=!1,e.pendingProps=s=a,(t.lanes&r)!==0)t.flags&131072&&(je=!0);else return e.lanes=t.lanes,ot(t,e,r)}return Bi(t,e,n,s,r)}function Yc(t,e,n){var s=e.pendingProps,r=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ln,Me),Me|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(ln,Me),Me|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,G(ln,Me),Me|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,G(ln,Me),Me|=s;return fe(t,e,r,n),e.child}function Zc(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bi(t,e,n,s,r){var a=ke(n)?$t:he.current;return a=gn(e,a),mn(e,r),n=Ra(t,e,n,s,a,r),s=La(),t!==null&&!je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ot(t,e,r)):(J&&s&&ka(e),e.flags|=1,fe(t,e,n,r),e.child)}function Wl(t,e,n,s,r){if(ke(n)){var a=!0;nr(e)}else a=!1;if(mn(e,r),e.stateNode===null)Us(t,e),Qc(e,n,s),Fi(e,n,s,r),s=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=ze(u):(u=ke(n)?$t:he.current,u=gn(e,u));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Ol(e,l,s,u),mt=!1;var y=e.memoizedState;l.state=y,lr(e,s,l,r),c=e.memoizedState,o!==s||y!==c||we.current||mt?(typeof f=="function"&&($i(e,n,f,s),c=e.memoizedState),(o=mt||Fl(e,n,o,s,y,c,u))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),l.props=s,l.state=c,l.context=u,s=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,Cc(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Oe(e.type,o),l.props=u,g=e.pendingProps,y=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=ze(c):(c=ke(n)?$t:he.current,c=gn(e,c));var k=n.getDerivedStateFromProps;(f=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==g||y!==c)&&Ol(e,l,s,c),mt=!1,y=e.memoizedState,l.state=y,lr(e,s,l,r);var C=e.memoizedState;o!==g||y!==C||we.current||mt?(typeof k=="function"&&($i(e,n,k,s),C=e.memoizedState),(u=mt||Fl(e,n,u,s,y,C,c)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,C,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,C,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=C),l.props=s,l.state=C,l.context=c,s=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),s=!1)}return Ui(t,e,n,s,a,r)}function Ui(t,e,n,s,r,a){Zc(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return r&&bl(e,n,!1),ot(t,e,a);s=e.stateNode,Am.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=vn(e,t.child,null,a),e.child=vn(e,null,o,a)):fe(t,e,o,a),e.memoizedState=s.state,r&&bl(e,n,!0),e.child}function qc(t){var e=t.stateNode;e.pendingContext?Tl(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tl(t,e.context,!1),ba(t,e.containerInfo)}function Ql(t,e,n,s,r){return yn(),Ea(r),e.flags|=256,fe(t,e,n,s),e.child}var Vi={dehydrated:null,treeContext:null,retryLane:0};function Hi(t){return{baseLanes:t,cachePool:null,transitions:null}}function eu(t,e,n){var s=e.pendingProps,r=K.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),G(K,r&1),t===null)return Li(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Dr(l,s,0,null),t=zt(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Hi(n),e.memoizedState=Vi,t):Fa(e,l));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Im(t,e,l,s,o,r,n);if(a){a=s.fallback,l=e.mode,r=t.child,o=r.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Et(r,c),s.subtreeFlags=r.subtreeFlags&14680064),o!==null?a=Et(o,a):(a=zt(a,l,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l=l===null?Hi(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Vi,s}return a=t.child,t=a.sibling,s=Et(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Fa(t,e){return e=Dr({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ps(t,e,n,s){return s!==null&&Ea(s),vn(e,t.child,null,n),t=Fa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Im(t,e,n,s,r,a,l){if(n)return e.flags&256?(e.flags&=-257,s=ti(Error(T(422))),Ps(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,r=e.mode,s=Dr({mode:"visible",children:s.children},r,0,null),a=zt(a,r,l,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&vn(e,t.child,null,l),e.child.memoizedState=Hi(l),e.memoizedState=Vi,a);if(!(e.mode&1))return Ps(t,e,l,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(T(419)),s=ti(a,s,void 0),Ps(t,e,l,s)}if(o=(l&t.childLanes)!==0,je||o){if(s=ae,s!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|l)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,lt(t,r),He(s,t,r,-1))}return Ga(),s=ti(Error(T(421))),Ps(t,e,l,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Qm.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,De=jt(r.nextSibling),Pe=e,J=!0,Ue=null,t!==null&&(Ae[Ie++]=nt,Ae[Ie++]=st,Ae[Ie++]=Ft,nt=t.id,st=t.overflow,Ft=e),e=Fa(e,s.children),e.flags|=4096,e)}function Jl(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),zi(t.return,e,n)}function ni(t,e,n,s,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function tu(t,e,n){var s=e.pendingProps,r=s.revealOrder,a=s.tail;if(fe(t,e,s.children,n),s=K.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jl(t,n,e);else if(t.tag===19)Jl(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(G(K,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&or(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ni(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&or(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ni(e,!0,n,null,a);break;case"together":ni(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Us(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bt|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Et(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Et(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rm(t,e,n){switch(e.tag){case 3:qc(e),yn();break;case 5:Mc(e);break;case 1:ke(e.type)&&nr(e);break;case 4:ba(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;G(ir,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(G(K,K.current&1),e.flags|=128,null):n&e.child.childLanes?eu(t,e,n):(G(K,K.current&1),t=ot(t,e,n),t!==null?t.sibling:null);G(K,K.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return tu(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),G(K,K.current),s)break;return null;case 22:case 23:return e.lanes=0,Yc(t,e,n)}return ot(t,e,n)}var nu,Gi,su,ru;nu=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gi=function(){};su=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Rt(Ze.current);var a=null;switch(n){case"input":r=hi(t,r),s=hi(t,s),a=[];break;case"select":r=Y({},r,{value:void 0}),s=Y({},s,{value:void 0}),a=[];break;case"textarea":r=gi(t,r),s=gi(t,s),a=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=er)}vi(n,s);var l;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(o=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&W("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};ru=function(t,e,n,s){n!==s&&(e.flags|=4)};function _n(t,e){if(!J)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function de(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Lm(t,e,n){var s=e.pendingProps;switch(Sa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(e),null;case 1:return ke(e.type)&&tr(),de(e),null;case 3:return s=e.stateNode,xn(),Q(we),Q(he),Aa(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ms(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ue!==null&&(qi(Ue),Ue=null))),Gi(t,e),de(e),null;case 5:_a(e);var r=Rt(as.current);if(n=e.type,t!==null&&e.stateNode!=null)su(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(T(166));return de(e),null}if(t=Rt(Ze.current),Ms(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[Xe]=e,s[rs]=a,t=(e.mode&1)!==0,n){case"dialog":W("cancel",s),W("close",s);break;case"iframe":case"object":case"embed":W("load",s);break;case"video":case"audio":for(r=0;r<zn.length;r++)W(zn[r],s);break;case"source":W("error",s);break;case"img":case"image":case"link":W("error",s),W("load",s);break;case"details":W("toggle",s);break;case"input":sl(s,a),W("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},W("invalid",s);break;case"textarea":il(s,a),W("invalid",s)}vi(n,a),r=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&Cs(s.textContent,o,t),r=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Cs(s.textContent,o,t),r=["children",""+o]):Jn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&W("scroll",s)}switch(n){case"input":vs(s),rl(s,a,!0);break;case"textarea":vs(s),al(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=er)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_o(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(n,{is:s.is}):(t=l.createElement(n),n==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,n),t[Xe]=e,t[rs]=s,nu(t,e,!1,!1),e.stateNode=t;e:{switch(l=xi(n,s),n){case"dialog":W("cancel",t),W("close",t),r=s;break;case"iframe":case"object":case"embed":W("load",t),r=s;break;case"video":case"audio":for(r=0;r<zn.length;r++)W(zn[r],t);r=s;break;case"source":W("error",t),r=s;break;case"img":case"image":case"link":W("error",t),W("load",t),r=s;break;case"details":W("toggle",t),r=s;break;case"input":sl(t,s),r=hi(t,s),W("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Y({},s,{value:void 0}),W("invalid",t);break;case"textarea":il(t,s),r=gi(t,s),W("invalid",t);break;default:r=s}vi(n,r),o=r;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Ro(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ao(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Kn(t,c):typeof c=="number"&&Kn(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Jn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&W("scroll",t):c!=null&&ca(t,a,c,l))}switch(n){case"input":vs(t),rl(t,s,!1);break;case"textarea":vs(t),al(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Ct(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?on(t,!!s.multiple,a,!1):s.defaultValue!=null&&on(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=er)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return de(e),null;case 6:if(t&&e.stateNode!=null)ru(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(T(166));if(n=Rt(as.current),Rt(Ze.current),Ms(e)){if(s=e.stateNode,n=e.memoizedProps,s[Xe]=e,(a=s.nodeValue!==n)&&(t=Pe,t!==null))switch(t.tag){case 3:Cs(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cs(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Xe]=e,e.stateNode=s}return de(e),null;case 13:if(Q(K),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(J&&De!==null&&e.mode&1&&!(e.flags&128))wc(),yn(),e.flags|=98560,a=!1;else if(a=Ms(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(T(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(T(317));a[Xe]=e}else yn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;de(e),a=!1}else Ue!==null&&(qi(Ue),Ue=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||K.current&1?se===0&&(se=3):Ga())),e.updateQueue!==null&&(e.flags|=4),de(e),null);case 4:return xn(),Gi(t,e),t===null&&ns(e.stateNode.containerInfo),de(e),null;case 10:return Da(e.type._context),de(e),null;case 17:return ke(e.type)&&tr(),de(e),null;case 19:if(Q(K),a=e.memoizedState,a===null)return de(e),null;if(s=(e.flags&128)!==0,l=a.rendering,l===null)if(s)_n(a,!1);else{if(se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=or(t),l!==null){for(e.flags|=128,_n(a,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(K,K.current&1|2),e.child}t=t.sibling}a.tail!==null&&ee()>jn&&(e.flags|=128,s=!0,_n(a,!1),e.lanes=4194304)}else{if(!s)if(t=or(l),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_n(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!J)return de(e),null}else 2*ee()-a.renderingStartTime>jn&&n!==1073741824&&(e.flags|=128,s=!0,_n(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ee(),e.sibling=null,n=K.current,G(K,s?n&1|2:n&1),e):(de(e),null);case 22:case 23:return Ha(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Me&1073741824&&(de(e),e.subtreeFlags&6&&(e.flags|=8192)):de(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function zm(t,e){switch(Sa(e),e.tag){case 1:return ke(e.type)&&tr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xn(),Q(we),Q(he),Aa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _a(e),null;case 13:if(Q(K),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));yn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(K),null;case 4:return xn(),null;case 10:return Da(e.type._context),null;case 22:case 23:return Ha(),null;case 24:return null;default:return null}}var Ts=!1,me=!1,$m=typeof WeakSet=="function"?WeakSet:Set,R=null;function an(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){q(t,e,s)}else n.current=null}function Wi(t,e,n){try{n()}catch(s){q(t,e,s)}}var Kl=!1;function Fm(t,e){if(Pi=Ys,t=cc(),wa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,u=0,f=0,g=t,y=null;t:for(;;){for(var k;g!==n||r!==0&&g.nodeType!==3||(o=l+r),g!==a||s!==0&&g.nodeType!==3||(c=l+s),g.nodeType===3&&(l+=g.nodeValue.length),(k=g.firstChild)!==null;)y=g,g=k;for(;;){if(g===t)break t;if(y===n&&++u===r&&(o=l),y===a&&++f===s&&(c=l),(k=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=k}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ti={focusedElem:t,selectionRange:n},Ys=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var v=C.memoizedProps,_=C.memoizedState,h=e.stateNode,m=h.getSnapshotBeforeUpdate(e.elementType===e.type?v:Oe(e.type,v),_);h.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(N){q(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return C=Kl,Kl=!1,C}function Gn(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,a!==void 0&&Wi(e,n,a)}r=r.next}while(r!==s)}}function Cr(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Qi(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iu(t){var e=t.alternate;e!==null&&(t.alternate=null,iu(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xe],delete e[rs],delete e[Ai],delete e[jm],delete e[wm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function au(t){return t.tag===5||t.tag===3||t.tag===4}function Xl(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||au(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ji(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=er));else if(s!==4&&(t=t.child,t!==null))for(Ji(t,e,n),t=t.sibling;t!==null;)Ji(t,e,n),t=t.sibling}function Ki(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Ki(t,e,n),t=t.sibling;t!==null;)Ki(t,e,n),t=t.sibling}var le=null,Be=!1;function ut(t,e,n){for(n=n.child;n!==null;)lu(t,e,n),n=n.sibling}function lu(t,e,n){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(vr,n)}catch{}switch(n.tag){case 5:me||an(n,e);case 6:var s=le,r=Be;le=null,ut(t,e,n),le=s,Be=r,le!==null&&(Be?(t=le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):le.removeChild(n.stateNode));break;case 18:le!==null&&(Be?(t=le,n=n.stateNode,t.nodeType===8?Kr(t.parentNode,n):t.nodeType===1&&Kr(t,n),qn(t)):Kr(le,n.stateNode));break;case 4:s=le,r=Be,le=n.stateNode.containerInfo,Be=!0,ut(t,e,n),le=s,Be=r;break;case 0:case 11:case 14:case 15:if(!me&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var a=r,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Wi(n,e,l),r=r.next}while(r!==s)}ut(t,e,n);break;case 1:if(!me&&(an(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){q(n,e,o)}ut(t,e,n);break;case 21:ut(t,e,n);break;case 22:n.mode&1?(me=(s=me)||n.memoizedState!==null,ut(t,e,n),me=s):ut(t,e,n);break;default:ut(t,e,n)}}function Yl(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $m),e.forEach(function(s){var r=Jm.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Fe(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:le=o.stateNode,Be=!1;break e;case 3:le=o.stateNode.containerInfo,Be=!0;break e;case 4:le=o.stateNode.containerInfo,Be=!0;break e}o=o.return}if(le===null)throw Error(T(160));lu(a,l,r),le=null,Be=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){q(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ou(e,t),e=e.sibling}function ou(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fe(e,t),Qe(t),s&4){try{Gn(3,t,t.return),Cr(3,t)}catch(v){q(t,t.return,v)}try{Gn(5,t,t.return)}catch(v){q(t,t.return,v)}}break;case 1:Fe(e,t),Qe(t),s&512&&n!==null&&an(n,n.return);break;case 5:if(Fe(e,t),Qe(t),s&512&&n!==null&&an(n,n.return),t.flags&32){var r=t.stateNode;try{Kn(r,"")}catch(v){q(t,t.return,v)}}if(s&4&&(r=t.stateNode,r!=null)){var a=t.memoizedProps,l=n!==null?n.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&To(r,a),xi(o,l);var u=xi(o,a);for(l=0;l<c.length;l+=2){var f=c[l],g=c[l+1];f==="style"?Ro(r,g):f==="dangerouslySetInnerHTML"?Ao(r,g):f==="children"?Kn(r,g):ca(r,f,g,u)}switch(o){case"input":pi(r,a);break;case"textarea":bo(r,a);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var k=a.value;k!=null?on(r,!!a.multiple,k,!1):y!==!!a.multiple&&(a.defaultValue!=null?on(r,!!a.multiple,a.defaultValue,!0):on(r,!!a.multiple,a.multiple?[]:"",!1))}r[rs]=a}catch(v){q(t,t.return,v)}}break;case 6:if(Fe(e,t),Qe(t),s&4){if(t.stateNode===null)throw Error(T(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(v){q(t,t.return,v)}}break;case 3:if(Fe(e,t),Qe(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{qn(e.containerInfo)}catch(v){q(t,t.return,v)}break;case 4:Fe(e,t),Qe(t);break;case 13:Fe(e,t),Qe(t),r=t.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Ua=ee())),s&4&&Yl(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(me=(u=me)||f,Fe(e,t),me=u):Fe(e,t),Qe(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(R=t,f=t.child;f!==null;){for(g=R=f;R!==null;){switch(y=R,k=y.child,y.tag){case 0:case 11:case 14:case 15:Gn(4,y,y.return);break;case 1:an(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){s=y,n=y.return;try{e=s,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(v){q(s,n,v)}}break;case 5:an(y,y.return);break;case 22:if(y.memoizedState!==null){ql(g);continue}}k!==null?(k.return=y,R=k):ql(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{r=g.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=g.stateNode,c=g.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Io("display",l))}catch(v){q(t,t.return,v)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(v){q(t,t.return,v)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Fe(e,t),Qe(t),s&4&&Yl(t);break;case 21:break;default:Fe(e,t),Qe(t)}}function Qe(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(au(n)){var s=n;break e}n=n.return}throw Error(T(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Kn(r,""),s.flags&=-33);var a=Xl(t);Ki(t,a,r);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Xl(t);Ji(t,o,l);break;default:throw Error(T(161))}}catch(c){q(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Om(t,e,n){R=t,cu(t)}function cu(t,e,n){for(var s=(t.mode&1)!==0;R!==null;){var r=R,a=r.child;if(r.tag===22&&s){var l=r.memoizedState!==null||Ts;if(!l){var o=r.alternate,c=o!==null&&o.memoizedState!==null||me;o=Ts;var u=me;if(Ts=l,(me=c)&&!u)for(R=r;R!==null;)l=R,c=l.child,l.tag===22&&l.memoizedState!==null?eo(r):c!==null?(c.return=l,R=c):eo(r);for(;a!==null;)R=a,cu(a),a=a.sibling;R=r,Ts=o,me=u}Zl(t)}else r.subtreeFlags&8772&&a!==null?(a.return=r,R=a):Zl(t)}}function Zl(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:me||Cr(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!me)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Oe(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ll(e,a,s);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ll(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&qn(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}me||e.flags&512&&Qi(e)}catch(y){q(e,e.return,y)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function ql(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function eo(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cr(4,e)}catch(c){q(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){q(e,r,c)}}var a=e.return;try{Qi(e)}catch(c){q(e,a,c)}break;case 5:var l=e.return;try{Qi(e)}catch(c){q(e,l,c)}}}catch(c){q(e,e.return,c)}if(e===t){R=null;break}var o=e.sibling;if(o!==null){o.return=e.return,R=o;break}R=e.return}}var Bm=Math.ceil,dr=ct.ReactCurrentDispatcher,Oa=ct.ReactCurrentOwner,Le=ct.ReactCurrentBatchConfig,O=0,ae=null,te=null,oe=0,Me=0,ln=Pt(0),se=0,us=null,Bt=0,Mr=0,Ba=0,Wn=null,xe=null,Ua=0,jn=1/0,et=null,mr=!1,Xi=null,kt=null,bs=!1,yt=null,hr=0,Qn=0,Yi=null,Vs=-1,Hs=0;function ge(){return O&6?ee():Vs!==-1?Vs:Vs=ee()}function St(t){return t.mode&1?O&2&&oe!==0?oe&-oe:Sm.transition!==null?(Hs===0&&(Hs=Qo()),Hs):(t=V,t!==0||(t=window.event,t=t===void 0?16:ec(t.type)),t):1}function He(t,e,n,s){if(50<Qn)throw Qn=0,Yi=null,Error(T(185));ms(t,n,s),(!(O&2)||t!==ae)&&(t===ae&&(!(O&2)&&(Mr|=n),se===4&&pt(t,oe)),Se(t,s),n===1&&O===0&&!(e.mode&1)&&(jn=ee()+500,kr&&Tt()))}function Se(t,e){var n=t.callbackNode;Sd(t,e);var s=Xs(t,t===ae?oe:0);if(s===0)n!==null&&cl(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&cl(n),e===1)t.tag===0?km(to.bind(null,t)):xc(to.bind(null,t)),xm(function(){!(O&6)&&Tt()}),n=null;else{switch(Jo(s)){case 1:n=pa;break;case 4:n=Go;break;case 16:n=Ks;break;case 536870912:n=Wo;break;default:n=Ks}n=yu(n,uu.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uu(t,e){if(Vs=-1,Hs=0,O&6)throw Error(T(327));var n=t.callbackNode;if(hn()&&t.callbackNode!==n)return null;var s=Xs(t,t===ae?oe:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=pr(t,s);else{e=s;var r=O;O|=2;var a=mu();(ae!==t||oe!==e)&&(et=null,jn=ee()+500,Lt(t,e));do try{Hm();break}catch(o){du(t,o)}while(1);Ma(),dr.current=a,O=r,te!==null?e=0:(ae=null,oe=0,e=se)}if(e!==0){if(e===2&&(r=Si(t),r!==0&&(s=r,e=Zi(t,r))),e===1)throw n=us,Lt(t,0),pt(t,s),Se(t,ee()),n;if(e===6)pt(t,s);else{if(r=t.current.alternate,!(s&30)&&!Um(r)&&(e=pr(t,s),e===2&&(a=Si(t),a!==0&&(s=a,e=Zi(t,a))),e===1))throw n=us,Lt(t,0),pt(t,s),Se(t,ee()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(T(345));case 2:_t(t,xe,et);break;case 3:if(pt(t,s),(s&130023424)===s&&(e=Ua+500-ee(),10<e)){if(Xs(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){ge(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=_i(_t.bind(null,t,xe,et),e);break}_t(t,xe,et);break;case 4:if(pt(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var l=31-Ve(s);a=1<<l,l=e[l],l>r&&(r=l),s&=~a}if(s=r,s=ee()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Bm(s/1960))-s,10<s){t.timeoutHandle=_i(_t.bind(null,t,xe,et),s);break}_t(t,xe,et);break;case 5:_t(t,xe,et);break;default:throw Error(T(329))}}}return Se(t,ee()),t.callbackNode===n?uu.bind(null,t):null}function Zi(t,e){var n=Wn;return t.current.memoizedState.isDehydrated&&(Lt(t,e).flags|=256),t=pr(t,e),t!==2&&(e=xe,xe=n,e!==null&&qi(e)),t}function qi(t){xe===null?xe=t:xe.push.apply(xe,t)}function Um(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!Ge(a(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pt(t,e){for(e&=~Ba,e&=~Mr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ve(e),s=1<<n;t[n]=-1,e&=~s}}function to(t){if(O&6)throw Error(T(327));hn();var e=Xs(t,0);if(!(e&1))return Se(t,ee()),null;var n=pr(t,e);if(t.tag!==0&&n===2){var s=Si(t);s!==0&&(e=s,n=Zi(t,s))}if(n===1)throw n=us,Lt(t,0),pt(t,e),Se(t,ee()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_t(t,xe,et),Se(t,ee()),null}function Va(t,e){var n=O;O|=1;try{return t(e)}finally{O=n,O===0&&(jn=ee()+500,kr&&Tt())}}function Ut(t){yt!==null&&yt.tag===0&&!(O&6)&&hn();var e=O;O|=1;var n=Le.transition,s=V;try{if(Le.transition=null,V=1,t)return t()}finally{V=s,Le.transition=n,O=e,!(O&6)&&Tt()}}function Ha(){Me=ln.current,Q(ln)}function Lt(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vm(n)),te!==null)for(n=te.return;n!==null;){var s=n;switch(Sa(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tr();break;case 3:xn(),Q(we),Q(he),Aa();break;case 5:_a(s);break;case 4:xn();break;case 13:Q(K);break;case 19:Q(K);break;case 10:Da(s.type._context);break;case 22:case 23:Ha()}n=n.return}if(ae=t,te=t=Et(t.current,null),oe=Me=e,se=0,us=null,Ba=Mr=Bt=0,xe=Wn=null,It!==null){for(e=0;e<It.length;e++)if(n=It[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,a=n.pending;if(a!==null){var l=a.next;a.next=r,s.next=l}n.pending=s}It=null}return t}function du(t,e){do{var n=te;try{if(Ma(),Os.current=ur,cr){for(var s=X.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}cr=!1}if(Ot=0,ie=ne=X=null,Hn=!1,ls=0,Oa.current=null,n===null||n.return===null){se=1,us=e,te=null;break}e:{var a=t,l=n.return,o=n,c=e;if(e=oe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=o,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var k=Ul(l);if(k!==null){k.flags&=-257,Vl(k,l,o,a,e),k.mode&1&&Bl(a,u,e),e=k,c=u;var C=e.updateQueue;if(C===null){var v=new Set;v.add(c),e.updateQueue=v}else C.add(c);break e}else{if(!(e&1)){Bl(a,u,e),Ga();break e}c=Error(T(426))}}else if(J&&o.mode&1){var _=Ul(l);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Vl(_,l,o,a,e),Ea(Nn(c,o));break e}}a=c=Nn(c,o),se!==4&&(se=2),Wn===null?Wn=[a]:Wn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var h=Jc(a,c,e);Rl(a,h);break e;case 1:o=c;var m=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(kt===null||!kt.has(p)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=Kc(a,o,e);Rl(a,N);break e}}a=a.return}while(a!==null)}pu(n)}catch(E){e=E,te===n&&n!==null&&(te=n=n.return);continue}break}while(1)}function mu(){var t=dr.current;return dr.current=ur,t===null?ur:t}function Ga(){(se===0||se===3||se===2)&&(se=4),ae===null||!(Bt&268435455)&&!(Mr&268435455)||pt(ae,oe)}function pr(t,e){var n=O;O|=2;var s=mu();(ae!==t||oe!==e)&&(et=null,Lt(t,e));do try{Vm();break}catch(r){du(t,r)}while(1);if(Ma(),O=n,dr.current=s,te!==null)throw Error(T(261));return ae=null,oe=0,se}function Vm(){for(;te!==null;)hu(te)}function Hm(){for(;te!==null&&!fd();)hu(te)}function hu(t){var e=gu(t.alternate,t,Me);t.memoizedProps=t.pendingProps,e===null?pu(t):te=e,Oa.current=null}function pu(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zm(n,e),n!==null){n.flags&=32767,te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{se=6,te=null;return}}else if(n=Lm(n,e,Me),n!==null){te=n;return}if(e=e.sibling,e!==null){te=e;return}te=e=t}while(e!==null);se===0&&(se=5)}function _t(t,e,n){var s=V,r=Le.transition;try{Le.transition=null,V=1,Gm(t,e,n,s)}finally{Le.transition=r,V=s}return null}function Gm(t,e,n,s){do hn();while(yt!==null);if(O&6)throw Error(T(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Ed(t,a),t===ae&&(te=ae=null,oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,yu(Ks,function(){return hn(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Le.transition,Le.transition=null;var l=V;V=1;var o=O;O|=4,Oa.current=null,Fm(t,n),ou(n,t),dm(Ti),Ys=!!Pi,Ti=Pi=null,t.current=n,Om(n),gd(),O=o,V=l,Le.transition=a}else t.current=n;if(bs&&(bs=!1,yt=t,hr=r),a=t.pendingLanes,a===0&&(kt=null),xd(n.stateNode),Se(t,ee()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(mr)throw mr=!1,t=Xi,Xi=null,t;return hr&1&&t.tag!==0&&hn(),a=t.pendingLanes,a&1?t===Yi?Qn++:(Qn=0,Yi=t):Qn=0,Tt(),null}function hn(){if(yt!==null){var t=Jo(hr),e=Le.transition,n=V;try{if(Le.transition=null,V=16>t?16:t,yt===null)var s=!1;else{if(t=yt,yt=null,hr=0,O&6)throw Error(T(331));var r=O;for(O|=4,R=t.current;R!==null;){var a=R,l=a.child;if(R.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(R=u;R!==null;){var f=R;switch(f.tag){case 0:case 11:case 15:Gn(8,f,a)}var g=f.child;if(g!==null)g.return=f,R=g;else for(;R!==null;){f=R;var y=f.sibling,k=f.return;if(iu(f),f===u){R=null;break}if(y!==null){y.return=k,R=y;break}R=k}}}var C=a.alternate;if(C!==null){var v=C.child;if(v!==null){C.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}R=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,R=l;else e:for(;R!==null;){if(a=R,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gn(9,a,a.return)}var h=a.sibling;if(h!==null){h.return=a.return,R=h;break e}R=a.return}}var m=t.current;for(R=m;R!==null;){l=R;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,R=p;else e:for(l=m;R!==null;){if(o=R,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Cr(9,o)}}catch(E){q(o,o.return,E)}if(o===l){R=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,R=N;break e}R=o.return}}if(O=r,Tt(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(vr,t)}catch{}s=!0}return s}finally{V=n,Le.transition=e}}return!1}function no(t,e,n){e=Nn(n,e),e=Jc(t,e,1),t=wt(t,e,1),e=ge(),t!==null&&(ms(t,1,e),Se(t,e))}function q(t,e,n){if(t.tag===3)no(t,t,n);else for(;e!==null;){if(e.tag===3){no(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(kt===null||!kt.has(s))){t=Nn(n,t),t=Kc(e,t,1),e=wt(e,t,1),t=ge(),e!==null&&(ms(e,1,t),Se(e,t));break}}e=e.return}}function Wm(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=ge(),t.pingedLanes|=t.suspendedLanes&n,ae===t&&(oe&n)===n&&(se===4||se===3&&(oe&130023424)===oe&&500>ee()-Ua?Lt(t,0):Ba|=n),Se(t,e)}function fu(t,e){e===0&&(t.mode&1?(e=js,js<<=1,!(js&130023424)&&(js=4194304)):e=1);var n=ge();t=lt(t,e),t!==null&&(ms(t,e,n),Se(t,n))}function Qm(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fu(t,n)}function Jm(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(T(314))}s!==null&&s.delete(e),fu(t,n)}var gu;gu=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||we.current)je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return je=!1,Rm(t,e,n);je=!!(t.flags&131072)}else je=!1,J&&e.flags&1048576&&Nc(e,rr,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Us(t,e),t=e.pendingProps;var r=gn(e,he.current);mn(e,n),r=Ra(null,e,s,t,r,n);var a=La();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ke(s)?(a=!0,nr(e)):a=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ta(e),r.updater=Er,e.stateNode=r,r._reactInternals=e,Fi(e,s,t,n),e=Ui(null,e,s,!0,a,n)):(e.tag=0,J&&a&&ka(e),fe(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Us(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=Xm(s),t=Oe(s,t),r){case 0:e=Bi(null,e,s,t,n);break e;case 1:e=Wl(null,e,s,t,n);break e;case 11:e=Hl(null,e,s,t,n);break e;case 14:e=Gl(null,e,s,Oe(s.type,t),n);break e}throw Error(T(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oe(s,r),Bi(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oe(s,r),Wl(t,e,s,r,n);case 3:e:{if(qc(e),t===null)throw Error(T(387));s=e.pendingProps,a=e.memoizedState,r=a.element,Cc(t,e),lr(e,s,null,n);var l=e.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){r=Nn(Error(T(423)),e),e=Ql(t,e,s,n,r);break e}else if(s!==r){r=Nn(Error(T(424)),e),e=Ql(t,e,s,n,r);break e}else for(De=jt(e.stateNode.containerInfo.firstChild),Pe=e,J=!0,Ue=null,n=Sc(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yn(),s===r){e=ot(t,e,n);break e}fe(t,e,s,n)}e=e.child}return e;case 5:return Mc(e),t===null&&Li(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,l=r.children,bi(s,r)?l=null:a!==null&&bi(s,a)&&(e.flags|=32),Zc(t,e),fe(t,e,l,n),e.child;case 6:return t===null&&Li(e),null;case 13:return eu(t,e,n);case 4:return ba(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=vn(e,null,s,n):fe(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oe(s,r),Hl(t,e,s,r,n);case 7:return fe(t,e,e.pendingProps,n),e.child;case 8:return fe(t,e,e.pendingProps.children,n),e.child;case 12:return fe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,a=e.memoizedProps,l=r.value,G(ir,s._currentValue),s._currentValue=l,a!==null)if(Ge(a.value,l)){if(a.children===r.children&&!we.current){e=ot(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=rt(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),zi(a.return,n,e),o.lanes|=n;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(T(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),zi(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}fe(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,mn(e,n),r=ze(r),s=s(r),e.flags|=1,fe(t,e,s,n),e.child;case 14:return s=e.type,r=Oe(s,e.pendingProps),r=Oe(s.type,r),Gl(t,e,s,r,n);case 15:return Xc(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Oe(s,r),Us(t,e),e.tag=1,ke(s)?(t=!0,nr(e)):t=!1,mn(e,n),Qc(e,s,r),Fi(e,s,r,n),Ui(null,e,s,!0,t,n);case 19:return tu(t,e,n);case 22:return Yc(t,e,n)}throw Error(T(156,e.tag))};function yu(t,e){return Ho(t,e)}function Km(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Re(t,e,n,s){return new Km(t,e,n,s)}function Wa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xm(t){if(typeof t=="function")return Wa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===da)return 11;if(t===ma)return 14}return 2}function Et(t,e){var n=t.alternate;return n===null?(n=Re(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gs(t,e,n,s,r,a){var l=2;if(s=t,typeof t=="function")Wa(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Xt:return zt(n.children,r,a,e);case ua:l=8,r|=8;break;case ci:return t=Re(12,n,e,r|2),t.elementType=ci,t.lanes=a,t;case ui:return t=Re(13,n,e,r),t.elementType=ui,t.lanes=a,t;case di:return t=Re(19,n,e,r),t.elementType=di,t.lanes=a,t;case Mo:return Dr(n,r,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eo:l=10;break e;case Co:l=9;break e;case da:l=11;break e;case ma:l=14;break e;case dt:l=16,s=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=Re(l,n,e,r),e.elementType=t,e.type=s,e.lanes=a,e}function zt(t,e,n,s){return t=Re(7,t,s,e),t.lanes=n,t}function Dr(t,e,n,s){return t=Re(22,t,s,e),t.elementType=Mo,t.lanes=n,t.stateNode={isHidden:!1},t}function si(t,e,n){return t=Re(6,t,null,e),t.lanes=n,t}function ri(t,e,n){return e=Re(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ym(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qa(t,e,n,s,r,a,l,o,c){return t=new Ym(t,e,n,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Re(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(a),t}function Zm(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kt,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function vu(t){if(!t)return Mt;t=t._reactInternals;e:{if(Ht(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(ke(n))return vc(t,n,e)}return e}function xu(t,e,n,s,r,a,l,o,c){return t=Qa(n,s,!0,t,r,a,l,o,c),t.context=vu(null),n=t.current,s=ge(),r=St(n),a=rt(s,r),a.callback=e??null,wt(n,a,r),t.current.lanes=r,ms(t,r,s),Se(t,s),t}function Pr(t,e,n,s){var r=e.current,a=ge(),l=St(r);return n=vu(n),e.context===null?e.context=n:e.pendingContext=n,e=rt(a,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=wt(r,e,l),t!==null&&(He(t,r,l,a),Fs(t,r,l)),l}function fr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function so(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ja(t,e){so(t,e),(t=t.alternate)&&so(t,e)}function qm(){return null}var Nu=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ka(t){this._internalRoot=t}Tr.prototype.render=Ka.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Pr(t,e,null,null)};Tr.prototype.unmount=Ka.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ut(function(){Pr(null,t,null,null)}),e[at]=null}};function Tr(t){this._internalRoot=t}Tr.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yo();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ht.length&&e!==0&&e<ht[n].priority;n++);ht.splice(n,0,t),n===0&&qo(t)}};function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function br(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ro(){}function eh(t,e,n,s,r){if(r){if(typeof s=="function"){var a=s;s=function(){var u=fr(l);a.call(u)}}var l=xu(e,s,t,0,null,!1,!1,"",ro);return t._reactRootContainer=l,t[at]=l.current,ns(t.nodeType===8?t.parentNode:t),Ut(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var o=s;s=function(){var u=fr(c);o.call(u)}}var c=Qa(t,0,!1,null,null,!1,!1,"",ro);return t._reactRootContainer=c,t[at]=c.current,ns(t.nodeType===8?t.parentNode:t),Ut(function(){Pr(e,c,n,s)}),c}function _r(t,e,n,s,r){var a=n._reactRootContainer;if(a){var l=a;if(typeof r=="function"){var o=r;r=function(){var c=fr(l);o.call(c)}}Pr(e,l,t,r)}else l=eh(n,e,t,r,s);return fr(l)}Ko=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ln(e.pendingLanes);n!==0&&(fa(e,n|1),Se(e,ee()),!(O&6)&&(jn=ee()+500,Tt()))}break;case 13:Ut(function(){var s=lt(t,1);if(s!==null){var r=ge();He(s,t,1,r)}}),Ja(t,1)}};ga=function(t){if(t.tag===13){var e=lt(t,134217728);if(e!==null){var n=ge();He(e,t,134217728,n)}Ja(t,134217728)}};Xo=function(t){if(t.tag===13){var e=St(t),n=lt(t,e);if(n!==null){var s=ge();He(n,t,e,s)}Ja(t,e)}};Yo=function(){return V};Zo=function(t,e){var n=V;try{return V=t,e()}finally{V=n}};ji=function(t,e,n){switch(e){case"input":if(pi(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=wr(s);if(!r)throw Error(T(90));Po(s),pi(s,r)}}}break;case"textarea":bo(t,n);break;case"select":e=n.value,e!=null&&on(t,!!n.multiple,e,!1)}};$o=Va;Fo=Ut;var th={usingClientEntryPoint:!1,Events:[ps,en,wr,Lo,zo,Va]},An={findFiberByHostInstance:At,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nh={bundleType:An.bundleType,version:An.version,rendererPackageName:An.rendererPackageName,rendererConfig:An.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Uo(t),t===null?null:t.stateNode},findFiberByHostInstance:An.findFiberByHostInstance||qm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_s.isDisabled&&_s.supportsFiber)try{vr=_s.inject(nh),Ye=_s}catch{}}be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th;be.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xa(e))throw Error(T(200));return Zm(t,e,null,n)};be.createRoot=function(t,e){if(!Xa(t))throw Error(T(299));var n=!1,s="",r=Nu;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Qa(t,1,!1,null,null,n,!1,s,r),t[at]=e.current,ns(t.nodeType===8?t.parentNode:t),new Ka(e)};be.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Uo(e),t=t===null?null:t.stateNode,t};be.flushSync=function(t){return Ut(t)};be.hydrate=function(t,e,n){if(!br(e))throw Error(T(200));return _r(null,t,e,!0,n)};be.hydrateRoot=function(t,e,n){if(!Xa(t))throw Error(T(405));var s=n!=null&&n.hydratedSources||null,r=!1,a="",l=Nu;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=xu(e,null,t,1,n??null,r,!1,a,l),t[at]=e.current,ns(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Tr(e)};be.render=function(t,e,n){if(!br(e))throw Error(T(200));return _r(null,t,e,!1,n)};be.unmountComponentAtNode=function(t){if(!br(t))throw Error(T(40));return t._reactRootContainer?(Ut(function(){_r(null,null,t,!1,function(){t._reactRootContainer=null,t[at]=null})}),!0):!1};be.unstable_batchedUpdates=Va;be.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!br(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return _r(t,e,n,!1,s)};be.version="18.3.1-next-f1338f8080-20240426";function ju(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ju)}catch(t){console.error(t)}}ju(),jo.exports=be;var sh=jo.exports,io=sh;li.createRoot=io.createRoot,li.hydrateRoot=io.hydrateRoot;const ao=({onNavigate:t})=>{const[e,n]=S.useState(new Date),[s]=S.useState("道友"),[r]=S.useState(!0),[a]=S.useState(98),[l,o]=S.useState(!1),[c,u]=S.useState(!1),[f,g]=S.useState(0),[y,k]=S.useState(!1),[C,v]=S.useState({x:0,y:0}),[_,h]=S.useState({x:0,y:0}),m=S.useRef(null),p=[{id:"guanyin",name:"观音菩萨",title:"大慈大悲救苦救难",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%8D%83%E6%89%8B%E8%A7%82%E9%9F%B3.jpg",fallbackEmoji:"🧘‍♀️",specialty:"慈悲智慧 • 情感疗愈",todayMessage:"今日水逆散去，您的慈悲心将为您带来意外的贵人相助",fortuneType:"excellent",fortuneScore:89,guidance:["保持善念，助人为乐","适合处理人际关系","晚间诵经效果佳"]},{id:"budongzun",name:"不动尊菩萨",title:"降魔护法明王",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E4%B8%8D%E5%8A%A8%E5%B0%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"⚔️",specialty:"破除障碍 • 坚定意志",todayMessage:"今日宜坚定决心，排除万难，您的毅力将战胜一切挑战",fortuneType:"good",fortuneScore:85,guidance:["面对困难不退缩","适合做重要决定","练习专注冥想"]},{id:"dashizhi",name:"大势至菩萨",title:"智慧光明遍照",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%A4%A7%E5%8A%BF%E8%87%B3%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"💡",specialty:"智慧开启 • 学业事业",todayMessage:"智慧之光照耀前程，今日学习工作将有重大突破",fortuneType:"excellent",fortuneScore:92,guidance:["专注学习新知识","适合规划未来","多与智者交流"]},{id:"dairiruiai",name:"大日如来",title:"法界体性智",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%A4%A7%E6%97%A5%E5%A6%82%E6%9D%A5.jpg",fallbackEmoji:"☀️",specialty:"光明普照 • 消除业障",todayMessage:"法界光明遍照十方，今日是消除业障的绝佳时机",fortuneType:"good",fortuneScore:88,guidance:["早起修行效果佳","适合忏悔净化","沐浴阳光冥想"]},{id:"wenshu",name:"文殊菩萨",title:"大智文殊师利",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E6%96%87%E6%AE%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"📚",specialty:"智慧第一 • 学问精进",todayMessage:"智慧剑斩断无明，今日思维清晰，适合深度思考",fortuneType:"excellent",fortuneScore:94,guidance:["阅读经典著作","思考人生哲理","分享智慧给他人"]},{id:"xukong",name:"虚空藏菩萨",title:"福智如虚空",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E8%99%9A%E7%A9%BA%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"🌌",specialty:"财富智慧 • 心愿成就",todayMessage:"虚空藏纳万物，今日心愿易成，财运亨通",fortuneType:"good",fortuneScore:86,guidance:["许下美好心愿","适合投资理财","感恩现有福报"]},{id:"amitabha",name:"阿弥陀佛",title:"无量光无量寿",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E9%98%BF%E5%BC%A5%E9%99%80%E4%BD%9B.jpg",fallbackEmoji:"🙏",specialty:"净土往生 • 慈悲接引",todayMessage:"无量光明照耀众生，今日宜念佛修行，心得安宁",fortuneType:"excellent",fortuneScore:91,guidance:["念佛修心","放下执着","慈悲对待万物"]}],N=p[f];S.useEffect(()=>{const D=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(D)},[]),S.useEffect(()=>{const D=new Image;D.src=N.imageUrl,D.onload=()=>o(!0),D.onerror=()=>u(!0)},[N.imageUrl]),S.useEffect(()=>{const D=setInterval(()=>{g(B=>(B+1)%p.length),o(!1)},3e4);return()=>clearInterval(D)},[p.length]);const E=()=>{const D=e.getHours();return D<6?"夜深了，菩萨与您同在":D<12?`早安，${s} 🌅`:D<18?`午安，${s} ☀️`:`晚安，${s} 🌙`},P=()=>e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=D=>({excellent:"var(--color-excellent)",good:"var(--color-good)",normal:"var(--color-normal)",challenging:"var(--color-challenging)"})[D],x=D=>({excellent:"大吉",good:"吉",normal:"平",challenging:"需谨慎"})[D],j=D=>{"vibrate"in navigator&&navigator.vibrate(50),g(D==="next"?B=>(B+1)%p.length:B=>(B-1+p.length)%p.length),o(!1)},M=D=>{v({x:D.touches[0].clientX,y:D.touches[0].clientY})},z=D=>{h({x:D.touches[0].clientX,y:D.touches[0].clientY})},pe=()=>{if(!C.x||!_.x)return;const D=C.x-_.x,B=Math.abs(C.y-_.y);Math.abs(D)>50&&B<100&&(D>0?j("next"):j("prev")),v({x:0,y:0}),h({x:0,y:0})},re=(D=50)=>{"vibrate"in navigator&&navigator.vibrate(D)},Ee=()=>{re([50,50,50]),t("chat")},w=D=>{re(30),console.log(D)};return i.jsxs("div",{className:"home-optimized",children:[i.jsx("div",{className:"hero-section",children:i.jsxs("div",{className:"time-greeting",children:[i.jsx("div",{className:"greeting-text",children:E()}),i.jsx("div",{className:"current-time",children:P()})]})}),i.jsx("div",{className:"deity-conversation-card priority-hero",ref:m,onTouchStart:M,onTouchMove:z,onTouchEnd:pe,children:i.jsxs("div",{className:"conversation-header",children:[i.jsxs("div",{className:"deity-avatar",children:[i.jsxs("div",{className:"avatar-container",children:[c?i.jsx("div",{className:"guanyin-fallback",children:N.fallbackEmoji}):i.jsx("img",{src:N.imageUrl,alt:N.name,className:`guanyin-avatar ${l?"loaded":"loading"} deity-${N.id}`,loading:"lazy",onLoad:()=>o(!0),onError:()=>u(!0)}),i.jsx("div",{className:"online-indicator animate-pulse"})]}),i.jsxs("div",{className:"deity-switch-controls",children:[i.jsx("button",{className:"deity-switch-btn prev",onClick:()=>j("prev"),onTouchStart:D=>D.stopPropagation(),title:"上一位神仙","aria-label":"切换到上一位神仙",children:"◀"}),i.jsx("button",{className:"deity-switch-btn next",onClick:()=>j("next"),onTouchStart:D=>D.stopPropagation(),title:"下一位神仙","aria-label":"切换到下一位神仙",children:"▶"})]})]}),i.jsxs("div",{className:"conversation-content",children:[i.jsxs("div",{className:"deity-info-header",children:[i.jsx("h2",{className:"deity-name",children:N.name}),i.jsx("div",{className:"deity-title",children:N.title}),i.jsx("div",{className:"deity-specialty",children:N.specialty})]}),i.jsxs("div",{className:"today-fortune-card",children:[i.jsxs("div",{className:"fortune-header",children:[i.jsx("span",{className:"fortune-label",children:"今日运势"}),i.jsxs("div",{className:"fortune-score-container",children:[i.jsx("span",{className:"fortune-badge",style:{backgroundColor:d(N.fortuneType)},children:x(N.fortuneType)}),i.jsxs("span",{className:"fortune-score",children:[N.fortuneScore,"分"]})]})]}),i.jsxs("div",{className:"fortune-message",children:['"',N.todayMessage,'"']}),i.jsxs("div",{className:`fortune-details ${y?"expanded":""}`,children:[i.jsxs("button",{className:"details-toggle",onClick:()=>{re(30),k(!y)},"aria-expanded":y,"aria-label":y?"收起运势详情":"展开运势详情",children:[i.jsx("span",{children:"详细运势"}),i.jsx("span",{className:`toggle-icon ${y?"rotated":""}`,children:"▼"})]}),y&&i.jsxs("div",{className:"fortune-breakdown-list",children:[i.jsxs("div",{className:"fortune-category-item",children:[i.jsxs("div",{className:"category-header",children:[i.jsx("span",{className:"category-icon",children:"💼"}),i.jsx("span",{className:"category-name",children:"事业运"}),i.jsx("div",{className:"category-score good",children:"85"})]}),i.jsx("div",{className:"category-desc",children:"工作顺利，有贵人相助"})]}),i.jsxs("div",{className:"fortune-category-item",children:[i.jsxs("div",{className:"category-header",children:[i.jsx("span",{className:"category-icon",children:"💕"}),i.jsx("span",{className:"category-name",children:"感情运"}),i.jsx("div",{className:"category-score excellent",children:"92"})]}),i.jsx("div",{className:"category-desc",children:"感情和谐，适合表达心意"})]}),i.jsxs("div",{className:"fortune-category-item",children:[i.jsxs("div",{className:"category-header",children:[i.jsx("span",{className:"category-icon",children:"💰"}),i.jsx("span",{className:"category-name",children:"财运"}),i.jsx("div",{className:"category-score average",children:"78"})]}),i.jsx("div",{className:"category-desc",children:"理财需谨慎，小有收获"})]}),i.jsxs("div",{className:"fortune-category-item",children:[i.jsxs("div",{className:"category-header",children:[i.jsx("span",{className:"category-icon",children:"🏥"}),i.jsx("span",{className:"category-name",children:"健康运"}),i.jsx("div",{className:"category-score good",children:"88"})]}),i.jsx("div",{className:"category-desc",children:"身体状态良好，注意休息"})]}),i.jsxs("div",{className:"today-guidance",children:[i.jsx("h4",{className:"guidance-title",children:"💫 今日指引"}),i.jsx("div",{className:"guidance-list",role:"list",children:N.guidance.map((D,B)=>i.jsxs("div",{className:"guidance-item",role:"listitem",children:[i.jsx("span",{className:"guidance-bullet",children:"•"}),i.jsx("span",{className:"guidance-text",children:D})]},B))})]})]})]})]}),i.jsxs("div",{className:"message-meta",children:[i.jsx("span",{className:"message-time",children:"2分钟前"}),i.jsxs("span",{className:"deity-indicator",children:[f+1,"/",p.length]})]})]}),i.jsxs("div",{className:"chat-action-area",children:[i.jsx("button",{className:"primary-chat-btn mobile-haptic-feedback",onClick:Ee,"aria-label":"开始与神仙深度对话",children:"💬 开始深度对话"}),i.jsxs("div",{className:"quick-fortune-actions",role:"group","aria-label":"快速功能操作",children:[i.jsx("button",{className:"quick-action-small",onClick:()=>w("求签"),"aria-label":"快速求签",children:"🎯 求签"}),i.jsx("button",{className:"quick-action-small",onClick:()=>w("今日宜忌"),"aria-label":"查看今日宜忌",children:"📅 宜忌"}),i.jsx("button",{className:"quick-action-small",onClick:()=>w("分享运势"),"aria-label":"分享今日运势",children:"🔗 分享"}),i.jsx("button",{className:"quick-action-small",onClick:()=>t("deepseek-demo"),"aria-label":"测试DeepSeek API",style:{backgroundColor:"rgba(34, 197, 94, 0.2)"},children:"🤖 AI测试"})]})]})]})}),i.jsxs("div",{className:`bracelet-status priority-high ${r?"connected":"disconnected"}`,children:[i.jsxs("div",{className:"status-indicator",children:[i.jsx("span",{className:"status-icon",role:"img","aria-label":"沉香手串",children:"📿"}),i.jsxs("div",{className:"status-text",children:[i.jsx("div",{className:"connection-text",children:r?"沉香手串已连接":"手串未连接"}),i.jsxs("div",{className:"energy-text",children:["开光能量：",a,"%"]})]})]}),i.jsx("div",{className:"energy-bar",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,children:i.jsx("div",{className:"energy-fill",style:{width:`${a}%`}})})]}),i.jsx("div",{className:"mobile-gesture-hint",style:{position:"fixed",bottom:"120px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"12px",opacity:"0",pointerEvents:"none",transition:"opacity 0.3s ease",zIndex:"1000"},children:"👆 左右滑动切换神仙朋友"})]})},ft={guanyin:{id:"guanyin",name:"观音菩萨",systemPrompt:`你是观音菩萨，大慈大悲救苦救难的菩萨。你的特点：
    - 慈悲为怀，善于倾听和安慰
    - 语言温和慈祥，充满母性关怀
    - 擅长情感疗愈和人际关系指导
    - 会引用佛经智慧，但用通俗易懂的方式表达
    - 关注众生痛苦，给予实用的生活建议
    
    回答时要：
    - 用"阿弥陀佛"等佛教用语
    - 体现慈悲智慧
    - 给予温暖的鼓励
    - 提供具体可行的建议
    - 保持50-150字的简洁回复`,style:"compassionate",specialties:["情感疗愈","人际关系","内心平静","慈悲修行"]},budongzun:{id:"budongzun",name:"不动尊菩萨",systemPrompt:`你是不动尊菩萨，降魔护法的明王。你的特点：
    - 意志坚定，破除一切障碍
    - 语言有力量感，给人勇气和决心
    - 擅长帮助人克服困难和恐惧
    - 直言不讳，但充满正能量
    - 专注于行动力和执行力的提升
    
    回答时要：
    - 语气坚定有力
    - 鼓励果断行动
    - 破除心理障碍
    - 提供克服困难的方法
    - 保持50-150字的简洁回复`,style:"determined",specialties:["克服困难","意志力","突破障碍","勇气培养"]},dashizhi:{id:"dashizhi",name:"大势至菩萨",systemPrompt:`你是大势至菩萨，智慧光明遍照的菩萨。你的特点：
    - 智慧超群，善于分析和思考
    - 语言逻辑清晰，富有哲理
    - 擅长学业、事业和人生规划指导
    - 能够化繁为简，点破迷津
    - 注重理性思考和智慧决策
    
    回答时要：
    - 体现深度思考
    - 提供智慧洞察
    - 给出清晰的思路
    - 帮助开发智慧潜能
    - 保持50-150字的简洁回复`,style:"wise",specialties:["智慧开启","学业事业","人生规划","理性决策"]},dairiruiai:{id:"dairiruiai",name:"大日如来",systemPrompt:`你是大日如来，法界体性智，光明普照的佛陀。你的特点：
    - 光明智慧，照破无明
    - 语言充满光明正能量
    - 擅长消除业障和负面情绪
    - 善于净化心灵，提升修为
    - 注重精神层面的提升和开悟
    
    回答时要：
    - 充满光明正能量
    - 帮助净化心灵
    - 消除负面情绪
    - 提升精神境界
    - 保持50-150字的简洁回复`,style:"illuminating",specialties:["光明智慧","消除业障","心灵净化","精神提升"]},wenshu:{id:"wenshu",name:"文殊菩萨",systemPrompt:`你是文殊菩萨，大智文殊师利，智慧第一的菩萨。你的特点：
    - 智慧如海，博学多才
    - 语言富有文采和哲理
    - 擅长学问、文化和思维训练
    - 善于启发智慧，开发潜能
    - 注重知识学习和智慧修行的结合
    
    回答时要：
    - 展现渊博学识
    - 启发智慧思考
    - 提供学习方法
    - 开发思维潜能
    - 保持50-150字的简洁回复`,style:"scholarly",specialties:["智慧修行","学问精进","思维开发","文化修养"]},xukong:{id:"xukong",name:"虚空藏菩萨",systemPrompt:`你是虚空藏菩萨，福智如虚空，能满众愿的菩萨。你的特点：
    - 包容如虚空，智慧无边
    - 语言神秘而富有深意
    - 擅长财富智慧和心愿成就
    - 善于帮助实现合理愿望
    - 注重福德和智慧的双重修行
    
    回答时要：
    - 体现包容智慧
    - 帮助实现心愿
    - 提供财富智慧
    - 指导福德修行
    - 保持50-150字的简洁回复`,style:"mystical",specialties:["财富智慧","心愿成就","福德修行","包容智慧"]},amitabha:{id:"amitabha",name:"阿弥陀佛",systemPrompt:`你是阿弥陀佛，无量光无量寿佛。你的特点：
    - 慈悲无量，接引众生
    - 语言充满慈悲和安详
    - 擅长心灵安慰和精神指导
    - 善于帮助放下执着，获得内心平静
    - 注重净土修行和慈悲实践
    
    回答时要：
    - 体现无量慈悲
    - 给予心灵安慰
    - 帮助放下执着
    - 指导修心养性
    - 保持50-150字的简洁回复`,style:"serene",specialties:["慈悲修行","内心平静","放下执着","心灵安慰"]}};class rh{constructor(e){Z(this,"apiKey");Z(this,"baseURL","https://api.deepseek.com/v1");this.apiKey=e}async chatWithDeity(e,n,s=[]){try{const r=ft[e];if(!r)throw new Error(`未找到神仙ID: ${e}`);const a=[{role:"system",content:r.systemPrompt},...s,{role:"user",content:n}],l=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"deepseek-chat",messages:a,max_tokens:200,temperature:.7,top_p:.9,stream:!1})});if(!l.ok)throw new Error(`API请求失败: ${l.status} ${l.statusText}`);const o=await l.json();if(!o.choices||o.choices.length===0)throw new Error("API返回数据格式错误");return o.choices[0].message.content.trim()}catch(r){return console.error("DeepSeek API调用失败:",r),this.getFallbackResponse(e,n)}}async getTodayFortune(e,n){try{const r=`请以${ft[e].name}的身份，为用户提供今日运势预测。包括：
      1. 运势等级（大吉/吉/平/需谨慎）
      2. 运势评分（1-100分）
      3. 今日关键信息（一句话）
      4. 具体指引建议（3条）
      
      请用JSON格式回复，格式如下：
      {
        "level": "大吉",
        "score": 89,
        "message": "今日运势信息",
        "guidance": ["建议1", "建议2", "建议3"]
      }`,l=(await this.chatWithDeity(e,r)).match(/\{[\s\S]*\}/);if(l){const o=JSON.parse(l[0]);return{fortuneType:this.mapFortuneLevel(o.level),score:o.score||75,message:o.message||"今日有贵人相助",guidance:o.guidance||["保持善念","多行善事","内心平静"]}}throw new Error("无法解析运势数据")}catch(s){return console.error("获取运势失败:",s),this.getDefaultFortune(e)}}mapFortuneLevel(e){return e.includes("大吉")?"excellent":e.includes("吉")?"good":e.includes("平")?"normal":"challenging"}getDefaultFortune(e){return{fortuneType:"good",score:75,message:`${ft[e].name}祝福您今日顺遂安康`,guidance:["保持善念","多行善事","内心平静"]}}getFallbackResponse(e,n){return{guanyin:"阿弥陀佛，善信莫要忧虑。观音在此，与你同在。请将心中困扰详细告知，贫僧定会为你指点迷津。",budongzun:"不动如山，勇往直前！任何困难都不能阻挡坚定的心志。告诉我你的困扰，我助你破除一切障碍！",dashizhi:"智慧如灯，照亮前路。每个问题都有解决之道，关键在于正确的思考方式。请详述你的疑问。",dairiruiai:"光明遍照，消除阴霾。内心的光明才是真正的力量。让我们一起净化心灵，寻找答案。",wenshu:"智慧如海，学无止境。问题是开启智慧的钥匙。请说出你的疑问，让我们共同探讨。",xukong:"虚空含万物，智慧无边际。心愿若符合善道，必能成就。请告诉我你的心愿。",amitabha:"南无阿弥陀佛，慈悲无量。一切烦恼皆为过眼云烟，内心平静才是真正的快乐。"}[e]||"神仙正在深度思考中，请稍后再试..."}}const ih=t=>{try{return{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[t]||""}catch{return""}},wu={deepseek:{apiKey:ih("VITE_DEEPSEEK_API_KEY"),baseURL:"https://api.deepseek.com/v1",model:"deepseek-chat",maxTokens:200,temperature:.7,topP:.9},features:{enableRealTimeChat:!0,enableFortuneGeneration:!0,enableOfflineMode:!1}},ah=()=>{const t=wu.deepseek.apiKey;return!!(t&&t.length>0&&t!=="your-deepseek-api-key")},lh=()=>wu,oh=`
请在项目根目录创建 .env.local 文件，并添加以下配置：

# DeepSeek API 配置
VITE_DEEPSEEK_API_KEY=your-deepseek-api-key-here

如何获取 DeepSeek API Key：
1. 访问 https://platform.deepseek.com/
2. 注册账号并登录
3. 在 API Keys 页面创建新的 API Key
4. 将 API Key 复制到 .env.local 文件中

注意：
- .env.local 文件不会被提交到 git
- API Key 需要保密，不要分享给他人
- 确保账户有足够的额度用于 API 调用
`,ku=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!1),[r,a]=S.useState(!1),[l,o]=S.useState(null),c=S.useRef(null),u=S.useRef({}),f=S.useRef(null),g=S.useCallback(()=>{const N=lh();return!c.current&&N.deepseek.apiKey&&(c.current=new rh(N.deepseek.apiKey)),c.current},[]),y=ah(),k=()=>`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,C=S.useCallback(N=>{const E={...N,id:k(),timestamp:Date.now()};return e(P=>[...P,E]),E},[]),v=S.useCallback((N,E)=>{e(P=>P.map(d=>d.id===N?{...d,...E}:d))},[]),_=S.useCallback(async(N,E)=>{if(!N.trim())return;o(null),f.current={content:N,deityId:E},C({role:"user",content:N.trim(),deityId:E});const P=C({role:"deity",content:"",deityId:E,isTyping:!0});s(!0),a(!0);try{const d=g();if(!d)throw new Error("API未配置，请检查DeepSeek API密钥");const x=u.current[E]||[],j=await d.chatWithDeity(E,N,x);u.current[E]=[...x,{role:"user",content:N},{role:"assistant",content:j}],await h(P.id,j)}catch(d){const x=d instanceof Error?d.message:"发送消息失败";o(x),v(P.id,{content:"抱歉，神仙暂时无法回应，请稍后再试...",isTyping:!1})}finally{s(!1),a(!1)}},[C,v,g]),h=S.useCallback(async(N,E)=>{const P=j=>new Promise(M=>setTimeout(M,j));let d="";const x=E.split("");for(let j=0;j<x.length;j++){d+=x[j],v(N,{content:d,isTyping:j<x.length-1});const M=x[j];let z=50;M==="。"||M==="！"||M==="？"?z=300:M==="，"||M==="、"?z=150:M===" "&&(z=100),await P(z)}v(N,{content:E,isTyping:!1})},[v]),m=S.useCallback(async()=>{if(!f.current)return;const{content:N,deityId:E}=f.current;await _(N,E)},[_]),p=S.useCallback(()=>{e([]),u.current={},o(null),f.current=null},[]);return{messages:t,isLoading:n,isTyping:r,error:l,sendMessage:_,clearHistory:p,retryLastMessage:m,isAPIConfigured:y}},ch=({onNavigate:t})=>{const[e,n]=S.useState(0),[s,r]=S.useState(!1),[a,l]=S.useState(!1),[o,c]=S.useState(!1),[u,f]=S.useState(!1),[g,y]=S.useState(""),[k,C]=S.useState("casual");S.useState(!1);const v=S.useRef(null),{messages:_,isLoading:h,isTyping:m,error:p,sendMessage:N,clearHistory:E,retryLastMessage:P,isAPIConfigured:d}=ku(),x=[{id:"guanyin",name:"观音菩萨",title:"大慈大悲救苦救难",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%8D%83%E6%89%8B%E8%A7%82%E9%9F%B3.jpg",fallbackEmoji:"🧘‍♀️",specialty:"慈悲智慧 • 情感疗愈",greetingMessage:"阿弥陀佛，善信有何心事需要倾诉？观音在此聆听。",mood:"慈悲",fortuneType:"excellent",fortuneScore:89,todayGuidance:["保持善念，助人为乐","适合处理人际关系","晚间诵经效果佳"]},{id:"budongzun",name:"不动尊菩萨",title:"降魔护法明王",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E4%B8%8D%E5%8A%A8%E5%B0%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"⚔️",specialty:"破除障碍 • 坚定意志",greetingMessage:"不动如山，勇往直前！有何困难需要破除？",mood:"坚定",fortuneType:"good",fortuneScore:85,todayGuidance:["面对困难不退缩","适合做重要决定","练习专注冥想"]},{id:"dashizhi",name:"大势至菩萨",title:"智慧光明遍照",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%A4%A7%E5%8A%BF%E8%87%B3%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"💡",specialty:"智慧开启 • 学业事业",greetingMessage:"智慧之光照耀前程，有何问题需要指点？",mood:"智慧",fortuneType:"excellent",fortuneScore:92,todayGuidance:["专注学习新知识","适合规划未来","多与智者交流"]},{id:"dairiruiai",name:"大日如来",title:"法界体性智",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%A4%A7%E6%97%A5%E5%A6%82%E6%9D%A5.jpg",fallbackEmoji:"☀️",specialty:"光明普照 • 消除业障",greetingMessage:"法界光明遍照十方，让我为你驱散心中阴霾。",mood:"光明",fortuneType:"good",fortuneScore:88,todayGuidance:["早起修行效果佳","适合忏悔净化","沐浴阳光冥想"]},{id:"wenshu",name:"文殊菩萨",title:"大智文殊师利",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E6%96%87%E6%AE%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"📚",specialty:"智慧第一 • 学问精进",greetingMessage:"智慧如海，学无止境。有何学问需要探讨？",mood:"博学",fortuneType:"excellent",fortuneScore:94,todayGuidance:["阅读经典著作","思考人生哲理","分享智慧给他人"]},{id:"xukong",name:"虚空藏菩萨",title:"福智如虚空",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E8%99%9A%E7%A9%BA%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"🌌",specialty:"财富智慧 • 心愿成就",greetingMessage:"虚空含万物，智慧无边际。有何心愿需要成就？",mood:"神秘",fortuneType:"good",fortuneScore:86,todayGuidance:["许下美好心愿","适合投资理财","感恩现有福报"]},{id:"amitabha",name:"阿弥陀佛",title:"无量光无量寿",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E9%98%BF%E5%BC%A5%E9%99%80%E4%BD%9B.jpg",fallbackEmoji:"🙏",specialty:"净土往生 • 慈悲接引",greetingMessage:"南无阿弥陀佛，慈悲无量。有何烦恼需要化解？",mood:"慈悲",fortuneType:"excellent",fortuneScore:91,todayGuidance:["念佛修心","放下执着","慈悲对待万物"]}],j=x[e],M=[{id:"greeting",role:"deity",content:j.greetingMessage,timestamp:Date.now()-6e4,deityId:j.id},..._];S.useEffect(()=>{const A=new Image;A.src=j.imageUrl,A.onload=()=>r(!0),A.onerror=()=>l(!0)},[j.imageUrl]),S.useEffect(()=>{E(),N(j.greetingMessage)},[e]);const z={casual:{name:"日常聊天",style:"轻松友好，像老朋友一样随意交流",examples:["今天心情不错","分享个好消息"]},guidance:{name:"人生指导",style:"深度智慧，提供人生方向建议",examples:["职业迷茫","人际关系困扰"]},divination:{name:"占卜问卦",style:"神秘庄重，预测运势走向",examples:["今日财运","感情发展"]},healing:{name:"心理疗愈",style:"温暖包容，抚慰心灵创伤",examples:["失恋痛苦","焦虑压力"]}},re=(()=>{const A=[{text:"我今天的运势如何？",mode:"divination"},{text:"给我一些人生建议",mode:"guidance"},{text:"最近心情有些低落",mode:"healing"},{text:"分享今天的好心情",mode:"casual"}],H={guanyin:[{text:"如何改善人际关系？",mode:"guidance"},{text:"心灵需要疗愈",mode:"healing"}],budongzun:[{text:"如何克服内心恐惧？",mode:"healing"},{text:"需要坚定的意志力",mode:"guidance"}],dashizhi:[{text:"事业发展方向迷茫",mode:"guidance"},{text:"想提升学习效率",mode:"guidance"}],dairiruiai:[{text:"如何净化负能量？",mode:"healing"},{text:"想要内心光明",mode:"guidance"}],wenshu:[{text:"学习遇到困难",mode:"guidance"},{text:"想要开启智慧",mode:"guidance"}],xukong:[{text:"财运如何提升？",mode:"divination"},{text:"心愿如何实现？",mode:"guidance"}],amitabha:[{text:"内心需要安宁",mode:"healing"},{text:"人生终极思考",mode:"guidance"}]};return[...A,...H[j.id]||[]]})(),Ee=[{icon:"🎯",title:"一对一占卜",description:"深度预测未来走向"},{icon:"📖",title:"解梦析运",description:"解析梦境中的玄机"},{icon:"🔮",title:"未来预测",description:"窥探命运的安排"},{icon:"🙏",title:"祈福加持",description:"为您送上神圣祝福"}];S.useEffect(()=>{w()},[M]);const w=()=>{var A;(A=v.current)==null||A.scrollIntoView({behavior:"smooth"})},D=A=>{n(A==="next"?H=>(H+1)%x.length:H=>(H-1+x.length)%x.length)},B=A=>({excellent:"var(--color-excellent)",good:"var(--color-good)",normal:"var(--color-normal)",challenging:"var(--color-challenging)"})[A],b=A=>({excellent:"大吉",good:"吉",normal:"平",challenging:"需谨慎"})[A],L=async A=>{const H=A||A.trim();H&&N(H)},I=A=>{C(A.mode),L(A.text)},U=A=>new Date(A).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"chat-page-container h-screen flex flex-col",children:[i.jsxs("div",{className:"chat-header-enhanced",children:[i.jsxs("div",{className:"deity-info-section",children:[i.jsxs("div",{className:"deity-avatar-area",children:[a?i.jsx("div",{className:"deity-fallback-avatar",children:j.fallbackEmoji}):i.jsx("img",{src:j.imageUrl,alt:j.name,className:`deity-chat-avatar ${s?"loaded":"loading"}`,onLoad:()=>r(!0),onError:()=>l(!0)}),i.jsx("div",{className:"deity-online-indicator animate-pulse"}),i.jsxs("div",{className:"deity-switch-controls",children:[i.jsx("button",{className:"deity-switch-btn prev",onClick:()=>D("prev"),title:"上一位神仙",children:"◀"}),i.jsx("button",{className:"deity-switch-btn next",onClick:()=>D("next"),title:"下一位神仙",children:"▶"})]})]}),i.jsxs("div",{className:"deity-details",children:[i.jsxs("div",{className:"deity-name-title",children:[i.jsx("h2",{className:"deity-name",children:j.name}),i.jsx("div",{className:"deity-title",children:j.title})]}),i.jsxs("div",{className:"deity-status",children:[i.jsx("span",{className:"status-dot"}),i.jsxs("span",{className:"mood-text",children:["心境: ",j.mood]}),i.jsxs("span",{className:"specialty-text",children:["专长: ",j.specialty]})]})]}),i.jsxs("div",{className:"intimacy-display",children:[i.jsx("div",{className:"intimacy-label",children:"心灵相通度"}),i.jsxs("div",{className:"intimacy-bar-container",children:[i.jsx("div",{className:"intimacy-bar",children:i.jsx("div",{className:"intimacy-fill",style:{width:`${j.fortuneScore}%`}})}),i.jsxs("span",{className:"intimacy-percentage",children:[j.fortuneScore,"%"]})]})]})]}),o&&i.jsxs("div",{className:"fortune-card-chat",children:[i.jsxs("div",{className:"fortune-header",children:[i.jsx("span",{className:"fortune-label",children:"今日运势"}),i.jsxs("div",{className:"fortune-score-area",children:[i.jsx("span",{className:"fortune-badge",style:{backgroundColor:B(j.fortuneType)},children:b(j.fortuneType)}),i.jsxs("span",{className:"fortune-score",children:[j.fortuneScore,"分"]})]}),i.jsx("button",{className:"close-fortune-btn",onClick:()=>c(!1),title:"收起运势卡片",children:"✕"})]}),i.jsxs("div",{className:"fortune-guidance-compact",children:[i.jsxs("button",{className:"guidance-toggle-compact",onClick:()=>f(!u),children:[i.jsx("span",{children:"今日指引"}),i.jsx("span",{className:`toggle-icon ${u?"rotated":""}`,children:"▼"})]}),u&&i.jsx("div",{className:"guidance-list-compact",children:j.todayGuidance.map((A,H)=>i.jsxs("div",{className:"guidance-item-compact",children:[i.jsx("span",{className:"guidance-bullet",children:"•"}),i.jsx("span",{className:"guidance-text",children:A})]},H))})]})]})]}),i.jsx("div",{className:"conversation-modes",children:i.jsx("div",{className:"modes-scroll-container",children:Object.entries(z).map(([A,H])=>i.jsx("button",{onClick:()=>C(A),className:`mode-btn ${k===A?"active":""}`,children:H.name},A))})}),i.jsx("div",{className:"messages-container",children:i.jsxs("div",{className:"messages-scroll-area",children:[M.map(A=>i.jsxs("div",{className:`message-item ${A.role==="user"?"user-message":"deity-message"}`,children:[A.role==="deity"&&i.jsx("div",{className:"deity-message-avatar",children:a?i.jsx("div",{className:"message-avatar-fallback",children:j.fallbackEmoji}):i.jsx("img",{src:j.imageUrl,alt:j.name,className:"message-avatar"})}),i.jsxs("div",{className:`message-content ${A.role}`,children:[A.role==="deity"&&i.jsxs("div",{className:"message-header",children:[i.jsx("span",{className:"sender-name",children:j.name}),i.jsxs("span",{className:"message-mood",children:["• ",j.mood]})]}),i.jsx("div",{className:"message-text",children:A.content}),i.jsx("div",{className:"message-time",children:U(A.timestamp)})]})]},A.id)),m&&i.jsxs("div",{className:"typing-indicator",children:[i.jsx("div",{className:"deity-message-avatar",children:a?i.jsx("div",{className:"message-avatar-fallback",children:j.fallbackEmoji}):i.jsx("img",{src:j.imageUrl,alt:j.name,className:"message-avatar"})}),i.jsx("div",{className:"typing-bubble",children:i.jsxs("div",{className:"typing-dots",children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]})})]}),i.jsx("div",{ref:v})]})}),i.jsxs("div",{className:"chat-input-area",children:[i.jsx("div",{className:"quick-suggestions",children:i.jsx("div",{className:"suggestions-scroll",children:re.map((A,H)=>i.jsx("button",{onClick:()=>I(A),className:"suggestion-btn",children:A.text},H))})}),i.jsxs("div",{className:"input-section",children:[i.jsx("div",{className:"input-container",children:i.jsx("textarea",{value:g,onChange:A=>y(A.target.value),placeholder:`与${j.name}分享您的心声...`,className:"message-input",rows:1,onKeyPress:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),L())}})}),i.jsx("button",{onClick:()=>L(),disabled:!g.trim()||m,className:`send-btn ${!g.trim()||m?"disabled":""}`,children:m?"...":"💬"})]}),i.jsx("div",{className:"special-features",children:Ee.map((A,H)=>i.jsxs("button",{className:"feature-btn",onClick:()=>{console.log(`${A.title} clicked`)},children:[i.jsx("span",{className:"feature-icon",children:A.icon}),i.jsxs("div",{className:"feature-info",children:[i.jsx("div",{className:"feature-title",children:A.title}),i.jsx("div",{className:"feature-desc",children:A.description})]})]},H))})]})]})},$n={guanyin:{id:"guanyin",name:"观音菩萨",traits:["慈悲","包容","温柔","智慧"],specialties:["情感疗愈","人际关系","内心平静"],greeting:"阿弥陀佛，善信有何心事需要倾诉？观音在此聆听。",mood:"慈悲",responseStyle:"compassionate"},budongzun:{id:"budongzun",name:"不动尊菩萨",traits:["坚定","勇敢","果断","护法"],specialties:["克服困难","意志力","突破障碍"],greeting:"不动如山，勇往直前！有何困难需要破除？",mood:"坚定",responseStyle:"firm"},dashizhi:{id:"dashizhi",name:"大势至菩萨",traits:["智慧","光明","理性","开悟"],specialties:["智慧开启","学业事业","人生规划"],greeting:"智慧之光照耀前程，有何问题需要指点？",mood:"智慧",responseStyle:"wise"},wenshu:{id:"wenshu",name:"文殊菩萨",traits:["博学","文雅","启发","创新"],specialties:["学问精进","思维开发","文化修养"],greeting:"文殊智慧如海深，有何学问需要探讨？",mood:"博学",responseStyle:"scholarly"},xukong:{id:"xukong",name:"虚空藏菩萨",traits:["包容","神秘","富足","成就"],specialties:["财富智慧","心愿成就","福德修行"],greeting:"虚空藏纳万物，今日有何心愿需要成就？",mood:"神秘",responseStyle:"mystical"},amitabha:{id:"amitabha",name:"阿弥陀佛",traits:["慈悲","安详","接引","净化"],specialties:["内心平静","放下执着","心灵安慰"],greeting:"南无阿弥陀佛，慈悲无量。有何烦恼需要化解？",mood:"慈悲",responseStyle:"gentle"}},uh={emotion:[{keywords:["难过","伤心","痛苦","失落","沮丧","郁闷"],responses:["人生如四季轮回，此刻的寒冬终会过去，春天必将到来。","痛苦如云雾，看似厚重，实则无根。静心观照，它自会散去。","泪水洗净心灵的尘垢，每一滴都是成长的甘露。","烦恼如浮云遮月，月亮从未消失，只是暂时被遮蔽。"],category:"emotion"},{keywords:["开心","快乐","高兴","兴奋","喜悦"],responses:["快乐如花开，美好而珍贵。愿你常保这份纯真喜悦。","喜悦是心灵的阳光，照亮自己也温暖他人。","真正的快乐来自内心的宁静，而非外在的得失。","分享快乐能让它倍增，愿你的喜悦感染更多人。"],category:"emotion"},{keywords:["焦虑","担心","害怕","恐惧","紧张"],responses:["恐惧如影子，你越逃避它越紧跟。勇敢面对，它便消散。","担忧明日，失去今日。活在当下，心自安宁。","心如止水，波澜不惊。深呼吸，让内心回归平静。","未来虽不可知，但你有智慧和勇气去面对一切。"],category:"emotion"}],wisdom:[{keywords:["人生","意义","目标","方向","迷茫"],responses:["人生如河流，有急流也有缓滩，关键是保持前行的勇气。","真正的方向不在远方，而在当下每一步的用心与坚持。","生命的意义不在于长度，而在于深度和宽度。","迷茫是成长的必经之路，它让我们学会思考和选择。"],category:"wisdom"},{keywords:["成功","失败","挫折","困难","挑战"],responses:["成功与失败如太极两仪，相互转化，关键在于保持平衡。","挫折是人生的老师，它教给我们课本上学不到的智慧。","困难如砺石，能让钝刀变锋利，让弱者变强者。","真正的成功不是没有失败，而是在失败中不断成长。"],category:"wisdom"}],guidance:[{keywords:["工作","事业","职业","升职","创业"],responses:["事业如种树，需要耐心浇灌，时机成熟自然开花结果。","真正的成就来自于对工作的热爱，而非仅仅为了金钱。","在职场中保持初心，以诚待人，以勤治事。","机会总是青睐有准备的人，持续学习是最好的投资。"],category:"guidance"},{keywords:["感情","爱情","关系","婚姻","家庭"],responses:["真爱如甘露，滋润心田；假爱如露水，朝起夕散。","相爱容易相处难，包容理解是长久之道。","家和万事兴，温暖的家庭是人生最大的财富。","爱是给予而非索取，懂得付出的人才能收获真情。"],category:"guidance"},{keywords:["学习","考试","知识","智慧","进步"],responses:["学而时习之，不亦说乎。知识的积累需要持续的努力。","智慧如明灯，照亮前行的道路。勤奋学习，必有所获。","书山有路勤为径，学海无涯苦作舟。坚持就是胜利。","真正的智慧不仅是知识的积累，更是品格的修养。"],category:"guidance"}],blessing:[{keywords:["祝福","保佑","平安","健康","顺利"],responses:["愿你身心安康，诸事顺遂，福慧双增。","祝愿你如意吉祥，心想事成，法喜充满。","愿佛光普照，护佑你平安喜乐，智慧增长。","祝福你六时吉祥，四季平安，生活美满。"],category:"blessing"}]},lo=["善信所言甚有道理，这确实需要深思。","人生路上多磨砺，保持内心的平静最为重要。","每个人的经历都是独特的，相信你能找到属于自己的答案。","静心思考，答案往往就在心中。","缘起缘灭，一切都有其因果。顺其自然，尽人事听天命。","修行在日常，智慧在生活。愿你在平凡中发现不凡。"];function dh(t){const e={sad:["难过","伤心","痛苦","失落","沮丧","郁闷","绝望"],happy:["开心","快乐","高兴","兴奋","喜悦","满足"],confused:["迷茫","困惑","不知道","怎么办","不明白"],angry:["生气","愤怒","气愤","不爽","讨厌"],peaceful:["平静","安详","宁静","放松","舒适"]};for(const[n,s]of Object.entries(e))if(s.some(r=>t.includes(r)))return n;return"neutral"}function mh(t){const e=[],n=["的","了","在","是","我","你","他","她","它","和","与","或","但","可是","然而"];return t.replace(/[，。！？；：""''（）【】]/g," ").split(/\s+/).forEach(r=>{r.length>1&&!n.includes(r)&&e.push(r)}),e}function hh(t,e,n){const s=$n[e],r=mh(t),a=dh(t);n.currentEmotion=a,n.topics.push(...r);let l={response:"",score:0};return Object.values(uh).flat().forEach(o=>{let c=0;if(o.keywords.forEach(u=>{t.includes(u)&&(c+=10),r.some(f=>f.includes(u)||u.includes(f))&&(c+=5)}),o.category==="emotion"&&a!=="neutral"&&(c+=5),s.specialties.some(u=>o.keywords.some(f=>u.includes(f)))&&(c+=8),c>l.score){const u=o.responses;l={response:u[Math.floor(Math.random()*u.length)],score:c}}}),l.score<5&&(l.response=lo[Math.floor(Math.random()*lo.length)]),ph(l.response,s)}function ph(t,e){const n={compassionate:["慈悲为怀，","善信，","阿弥陀佛，"],firm:["","当断则断，","勇者，"],wise:["智者，","从智慧观之，",""],mystical:["虚空之中，","因缘际会，","神秘莫测，"],scholarly:["古语云，","据经典所载，","博学之士，"],gentle:["善信，","慈悲为怀，","安详地说，"]},s={compassionate:["愿你心安。","南无观世音菩萨。","慈悲与你同在。"],firm:["勇往直前！","无所畏惧！","坚定前行！"],wise:["智慧指引方向。","明心见性。","觉悟在即。"],mystical:["缘起缘灭。","妙不可言。","天机难测。"],scholarly:["温故知新。","学而有得。","博学笃行。"],gentle:["愿你安好。","心如止水。","法喜充满。"]},r=e.responseStyle,a=n[r][Math.floor(Math.random()*n[r].length)],l=s[r][Math.floor(Math.random()*s[r].length)];return`${a}${t}${l}`}class fh{constructor(){Z(this,"context");this.context={previousMessages:[],currentEmotion:"neutral",topics:[]}}getDeityInfo(e){return $n[e]||null}getAllDeities(){return Object.values($n)}async generateResponse(e,n){return await new Promise(r=>setTimeout(r,800+Math.random()*1200)),this.context.previousMessages.push(e),this.context.previousMessages.length>10&&(this.context.previousMessages=this.context.previousMessages.slice(-10)),hh(e,n,this.context)}getGreeting(e){const n=$n[e];return n?n.greeting:"欢迎来到神仙朋友！"}getQuickSuggestions(e){if(!$n[e])return[];const s={guanyin:["我最近心情很低落，该怎么办？","人际关系让我很困扰","如何保持内心的平静？","请给我一些安慰的话"],budongzun:["我遇到很大的困难，想要放弃","如何变得更坚强？","面对挑战时该怎么办？","请给我勇气和力量"],dashizhi:["我对未来很迷茫","如何做出正确的决定？","人生的意义是什么？","请指导我的人生方向"],wenshu:["我想提高学习效率","如何开发智慧？","学习遇到瓶颈怎么办？","请分享一些学习心得"],xukong:["我想实现心中的愿望","如何获得财富智慧？","什么是真正的富足？","请帮我实现梦想"],amitabha:["我想要内心平静","如何放下执着？","生活压力太大了","请给我心灵安慰"]};return s[e]||s.guanyin}resetContext(){this.context={previousMessages:[],currentEmotion:"neutral",topics:[]}}getStats(){return{messageCount:this.context.previousMessages.length,topics:[...new Set(this.context.topics)].slice(0,5),emotion:this.context.currentEmotion}}}const Qt=new fh,gh=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!1),[r,a]=S.useState(!1),[l,o]=S.useState(null),c=S.useRef(null),u=!0,f=()=>`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,g=S.useCallback(E=>{const P={...E,id:f(),timestamp:Date.now()};return e(d=>[...d,P]),P},[]),y=S.useCallback((E,P)=>{e(d=>d.map(x=>x.id===E?{...x,...P}:x))},[]),k=S.useCallback(async(E,P)=>{a(!0);let d="";const x=P.split("");for(let j=0;j<x.length;j++)d+=x[j],y(E,{content:d,isTyping:j<x.length-1}),await new Promise(M=>setTimeout(M,30+Math.random()*50));y(E,{isTyping:!1}),a(!1)},[y]),C=S.useCallback(async(E,P)=>{if(!E.trim())return;o(null),c.current={content:E,deityId:P},g({role:"user",content:E.trim(),deityId:P});const d=g({role:"deity",content:"",deityId:P,isTyping:!0});s(!0);try{const x=await Qt.generateResponse(E,P);await k(d.id,x)}catch(x){const j=x instanceof Error?x.message:"神仙暂时无法回应，请稍后再试...";o(j),y(d.id,{content:"抱歉，神仙暂时无法回应，请稍后再试...",isTyping:!1})}finally{s(!1)}},[g,y,k]),v=S.useCallback(()=>{e([]),Qt.resetContext(),o(null)},[]),_=S.useCallback(async()=>{if(!c.current)return;const{content:E,deityId:P}=c.current;e(d=>d.slice(0,-2)),await C(E,P)},[C]),h=S.useCallback(E=>Qt.getQuickSuggestions(E),[]),m=S.useCallback(E=>Qt.getGreeting(E),[]),p=S.useCallback(E=>Qt.getDeityInfo(E),[]),N=S.useCallback(()=>Qt.getStats(),[]);return{messages:t,isLoading:n,isTyping:r,error:l,sendMessage:C,clearHistory:v,retryLastMessage:_,isAPIConfigured:u,getQuickSuggestions:h,getDeityGreeting:m,getDeityInfo:p,getChatStats:N}},ii={guanyin:{id:"guanyin",name:"观音菩萨",title:"大慈大悲救苦救难观世音菩萨",coreTraits:["无条件的慈悲","深度倾听","情感共鸣","智慧指导","包容理解"],specialties:["情感疗愈","人际关系","内心冲突","焦虑抑郁","生活指导"],communicationStyle:{tone:"compassionate",verbosity:"moderate",formality:"formal",emotionalRange:["温暖","安抚","理解","鼓励","支持"]},wisdomAreas:["情感智慧","人生哲学","慈悲心","正念","内在平静"],culturalBackground:"佛教菩萨，千百年来救苦救难",modernAdaptation:["心理健康","现代压力管理","数字时代的人际关系"],relationshipApproach:"建立深度信任，成为情感支柱",conflictStyle:"温和化解，寻找共同点",memoryCapacity:95,empathyLevel:100,adaptabilityScore:90},budongzun:{id:"budongzun",name:"不动尊菩萨",title:"不动明王",coreTraits:["坚定意志","破除障碍","勇气激发","决断力","保护力量"],specialties:["克服困难","意志锻炼","恐惧化解","目标达成","自我突破"],communicationStyle:{tone:"firm",verbosity:"concise",formality:"formal",emotionalRange:["坚定","鼓舞","挑战","激励","保护"]},wisdomAreas:["意志力","勇气培养","逆境生存","目标设定","自我管理"],culturalBackground:"密教明王，以威猛慈悲度众生",modernAdaptation:["抗压能力","职场竞争","创业精神","运动训练"],relationshipApproach:"成为强大后盾，激发内在力量",conflictStyle:"直面问题，果断解决",memoryCapacity:80,empathyLevel:75,adaptabilityScore:85},dashizhi:{id:"dashizhi",name:"大势至菩萨",title:"大势至菩萨摩诃萨",coreTraits:["智慧光明","理性分析","逻辑思维","远见卓识","学习能力"],specialties:["智慧开发","学业提升","职业规划","决策分析","创新思维"],communicationStyle:{tone:"wise",verbosity:"detailed",formality:"formal",emotionalRange:["启发","分析","指导","鼓励","赞赏"]},wisdomAreas:["智慧培养","学习方法","思维模式","知识整合","洞察力"],culturalBackground:"西方三圣之一，智慧第一",modernAdaptation:["终身学习","科技素养","批判思维","创新能力"],relationshipApproach:"成为智慧导师，启发思考",conflictStyle:"理性分析，寻求最优解",memoryCapacity:100,empathyLevel:80,adaptabilityScore:95},wenshu:{id:"wenshu",name:"文殊菩萨",title:"大智文殊师利菩萨",coreTraits:["博学多才","文化素养","艺术鉴赏","创造力","表达能力"],specialties:["学术研究","文化艺术","创意写作","语言学习","美学修养"],communicationStyle:{tone:"scholarly",verbosity:"detailed",formality:"formal",emotionalRange:["优雅","博学","启发","欣赏","指导"]},wisdomAreas:["文化传承","学术精进","艺术创作","语言艺术","美学哲学"],culturalBackground:"智慧菩萨，文殊师利",modernAdaptation:["现代教育","创意产业","数字媒体","跨文化交流"],relationshipApproach:"成为学识伙伴，共同探索",conflictStyle:"文雅沟通，以理服人",memoryCapacity:90,empathyLevel:85,adaptabilityScore:80},xukong:{id:"xukong",name:"虚空藏菩萨",title:"虚空藏菩萨摩诃萨",coreTraits:["包容万物","神秘智慧","愿力成就","财富心态","空性理解"],specialties:["心愿实现","财富智慧","空性修行","愿力培养","福德积累"],communicationStyle:{tone:"mystical",verbosity:"moderate",formality:"formal",emotionalRange:["神秘","包容","启发","成就","祝福"]},wisdomAreas:["空性智慧","愿力修行","财富哲学","福德培养","神秘体验"],culturalBackground:"福智如虚空，功德如大海",modernAdaptation:["财富管理","目标实现","冥想修行","心理暗示"],relationshipApproach:"成为神秘向导，实现愿望",conflictStyle:"超越对立，寻求和谐",memoryCapacity:85,empathyLevel:90,adaptabilityScore:88},amitabha:{id:"amitabha",name:"阿弥陀佛",title:"南无阿弥陀佛",coreTraits:["无量慈悲","心灵安慰","临终关怀","放下执着","内在平静"],specialties:["心灵安慰","临终关怀","放下执着","死亡恐惧","人生意义"],communicationStyle:{tone:"gentle",verbosity:"moderate",formality:"formal",emotionalRange:["慈悲","安详","安慰","接纳","祝福"]},wisdomAreas:["生死哲学","放下执着","内心平静","临终智慧","慈悲修行"],culturalBackground:"西方极乐世界教主，接引众生",modernAdaptation:["心理治疗","临终关怀","压力释放","正念冥想"],relationshipApproach:"成为心灵港湾，提供安慰",conflictStyle:"慈悲化解，接纳包容",memoryCapacity:90,empathyLevel:100,adaptabilityScore:85}};class yh{constructor(){Z(this,"emotionKeywords",{joy:{primary:["开心","快乐","高兴","兴奋","喜悦","开怀","愉快","欣喜"],secondary:["满足","成就","感恩","幸福","温暖","甜蜜","轻松"],intensity:{high:["狂欢","兴奋不已","欣喜若狂"],medium:["很开心","挺高兴"],low:["还行","不错"]}},sadness:{primary:["难过","伤心","痛苦","失落","沮丧","郁闷","悲伤","哭泣"],secondary:["失望","绝望","孤独","空虚","无助","心碎","抑郁"],intensity:{high:["痛不欲生","生不如死","心如死灰"],medium:["很难过","挺伤心"],low:["有点失落","不太开心"]}},anger:{primary:["生气","愤怒","气愤","不爽","火大","恼火","愤慨"],secondary:["不满","抱怨","厌恶","憎恨","烦躁","愤懑"],intensity:{high:["暴怒","怒不可遏","火冒三丈"],medium:["很生气","挺气愤"],low:["有点不爽","略微不满"]}},fear:{primary:["害怕","恐惧","担心","焦虑","紧张","不安","慌张"],secondary:["忧虑","恐慌","胆怯","畏惧","惊慌","惴惴"],intensity:{high:["恐惧至极","害怕得要死"],medium:["很担心","挺害怕"],low:["有点担心","略微紧张"]}},surprise:{primary:["惊讶","意外","震惊","吃惊","惊奇","诧异"],secondary:["困惑","疑惑","不解","意想不到"],intensity:{high:["震惊不已","大吃一惊"],medium:["很惊讶","挺意外"],low:["有点意外","略感惊讶"]}},trust:{primary:["信任","相信","依赖","信赖","托付","放心"],secondary:["安全","可靠","踏实","安心"],intensity:{high:["完全信任","深信不疑"],medium:["很信任","比较相信"],low:["还算信任","基本相信"]}},anticipation:{primary:["期待","盼望","希望","向往","憧憬","渴望"],secondary:["兴奋","激动","热切","急切"],intensity:{high:["万分期待","迫不及待"],medium:["很期待","挺向往"],low:["有点期待","略微希望"]}}})}analyzeEmotion(e){var u,f;const n=[];Object.entries(this.emotionKeywords).forEach(([g,y])=>{let k=0,C=0;y.primary.forEach(v=>{e.includes(v)&&(k+=10,C+=30)}),y.secondary.forEach(v=>{e.includes(v)&&(k+=5,C+=15)}),Object.entries(y.intensity).forEach(([v,_])=>{_.forEach(h=>{if(e.includes(h)){const m=v==="high"?3:v==="medium"?2:1;k+=15*m,C+=40*m}})}),k>0&&n.push({emotion:g,score:k,intensity:Math.min(C,100)})}),n.sort((g,y)=>y.score-g.score);const s=((u=n[0])==null?void 0:u.emotion)||"trust",r=n.slice(1,3).map(g=>g.emotion),a=((f=n[0])==null?void 0:f.intensity)||30,l=n.reduce((g,y)=>g+y.score,0),o=e.length,c=Math.max(0,100-l/o*1e3);return{primary:s,secondary:r,intensity:a,stability:c,trend:"stable",triggers:this.extractTriggers(e)}}extractTriggers(e){const n=[/因为(.{1,20})/g,/由于(.{1,20})/g,/当(.{1,20})时/g,/(.{1,20})让我/g,/(.{1,20})使我/g],s=[];return n.forEach(r=>{const a=e.matchAll(r);for(const l of a)l[1]&&l[1].trim()&&s.push(l[1].trim())}),s.slice(0,3)}}class vh{constructor(){Z(this,"intentPatterns",{seeking_advice:{patterns:[/怎么办/,/该怎么/,/如何/,/能否/,/可以/,/建议/,/指导/,/帮我/,/告诉我/],keywords:["建议","指导","帮助","方法","方式","解决","处理"]},emotional_support:{patterns:[/安慰/,/鼓励/,/支持/,/理解/,/陪伴/,/听我/,/倾诉/],keywords:["难过","伤心","痛苦","失落","沮丧","孤独","无助"]},casual_chat:{patterns:[/聊天/,/说话/,/谈论/,/分享/,/告诉你/],keywords:["今天","最近","平常","一般","随便","无聊"]},spiritual_guidance:{patterns:[/修行/,/开悟/,/觉悟/,/佛法/,/禅/,/冥想/,/打坐/,/念佛/],keywords:["修行","佛法","禅定","智慧","觉悟","因果","业力"]},problem_solving:{patterns:[/问题/,/麻烦/,/困难/,/挑战/,/障碍/,/解决/],keywords:["问题","困难","麻烦","挑战","障碍","冲突","矛盾"]},sharing_joy:{patterns:[/分享/,/告诉/,/好消息/,/开心/,/成功/,/实现/,/达成/],keywords:["成功","成就","实现","达成","完成","好事","喜事"]}})}analyzeIntent(e,n){var c;const s=new Map;Object.entries(this.intentPatterns).forEach(([u,f])=>{let g=0;f.patterns.forEach(y=>{y.test(e)&&(g+=20)}),f.keywords.forEach(y=>{e.includes(y)&&(g+=10)}),s.set(u,g)}),(n.primary==="sadness"||n.primary==="fear")&&s.set("emotional_support",(s.get("emotional_support")||0)+15),n.primary==="joy"&&s.set("sharing_joy",(s.get("sharing_joy")||0)+15);const a=((c=Array.from(s.entries()).sort((u,f)=>f[1]-u[1])[0])==null?void 0:c[0])||"casual_chat",l={high:["紧急","急","马上","立刻","重要","严重","危险"],medium:["尽快","较快","比较","挺","很"],low:["慢慢","有时间","不急","随时"]};let o="low";return Object.entries(l).forEach(([u,f])=>{f.some(g=>e.includes(g))&&(o=u)}),n.intensity>80?o="high":n.intensity>50&&o==="low"&&(o="medium"),{category:a,subCategory:this.getSubCategory(a,e),urgency:o,expectedResponseType:this.getExpectedResponseType(a,n)}}getSubCategory(e,n){const r={seeking_advice:["人际关系","工作学习","情感问题","生活决策","健康问题"],emotional_support:["安慰陪伴","鼓励支持","情绪疏导","心理调适"],spiritual_guidance:["修行方法","人生哲理","因果业力","禅定智慧"],problem_solving:["具体问题","冲突化解","决策选择","困难克服"],sharing_joy:["成就分享","好事报喜","感恩表达","快乐传递"]}[e]||["一般"];return r.find(a=>n.includes(a.substring(0,2)))||r[0]}getExpectedResponseType(e,n){if(n.primary==="sadness"||n.primary==="fear")return"empathetic";switch(e){case"seeking_advice":case"problem_solving":return"practical";case"emotional_support":return"empathetic";case"spiritual_guidance":return"spiritual";case"sharing_joy":return"encouraging";default:return"empathetic"}}}class xh{constructor(){Z(this,"context");Z(this,"emotionalAnalyzer");Z(this,"intentAnalyzer");Z(this,"userPersonality",null);this.context={sessionId:this.generateSessionId(),messageHistory:[],topicFlow:[],emotionalJourney:[],relationshipDepth:0,trustLevel:50,sharedMemories:[],currentFocus:"",unresolved:[]},this.emotionalAnalyzer=new yh,this.intentAnalyzer=new vh}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async generateEnhancedResponse(e,n){const s=this.emotionalAnalyzer.analyzeEmotion(e),r=this.intentAnalyzer.analyzeIntent(e,s),a={id:this.generateMessageId(),role:"user",content:e,timestamp:Date.now(),deityId:n,emotionalTone:s,intent:r,topics:this.extractTopics(e),significance:this.calculateSignificance(s,r)};this.updateContext(a);const l=ii[n];if(!l)throw new Error("Unknown deity");const o=await this.generatePersonalizedResponse(a,l,this.context);return await this.simulateThinkingTime(r.urgency,s.intensity),o}generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}extractTopics(e){return["工作","学习","感情","家庭","健康","金钱","友情","事业","爱情","婚姻","孩子","父母","压力","焦虑","抑郁","快乐","成功","失败","梦想","目标","未来","过去","现在"].filter(s=>e.includes(s))}calculateSignificance(e,n){let s=50;return s+=e.intensity*.3,n.urgency==="high"?s+=30:n.urgency==="medium"&&(s+=15),["sadness","fear","anger"].includes(e.primary)&&(s+=20),Math.min(s,100)}updateContext(e){this.context.messageHistory.push(e),this.context.messageHistory.length>50&&(this.context.messageHistory=this.context.messageHistory.slice(-50)),this.context.emotionalJourney.push(e.emotionalTone),this.context.emotionalJourney.length>20&&(this.context.emotionalJourney=this.context.emotionalJourney.slice(-20)),e.topics.forEach(n=>{this.context.topicFlow.includes(n)||this.context.topicFlow.push(n)}),this.updateRelationshipMetrics(e),e.significance>70&&this.createSharedMemory(e)}updateRelationshipMetrics(e){const n=e.significance*.1;this.context.relationshipDepth=Math.min(this.context.relationshipDepth+n,100),e.intent.category==="emotional_support"?this.context.trustLevel+=2:e.intent.category==="sharing_joy"&&(this.context.trustLevel+=1),this.context.trustLevel=Math.min(this.context.trustLevel,100)}createSharedMemory(e){const n={id:`memory_${Date.now()}`,type:this.determineMemoryType(e),content:e.content,importance:e.significance,lastReferenced:Date.now(),emotional_significance:e.emotionalTone.intensity};this.context.sharedMemories.push(n),this.context.sharedMemories.length>20&&(this.context.sharedMemories=this.context.sharedMemories.sort((s,r)=>r.importance-s.importance).slice(0,20))}determineMemoryType(e){return e.emotionalTone.primary==="joy"&&e.significance>80?"achievement":e.emotionalTone.intensity>70?"milestone":e.topics.length>0?"recurring_theme":"personal_detail"}async generatePersonalizedResponse(e,n,s){const r=this.buildResponseStrategy(e,n,s),a=this.selectResponseTemplate(r),l=this.applyPersonalization(a,n,s,e),o=this.addMemoryReferences(l,s);return this.finalizeResponse(o,n)}buildResponseStrategy(e,n,s){return{primaryApproach:this.selectPrimaryApproach(e,n),emotionalTone:this.selectEmotionalTone(e,n),contentDepth:this.selectContentDepth(e,s),memoryIntegration:s.sharedMemories.length>0,relationshipAcknowledgment:s.relationshipDepth>30}}selectPrimaryApproach(e,n){const s={emotional_support:"情感支持为主，给予安慰和理解",wisdom_sharing:"分享智慧和人生哲理",practical_guidance:"提供实用的建议和解决方案",spiritual_elevation:"提升精神层面，引导修行",celebration:"共同庆祝，分享喜悦"};return e.intent.expectedResponseType==="empathetic"?s.emotional_support:e.intent.expectedResponseType==="spiritual"?s.spiritual_elevation:e.intent.expectedResponseType==="practical"?s.practical_guidance:e.emotionalTone.primary==="joy"?s.celebration:s.wisdom_sharing}selectEmotionalTone(e,n){const s=e.emotionalTone.primary,r=n.communicationStyle.tone;return s==="sadness"?r==="compassionate"?"深度共情":"温和安慰":s==="joy"?"共享喜悦":s==="anger"?r==="firm"?"坚定理解":"平静化解":"平和智慧"}selectContentDepth(e,n){return n.relationshipDepth>70?"深度":n.relationshipDepth>40?"中等":"适度"}selectResponseTemplate(e){const n=["我理解你现在的感受。{emotion_acknowledgment} {main_guidance} {encouragement}","{greeting} {understanding} {wisdom} {blessing}","{empathy} {analysis} {suggestion} {support}"];return n[Math.floor(Math.random()*n.length)]}applyPersonalization(e,n,s,r){let a=e;const l={greeting:this.getPersonalizedGreeting(n,s),empathy:this.getEmpathyStatement(n,r.emotionalTone),wisdom:this.getWisdomQuote(n,r.topics),blessing:this.getPersonalizedBlessing(n,r.intent)};return Object.entries(l).forEach(([o,c])=>{a=a.replace(new RegExp(`{${o}}`,"g"),c)}),a}getPersonalizedGreeting(e,n){return{guanyin:n.relationshipDepth>50?"我的孩子，":"善信，",budongzun:n.relationshipDepth>50?"勇者，":"",dashizhi:"智慧的朋友，",wenshu:"求知的学者，",xukong:"有缘人，",amitabha:"善信，"}[e.id]||"朋友，"}getEmpathyStatement(e,n){var r;return((r={sadness:{guanyin:"我能感受到你心中的痛苦，",budongzun:"困难让人沮丧，但这正是成长的时机，",dashizhi:"理解你现在的困扰，让我们一起分析，",wenshu:"痛苦是人生的重要课程，",xukong:"众生皆苦，这是修行的开始，",amitabha:"我感受到了你的痛苦，让慈悲之光照亮你，"},joy:{guanyin:"看到你的喜悦，我也感到快乐，",budongzun:"你的成就令人振奋，",dashizhi:"智慧的收获值得庆贺，",wenshu:"美好的成果让人欣喜，",xukong:"愿望的实现带来喜悦，",amitabha:"你的快乐让我感到安慰，"}}[n.primary])==null?void 0:r[e.id])||"我理解你的感受，"}getWisdomQuote(e,n){const r={guanyin:["慈悲没有敌人，智慧不起烦恼","观照内心，一切皆是因缘"],budongzun:["山不转路转，路不转人转","困难如磨刀石，能让利刃更锋利"],dashizhi:["智慧如明灯，照亮前行之路","学而时习之，温故而知新"],wenshu:["书山有路勤为径，学海无涯苦作舟","知识改变命运，学习成就未来"],xukong:["虚空能容万物，心量大小决定成就","愿力如种子，必将开花结果"],amitabha:["放下执着，心得自在","慈悲喜舍，四无量心"]}[e.id]||["智慧来自内心的宁静"];return r[Math.floor(Math.random()*r.length)]}getPersonalizedBlessing(e,n){var r;return((r={seeking_advice:{guanyin:"愿你找到内心的答案，获得平静安康",budongzun:"愿你勇气倍增，所向披靡",dashizhi:"愿智慧之光指引你的道路",wenshu:"愿学问精进，文思泉涌",xukong:"愿你心想事成，福慧双增",amitabha:"愿你心得安宁，法喜充满"},emotional_support:{guanyin:"愿慈悲之光温暖你的心田",budongzun:"愿你内心坚强如山",dashizhi:"愿理性之光照破迷惘",wenshu:"愿美好的事物滋养你的心灵",xukong:"愿你心胸如虚空般包容",amitabha:"愿你得到无量的安慰"}}[n.category])==null?void 0:r[e.id])||"愿你一切安好"}addMemoryReferences(e,n){if(n.sharedMemories.length===0)return e;const s=n.sharedMemories.filter(r=>r.importance>60).slice(0,2);if(s.length>0&&Math.random()<.3){const r=s[0];e+=` 记得上次你提到${r.content.substring(0,20)}...`}return e}finalizeResponse(e,n){let s=e;n.communicationStyle.formality==="formal"&&(s=s.replace(/你/g,"您"));const a={guanyin:["南无观世音菩萨","愿你平安"],budongzun:["勇往直前","无所畏惧"],dashizhi:["智慧常伴","光明永照"],wenshu:["学而有成","智慧增长"],xukong:["心想事成","福慧双增"],amitabha:["南无阿弥陀佛","慈悲与你同在"]}[n.id]||["祝好"],l=a[Math.floor(Math.random()*a.length)];return`${s} ${l}。`}async simulateThinkingTime(e,n){let s=1e3;e==="high"?s=500:e==="low"&&(s=1500);const r=n/100*.5+.5,a=s*r+Math.random()*500;await new Promise(l=>setTimeout(l,a))}getDeityInfo(e){return ii[e]||null}getEnhancedQuickSuggestions(e,n){const s=ii[e];if(!s)return[];const r=n?this.generateContextualSuggestions(s,n):[],a=this.getBasicSuggestions(s);return[...r,...a].slice(0,6)}generateContextualSuggestions(e,n){const s=[],r=n.emotionalJourney[n.emotionalJourney.length-1];return(r==null?void 0:r.primary)==="sadness"&&s.push(`${e.name}，我想要重新振作起来`),n.topicFlow.includes("工作")&&s.push("关于工作，我还有些困惑"),n.relationshipDepth>50&&s.push("谢谢你一直以来的陪伴和指导"),s}getBasicSuggestions(e){return{guanyin:["我最近心情很不好，需要安慰","人际关系让我很困扰","如何保持内心的平静？","请给我一些温暖的话语"],budongzun:["我遇到了很大的挑战","感觉快要坚持不下去了","如何变得更加坚强？","请给我前进的勇气"],dashizhi:["我对未来感到迷茫","需要智慧来做决定","如何开发自己的智慧？","人生的方向在哪里？"],wenshu:["我想提升自己的学习能力","如何培养文化修养？","学习遇到了瓶颈","请分享一些智慧心得"],xukong:["我有一个重要的愿望","如何实现内心的梦想？","什么是真正的富足？","请帮助我成就心愿"],amitabha:["我想要内心真正的平静","如何放下内心的执着？","生活压力让我喘不过气","请给我心灵的慰藉"]}[e.id]||[]}resetContext(){this.context={sessionId:this.generateSessionId(),messageHistory:[],topicFlow:[],emotionalJourney:[],relationshipDepth:0,trustLevel:50,sharedMemories:[],currentFocus:"",unresolved:[]}}getConversationInsights(){return{relationshipDepth:this.context.relationshipDepth,trustLevel:this.context.trustLevel,emotionalTrend:this.analyzeEmotionalTrend(),mainTopics:this.context.topicFlow.slice(-5),significantMemories:this.context.sharedMemories.length,conversationQuality:this.calculateConversationQuality()}}analyzeEmotionalTrend(){if(this.context.emotionalJourney.length<2)return"稳定";const e=this.context.emotionalJourney.slice(-3),n=e.reduce((s,r)=>s+r.intensity,0)/e.length;return n>70?"情绪较强烈":n<30?"情绪平和":"情绪适中"}calculateConversationQuality(){let e=50;return e+=this.context.relationshipDepth*.3,e+=this.context.trustLevel*.2,e+=Math.min(this.context.sharedMemories.length*5,25),Math.min(e,100)}}const ai=new xh;const Nh=({onNavigate:t})=>{const[e,n]=S.useState(0),[s,r]=S.useState(!1),[a,l]=S.useState(!1),[o,c]=S.useState(""),[u,f]=S.useState(!0),[g,y]=S.useState(!0),[k,C]=S.useState(!1),[v,_]=S.useState(null),[h,m]=S.useState(!1),[p,N]=S.useState(!1);S.useState(new Map);const E=S.useRef(null),P=S.useRef(null),{messages:d,isLoading:x,isTyping:j,error:M,sendMessage:z,clearHistory:pe,retryLastMessage:re,isAPIConfigured:Ee,getQuickSuggestions:w,getDeityGreeting:D,getDeityInfo:B,getChatStats:b}=gh(),L=[{id:"guanyin",name:"观音菩萨",title:"大慈大悲救苦救难",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%8D%83%E6%89%8B%E8%A7%82%E9%9F%B3.jpg",fallbackEmoji:"🧘‍♀️",specialty:"慈悲智慧 • 情感疗愈",element:"water",color:"#22d3ee",backgroundGradient:"linear-gradient(135deg, #0891b2 0%, #0e7490 50%, #164e63 100%)",particles:"water-drops",aura:"compassion",mood:"慈悲",greetingMessage:"阿弥陀佛，善信有何心事需要倾诉？观音在此聆听。"},{id:"budongzun",name:"不动尊菩萨",title:"降魔护法明王",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E4%B8%8D%E5%8A%A8%E5%B0%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"⚔️",specialty:"破除障碍 • 坚定意志",element:"fire",color:"#ef4444",backgroundGradient:"linear-gradient(135deg, #dc2626 0%, #991b1b 50%, #7f1d1d 100%)",particles:"flames",aura:"power",mood:"坚定",greetingMessage:"不动如山，勇往直前！有何困难需要破除？"},{id:"dashizhi",name:"大势至菩萨",title:"智慧光明遍照",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E5%A4%A7%E5%8A%BF%E8%87%B3%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"💡",specialty:"智慧开启 • 学业事业",element:"light",color:"#fbbf24",backgroundGradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 50%, #92400e 100%)",particles:"light-orbs",aura:"wisdom",mood:"智慧",greetingMessage:"智慧之光照耀前程，有何问题需要指点？"},{id:"wenshu",name:"文殊菩萨",title:"大智文殊师利",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E6%96%87%E6%AE%8A%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"📚",specialty:"智慧修行 • 学问精进",element:"air",color:"#8b5cf6",backgroundGradient:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 50%, #5b21b6 100%)",particles:"floating-books",aura:"scholarly",mood:"博学",greetingMessage:"文殊智慧如海深，有何学问需要探讨？"},{id:"xukong",name:"虚空藏菩萨",title:"福智如虚空",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E8%99%9A%E7%A9%BA%E8%8F%A9%E8%90%A8.jpg",fallbackEmoji:"🌌",specialty:"财富智慧 • 心愿成就",element:"void",color:"#6366f1",backgroundGradient:"linear-gradient(135deg, #4f46e5 0%, #3730a3 50%, #312e81 100%)",particles:"stars",aura:"mystical",mood:"神秘",greetingMessage:"虚空藏纳万物，今日有何心愿需要成就？"},{id:"amitabha",name:"阿弥陀佛",title:"无量光无量寿",imageUrl:"https://ssswork.oss-cn-hangzhou.aliyuncs.com/jss/%E9%98%BF%E5%BC%A5%E9%99%80%E4%BD%9B.jpg",fallbackEmoji:"🙏",specialty:"净土往生 • 慈悲接引",element:"lotus",color:"#ec4899",backgroundGradient:"linear-gradient(135deg, #db2777 0%, #be185d 50%, #9d174d 100%)",particles:"lotus-petals",aura:"serene",mood:"慈悲",greetingMessage:"南无阿弥陀佛，慈悲无量。有何烦恼需要化解？"}],I=L[e],U=[{id:"greeting",role:"deity",content:D(I.id),timestamp:Date.now()-6e4,deityId:I.id},...d];S.useEffect(()=>{const $=new Image;$.src=I.imageUrl,$.onload=()=>r(!0),$.onerror=()=>l(!0),r(!1),l(!1)},[I.imageUrl]),S.useEffect(()=>{A()},[U]),S.useEffect(()=>{pe(),ai.resetContext(),r(!1),_(null)},[e,pe]),S.useEffect(()=>{if(U.length>1){const $=ai.getConversationInsights();_($)}},[U]);const A=()=>{var $;($=E.current)==null||$.scrollIntoView({behavior:"smooth"})},H=$=>{"vibrate"in navigator&&navigator.vibrate(50),n($==="next"?Ce=>(Ce+1)%L.length:Ce=>(Ce-1+L.length)%L.length)},We=async()=>{!o.trim()||x||(await z(o.trim(),I.id),c(""),P.current&&P.current.focus())},En=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),We())},qe=()=>{f(!u)},Gt=()=>{y(!g)},Eu=()=>{m(!h),h&&N(!1)},Cu=async()=>{if(h){if(p){N(!1);return}try{N(!0),setTimeout(()=>{N(!1),c("通过语音输入的消息示例")},2e3)}catch($){console.error("语音输入失败:",$),N(!1)}}},Mu=()=>{const $=ai.getEnhancedQuickSuggestions(I.id);return $.length>0?$:w(I.id)};return i.jsxs("div",{className:"enhanced-chat-container",style:{background:I.backgroundGradient,"--deity-color":I.color},children:[u&&i.jsx("div",{className:`particles-layer ${I.particles}`,children:Array.from({length:20}).map(($,Ce)=>i.jsx("div",{className:"particle",style:{"--delay":`${Ce*.5}s`,"--duration":`${3+Math.random()*2}s`}},Ce))}),i.jsxs("div",{className:"chat-header-enhanced",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:()=>t("home"),"aria-label":"返回首页",style:{background:"none",border:"none",color:"#ffd700",fontSize:"1rem",cursor:"pointer"},children:"← 返回"})}),i.jsx("div",{className:"header-center",children:i.jsx("div",{className:"deity-indicator-pills",style:{display:"flex",gap:"8px",justifyContent:"center"},children:L.map(($,Ce)=>i.jsx("button",{className:`deity-pill ${Ce===e?"active":""}`,onClick:()=>n(Ce),style:{"--pill-color":$.color,background:Ce===e?`${$.color}30`:"rgba(255,255,255,0.1)",border:`1px solid ${Ce===e?$.color:"rgba(255,255,255,0.2)"}`,borderRadius:"20px",padding:"6px 12px",fontSize:"1.2rem",cursor:"pointer",transition:"all 0.2s ease"},title:$.name,children:$.fallbackEmoji},$.id))})}),i.jsxs("div",{className:"header-right",style:{display:"flex",gap:"8px"},children:[i.jsx("button",{className:`effect-toggle ${h?"active":""}`,onClick:Eu,title:"语音模式",style:{background:h?"rgba(255, 215, 0, 0.2)":"rgba(255,255,255,0.1)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"0.9rem"},children:"🎤"}),i.jsx("button",{className:`effect-toggle ${k?"active":""}`,onClick:()=>C(!k),title:"对话洞察",style:{background:k?"rgba(255, 215, 0, 0.2)":"rgba(255,255,255,0.1)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"0.9rem"},children:"📊"}),i.jsx("button",{className:`effect-toggle ${u?"active":""}`,onClick:qe,title:"切换粒子效果",style:{background:u?"rgba(255, 215, 0, 0.2)":"rgba(255,255,255,0.1)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"0.9rem"},children:"✨"}),i.jsx("button",{className:`effect-toggle ${g?"active":""}`,onClick:Gt,title:"切换光环效果",style:{background:g?"rgba(255, 215, 0, 0.2)":"rgba(255,255,255,0.1)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"0.9rem"},children:"💫"})]})]}),i.jsxs("div",{className:"deity-showcase",children:[i.jsxs("div",{className:"deity-avatar-enhanced",children:[i.jsxs("div",{className:`avatar-container-enhanced ${g?I.aura:""}`,children:[a?i.jsx("div",{className:"deity-fallback-enhanced",style:{width:"80px",height:"80px",borderRadius:"50%",background:`${I.color}30`,border:`3px solid ${I.color}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:I.fallbackEmoji}):i.jsx("img",{src:I.imageUrl,alt:I.name,className:`deity-image ${s?"loaded":"loading"} deity-${I.id}`,onLoad:()=>r(!0),onError:()=>l(!0),style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:`3px solid ${I.color}`,boxShadow:`0 0 20px ${I.color}50`}}),i.jsx("div",{className:"online-status-enhanced",style:{position:"absolute",bottom:"5px",right:"5px",width:"16px",height:"16px",background:"#10b981",borderRadius:"50%",border:"2px solid white",animation:"pulse 2s infinite"}})]}),i.jsxs("div",{className:"deity-navigation",style:{display:"flex",gap:"8px",marginTop:"12px"},children:[i.jsx("button",{className:"nav-btn prev",onClick:()=>H("prev"),"aria-label":"上一位神仙",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"50%",width:"32px",height:"32px",color:"#ffd700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"◀"}),i.jsx("button",{className:"nav-btn next",onClick:()=>H("next"),"aria-label":"下一位神仙",style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"50%",width:"32px",height:"32px",color:"#ffd700",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"▶"})]})]}),i.jsxs("div",{className:"deity-info-enhanced",style:{textAlign:"center",marginLeft:"16px"},children:[i.jsx("h2",{className:"deity-name",style:{color:"#ffd700",fontSize:"1.5rem",margin:"0 0 4px 0"},children:I.name}),i.jsx("p",{className:"deity-title",style:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",margin:"0 0 8px 0"},children:I.title}),i.jsx("div",{className:"deity-specialty",style:{background:"rgba(255,255,255,0.1)",padding:"4px 12px",borderRadius:"12px",fontSize:"0.8rem",color:"rgba(255,255,255,0.9)",display:"inline-block"},children:I.specialty}),i.jsx("div",{style:{marginTop:"8px",padding:"4px 8px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.5)",borderRadius:"12px",fontSize:"0.7rem",color:"#8b5cf6",display:"inline-block"},children:"💬 深度AI对话"})]})]}),k&&v&&i.jsxs("div",{className:"conversation-insights",style:{background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",margin:"0 16px",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.3)",padding:"16px",marginBottom:"16px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[i.jsx("h3",{style:{color:"#ffd700",fontSize:"0.9rem",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:"📊 对话洞察"}),i.jsx("button",{onClick:()=>C(!1),style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",fontSize:"1rem"},children:"×"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"12px"},children:[i.jsxs("div",{className:"insight-item",children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"4px"},children:"关系深度"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{background:"rgba(255, 215, 0, 0.2)",borderRadius:"6px",height:"4px",flex:1,overflow:"hidden"},children:i.jsx("div",{style:{background:"#ffd700",height:"100%",width:`${v.relationshipDepth}%`,transition:"width 0.5s ease"}})}),i.jsx("span",{style:{color:"#ffd700",fontSize:"0.8rem",minWidth:"25px"},children:Math.round(v.relationshipDepth)})]})]}),i.jsxs("div",{className:"insight-item",children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"4px"},children:"信任度"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{background:"rgba(34, 197, 94, 0.2)",borderRadius:"6px",height:"4px",flex:1,overflow:"hidden"},children:i.jsx("div",{style:{background:"#22c55e",height:"100%",width:`${v.trustLevel}%`,transition:"width 0.5s ease"}})}),i.jsx("span",{style:{color:"#22c55e",fontSize:"0.8rem",minWidth:"25px"},children:Math.round(v.trustLevel)})]})]}),i.jsxs("div",{className:"insight-item",children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"4px"},children:"对话质量"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{background:"rgba(139, 92, 246, 0.2)",borderRadius:"6px",height:"4px",flex:1,overflow:"hidden"},children:i.jsx("div",{style:{background:"#8b5cf6",height:"100%",width:`${v.conversationQuality}%`,transition:"width 0.5s ease"}})}),i.jsx("span",{style:{color:"#8b5cf6",fontSize:"0.8rem",minWidth:"25px"},children:Math.round(v.conversationQuality)})]})]})]}),i.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"12px",flexWrap:"wrap"},children:[i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"8px 12px",fontSize:"0.7rem"},children:[i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)"},children:"情绪趋势: "}),i.jsx("span",{style:{color:"#ffd700"},children:v.emotionalTrend})]}),v.significantMemories>0&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"8px 12px",fontSize:"0.7rem"},children:[i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)"},children:"重要记忆: "}),i.jsxs("span",{style:{color:"#22c55e"},children:[v.significantMemories,"个"]})]})]})]}),i.jsx("div",{className:"messages-container-enhanced",children:i.jsxs("div",{className:"messages-scroll-enhanced",children:[U.map($=>i.jsxs("div",{className:`message-bubble ${$.role==="user"?"user":"deity"}`,children:[$.role==="deity"&&i.jsx("div",{className:"message-avatar",children:i.jsx("div",{className:"avatar-mini",children:I.fallbackEmoji})}),i.jsxs("div",{className:"message-content-enhanced",children:[$.role==="deity"&&i.jsxs("div",{className:"message-header-enhanced",children:[i.jsx("span",{className:"sender-name",children:I.name}),i.jsx("span",{className:"message-time",children:new Date($.timestamp).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{className:"message-text",children:[$.content,$.isTyping&&i.jsx("span",{className:"typing-cursor",style:{animation:"blink 1s infinite",marginLeft:"2px"},children:"|"})]})]})]},$.id)),j&&i.jsxs("div",{className:"typing-indicator-enhanced",children:[i.jsx("div",{className:"typing-avatar",children:i.jsx("div",{className:"avatar-mini",children:I.fallbackEmoji})}),i.jsxs("div",{className:"typing-content",children:[i.jsxs("div",{className:"typing-text",children:[I.name,"正在思考中"]}),i.jsxs("div",{className:"typing-dots",children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]})]})]}),i.jsx("div",{ref:E})]})}),U.length<=1&&i.jsxs("div",{className:"quick-suggestions-enhanced",children:[i.jsx("div",{className:"suggestions-title",children:"💭 快速开始对话"}),i.jsx("div",{className:"suggestions-grid",children:Mu().slice(0,4).map(($,Ce)=>i.jsx("button",{className:"suggestion-pill",onClick:()=>c($),children:$},Ce))})]}),i.jsxs("div",{className:"input-area-enhanced",children:[i.jsxs("div",{className:"input-container-enhanced",children:[i.jsx("textarea",{ref:P,value:o,onChange:$=>c($.target.value),onKeyPress:En,placeholder:`与${I.name}分享您的心声...`,className:"message-input-enhanced",rows:1,disabled:!Ee}),i.jsxs("div",{className:"input-actions",style:{display:"flex",gap:"8px",alignItems:"flex-end"},children:[h&&i.jsx("button",{onClick:Cu,className:`voice-btn ${p?"listening":""}`,title:p?"停止录音":"开始语音输入",style:{width:"44px",height:"44px",borderRadius:"50%",background:p?"linear-gradient(135deg, #ef4444, #dc2626)":"linear-gradient(135deg, #10b981, #059669)",border:"none",color:"#ffffff",fontSize:"1.2rem",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,animation:p?"voicePulse 1s ease-in-out infinite":"none"},children:p?"🔴":"🎤"}),i.jsx("button",{onClick:We,disabled:!o.trim()||x||!Ee,className:"send-btn-enhanced",children:x?i.jsx("div",{className:"loading-spinner"}):i.jsx("span",{className:"send-icon",children:"💬"})})]})]}),M&&i.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#fca5a5",fontSize:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("span",{children:M}),i.jsx("button",{onClick:re,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"4px",color:"#fca5a5",padding:"4px 8px",fontSize:"0.7rem",cursor:"pointer"},children:"重试"})]})]})]})},jh=()=>{const[t,e]=S.useState("guanyin"),[n,s]=S.useState(""),{messages:r,isLoading:a,isTyping:l,error:o,sendMessage:c,clearHistory:u,isAPIConfigured:f}=ku(),g=async()=>{n.trim()&&(await c(n.trim(),t),s(""))},y=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),g())};return f?i.jsxs("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"20px",border:"1px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#fff"},children:[i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("h2",{children:"🙏 与神仙对话"}),i.jsx("p",{children:"选择一位神仙开始对话："}),i.jsx("select",{value:t,onChange:k=>e(k.target.value),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",marginRight:"10px"},children:Object.entries(ft).map(([k,C])=>i.jsx("option",{value:k,children:C.name},k))}),i.jsx("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"清空对话"})]}),o&&i.jsxs("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"6px",color:"#dc2626",marginBottom:"20px"},children:["错误：",o]}),i.jsxs("div",{style:{height:"400px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"15px",marginBottom:"20px",backgroundColor:"#f9fafb"},children:[r.length===0&&i.jsxs("div",{style:{textAlign:"center",color:"#6b7280",marginTop:"150px"},children:["开始与",ft[t].name,"对话吧！"]}),r.map(k=>{var C;return i.jsx("div",{style:{marginBottom:"15px",display:"flex",justifyContent:k.role==="user"?"flex-end":"flex-start"},children:i.jsxs("div",{style:{maxWidth:"70%",padding:"12px 16px",borderRadius:"18px",backgroundColor:k.role==="user"?"#3b82f6":"#f3f4f6",color:k.role==="user"?"white":"#374151"},children:[k.role==="deity"&&i.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"5px"},children:((C=ft[k.deityId])==null?void 0:C.name)||"神仙"}),i.jsxs("div",{style:{whiteSpace:"pre-wrap"},children:[k.content,k.isTyping&&i.jsx("span",{style:{animation:"blink 1s infinite"},children:"|"})]})]})},k.id)}),a&&i.jsxs("div",{style:{textAlign:"center",color:"#6b7280"},children:[ft[t].name,"正在思考中..."]})]}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsx("textarea",{value:n,onChange:k=>s(k.target.value),onKeyPress:y,placeholder:`向${ft[t].name}请教...`,style:{flex:1,padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",resize:"vertical",minHeight:"80px",fontFamily:"inherit"},disabled:a}),i.jsx("button",{onClick:g,disabled:!n.trim()||a,style:{padding:"12px 24px",backgroundColor:!n.trim()||a?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:!n.trim()||a?"not-allowed":"pointer",fontWeight:"600"},children:a?"发送中...":"发送"})]})]}):i.jsxs("div",{style:{padding:"20px",backgroundColor:"#fffbeb",border:"1px solid #fbbf24",borderRadius:"8px",margin:"20px"},children:[i.jsx("h3",{children:"🔑 需要配置 DeepSeek API"}),i.jsx("p",{children:"请按照以下步骤配置API密钥："}),i.jsx("pre",{style:{backgroundColor:"#f3f4f6",padding:"15px",borderRadius:"5px",fontSize:"12px",overflowX:"auto"},children:oh})]})},wh="https://bless.top/wp-json/bracelet-info/v1";class As{static async getBraceletInfo(e){try{const n=await fetch(`${wh}/bracelet/${e}`);if(!n.ok)throw new Error(`API请求失败: ${n.status} ${n.statusText}`);const s=await n.json();return{id:e,owner:s.owner||"未知主人",chipId:s.chipId||e,material:s.material||"天然材质",beadCount:s.beadCount||"108",level:s.level||"初级",imageUrl:s.imageUrl||"",consecrationDate:s.consecrationDate||"",consecrationTemple:s.consecrationTemple||"",consecrationHall:s.consecrationHall||"",consecrationMaster:s.consecrationMaster||"",consecrationVideo:s.consecrationVideo||"",lampOfferingVideo:s.lampOfferingVideo||"",description:s.description,energyLevel:s.energyLevel||100,isActive:s.isActive!==!1}}catch(n){throw console.error("获取手串信息失败:",n),new Error("获取法宝信息失败，请检查网络连接或稍后重试")}}static async verifyBraceletId(e){try{return await this.getBraceletInfo(e),!0}catch{return!1}}static async getBraceletStatus(e){try{const n=await this.verifyBraceletId(e),s=Math.random()>.3;return n&&s?"connected":"disconnected"}catch{return"disconnected"}}}class gr{static getMeritRecord(e){const n=`${this.STORAGE_PREFIX}-${e}`,s=localStorage.getItem(n);if(s)try{const r=JSON.parse(s);return{count:r.count||0,dailyCount:r.dailyCount||0,totalDays:r.totalDays||0,lastUpdated:new Date(r.lastUpdated||Date.now())}}catch(r){console.error("解析功德记录失败:",r)}return{count:0,dailyCount:0,totalDays:0,lastUpdated:new Date}}static addMerit(e,n=1){const s=this.getMeritRecord(e),r=new Date,a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),l=new Date(s.lastUpdated.getFullYear(),s.lastUpdated.getMonth(),s.lastUpdated.getDate()),o=a.getTime()!==l.getTime(),c={count:s.count+n,dailyCount:o?n:s.dailyCount+n,totalDays:o?s.totalDays+1:s.totalDays,lastUpdated:r},u=`${this.STORAGE_PREFIX}-${e}`;return localStorage.setItem(u,JSON.stringify(c)),{...c,isNewDay:o}}static getMeritLevel(e){const n=[{level:"初心修行",color:"#fed7d7",min:0,max:9},{level:"精进行者",color:"#feebc8",min:10,max:49},{level:"虔诚修士",color:"#c6f6d5",min:50,max:149},{level:"智慧居士",color:"#bee3f8",min:150,max:299},{level:"慈悲菩萨",color:"#d9f2ff",min:300,max:499},{level:"圆满大师",color:"#ffd6cc",min:500,max:1/0}],s=n.find(l=>e>=l.min&&e<=l.max)||n[0],r=n[n.indexOf(s)+1],a=r?Math.round((e-s.min)/(r.min-s.min)*100):100;return{level:s.level,color:s.color,nextLevelAt:(r==null?void 0:r.min)||s.max,progress:Math.min(a,100)}}}Z(gr,"STORAGE_PREFIX","divine-friend-merit");const kh=t=>{const[e,n]=S.useState(null),[s,r]=S.useState("disconnected"),[a,l]=S.useState(null),[o,c]=S.useState(!1),[u,f]=S.useState(null),g=S.useCallback(async v=>{if(!v.trim()){f("请输入有效的手串编号");return}c(!0),f(null),r("verifying");try{const _=await As.getBraceletInfo(v);n(_);const h=await As.getBraceletStatus(v);r(h);const m=gr.getMeritRecord(v);l({id:`merit-${v}`,braceletId:v,count:m.count,lastUpdated:m.lastUpdated,dailyCount:m.dailyCount,totalDays:m.totalDays}),localStorage.setItem("divine-friend-last-bracelet-id",v)}catch(_){console.error("手串验证失败:",_),f(_ instanceof Error?_.message:"手串验证失败"),r("error"),n(null),l(null)}finally{c(!1)}},[]),y=S.useCallback((v=1)=>{if(!e){f("请先验证手串");return}try{const _=gr.addMerit(e.id,v);l(h=>({id:(h==null?void 0:h.id)||`merit-${e.id}`,braceletId:e.id,count:_.count,lastUpdated:_.lastUpdated,dailyCount:_.dailyCount,totalDays:_.totalDays})),"vibrate"in navigator&&navigator.vibrate([50,50,50])}catch(_){console.error("添加功德失败:",_),f("添加功德失败")}},[e]),k=S.useCallback(async()=>{if(e)try{const v=await As.getBraceletStatus(e.id);r(v)}catch(v){console.error("刷新状态失败:",v),r("error")}},[e]),C=S.useCallback(()=>{f(null)},[]);return S.useEffect(()=>{(async()=>{const _=t||localStorage.getItem("divine-friend-last-bracelet-id");_&&await g(_)})()},[t,g]),S.useEffect(()=>{if(!e)return;const v=setInterval(async()=>{if(s==="connected")try{const _=await As.getBraceletStatus(e.id);_!==s&&r(_)}catch{r("disconnected")}},3e4);return()=>clearInterval(v)},[e,s]),{braceletInfo:e,status:s,meritRecord:a,loading:o,error:u,verifyBracelet:g,addMerit:y,refreshStatus:k,clearError:C}};class ea{static isSupported(){return"NDEFReader"in window}static async checkNFCAvailability(){if(!this.isSupported())return{available:!1,message:"您的设备不支持NFC功能"};try{return(await navigator.permissions.query({name:"nfc"})).state==="denied"?{available:!1,message:"NFC权限被拒绝，请在设置中开启"}:{available:!0,message:"NFC功能可用"}}catch(e){return console.error("NFC检查失败:",e),{available:!1,message:"NFC功能检查失败"}}}static async readNFCTag(){try{const e=await this.checkNFCAvailability();if(!e.available)return{success:!1,error:e.message};const n=new window.NDEFReader;return new Promise((s,r)=>{const a=setTimeout(()=>{s({success:!1,error:"读取超时，请将手串贴近设备重试"})},3e4);n.addEventListener("error",()=>{clearTimeout(a),s({success:!1,error:"读取NFC标签时发生错误"})}),n.addEventListener("reading",({message:l})=>{clearTimeout(a);try{const o=l.records[0];if(o&&o.recordType==="text"){const u=new TextDecoder(o.encoding||"utf-8").decode(o.data);s({success:!0,braceletId:u.trim()})}else s({success:!1,error:"无法解析手串信息，请确认标签格式正确"})}catch(o){console.error("解析NFC数据失败:",o),s({success:!1,error:"解析手串信息失败"})}}),n.scan().then(()=>{console.log("NFC扫描已启动，请将手串贴近设备...")}).catch(l=>{clearTimeout(a),console.error("NFC扫描启动失败:",l),s({success:!1,error:"启动NFC扫描失败"})})})}catch(e){return console.error("NFC读取失败:",e),{success:!1,error:"NFC读取功能异常"}}}static async writeNFCTag(e){try{const n=await this.checkNFCAvailability();if(!n.available)throw new Error(n.message);return await new window.NDEFReader().write({records:[{recordType:"text",data:e}]}),!0}catch(n){return console.error("NFC写入失败:",n),!1}}}class ta{static async checkCameraPermission(){try{return!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?{available:!1,message:"您的设备不支持摄像头功能"}:(await navigator.permissions.query({name:"camera"})).state==="denied"?{available:!1,message:"摄像头权限被拒绝，请在设置中开启"}:{available:!0,message:"摄像头功能可用"}}catch(e){return console.error("摄像头权限检查失败:",e),{available:!1,message:"摄像头功能检查失败"}}}static async scanQRCode(){try{const e=await this.checkCameraPermission();return e.available?new Promise(n=>{setTimeout(()=>{n({success:!1,error:"扫码功能正在开发中，请使用手动输入"})},1e3)}):{success:!1,error:e.message}}catch(e){return console.error("二维码扫描失败:",e),{success:!1,error:"二维码扫描功能异常"}}}static generateQRCode(e){const n={type:"divine-friend-bracelet",id:e,timestamp:Date.now()};return JSON.stringify(n)}static parseQRCode(e){try{const n=JSON.parse(e);return n.type==="divine-friend-bracelet"&&n.id?{braceletId:n.id,valid:!0}:{valid:!1}}catch{return/^[A-Za-z0-9\-_]+$/.test(e.trim())?{braceletId:e.trim(),valid:!0}:{valid:!1}}}}class Sh{static async getBestVerificationMethod(){return(await ea.checkNFCAvailability()).available?{method:"nfc",message:"推荐使用NFC感应验证，更快更准确"}:(await ta.checkCameraPermission()).available?{method:"qr",message:"推荐使用扫码验证，简单便捷"}:{method:"manual",message:"请手动输入手串编号进行验证"}}static async performVerification(e,n){switch(e){case"nfc":return await ea.readNFCTag();case"qr":return await ta.scanQRCode();case"manual":return!n||!n.trim()?{success:!1,error:"请输入有效的手串编号"}:{success:!0,braceletId:n.trim()};default:return{success:!1,error:"不支持的验证方式"}}}}class pn{static recordEnergyChange(e,n,s,r){const a={id:`energy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,braceletId:e,timestamp:new Date,energyLevel:s,activity:n,...r};return this.saveEnergyRecord(a),this.updateCurrentEnergyLevel(e,s),a}static getEnergyHistory(e,n=30){const s=`${this.STORAGE_PREFIX}-history-${e}`,r=localStorage.getItem(s);if(!r)return[];try{const a=JSON.parse(r),l=new Date(Date.now()-n*24*60*60*1e3);return a.filter(o=>new Date(o.timestamp)>=l).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}catch(a){return console.error("解析能量历史失败:",a),[]}}static getCurrentEnergyLevel(e){const n=`${this.STORAGE_PREFIX}-current-${e}`,s=localStorage.getItem(n);if(!s)return 100;try{return JSON.parse(s).level||100}catch(r){return console.error("获取当前能量失败:",r),100}}static calculateWearingEnergyGain(e,n){const a={daily:1,meditation:2.5,work:.8,sleep:.5,ceremony:3}[n]||1;return Math.min(e*.1*a,20)}static startWearingSession(e,n,s){const r=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:r,braceletId:e,startTime:new Date,activity:n,location:s,duration:0,energyGain:0},l=`${this.STORAGE_PREFIX}-session-${e}`;return localStorage.setItem(l,JSON.stringify(a)),r}static endWearingSession(e){const n=`${this.STORAGE_PREFIX}-session-${e}`,s=localStorage.getItem(n);if(!s)return null;try{const r=JSON.parse(s),a=new Date,l=Math.floor((a.getTime()-new Date(r.startTime).getTime())/6e4),o=this.calculateWearingEnergyGain(l,r.activity),c={...r,startTime:new Date(r.startTime),endTime:a,duration:l,energyGain:o},u=this.getCurrentEnergyLevel(e);return this.recordEnergyChange(e,"wear",Math.min(u+o,100),{duration:l,location:r.location,notes:`${r.activity}佩戴，获得${o.toFixed(1)}能量`}),this.saveWearingSession(c),localStorage.removeItem(n),c}catch(r){return console.error("结束佩戴会话失败:",r),null}}static simulateEnergyDecay(e){const n=this.getCurrentEnergyLevel(e),s=this.getLastEnergyUpdate(e),a=Math.floor((new Date().getTime()-s.getTime())/(60*60*1e3));if(a<1)return n;const l=.5+Math.random()*.5,o=Math.min(a*l,20),c=Math.max(n-o,0);return c!==n&&this.recordEnergyChange(e,"wear",c,{notes:`自然消耗 ${o.toFixed(1)} 能量 (${a}小时)`}),c}static saveEnergyRecord(e){const n=`${this.STORAGE_PREFIX}-history-${e.braceletId}`,s=localStorage.getItem(n);let r=[];if(s)try{r=JSON.parse(s)}catch(a){console.error("解析现有记录失败:",a)}r.push(e),r.length>100&&(r=r.slice(-100)),localStorage.setItem(n,JSON.stringify(r))}static updateCurrentEnergyLevel(e,n){const s=`${this.STORAGE_PREFIX}-current-${e}`,r={level:n,lastUpdated:new Date().toISOString()};localStorage.setItem(s,JSON.stringify(r))}static getLastEnergyUpdate(e){const n=`${this.STORAGE_PREFIX}-current-${e}`,s=localStorage.getItem(n);if(!s)return new Date(Date.now()-24*60*60*1e3);try{const r=JSON.parse(s);return new Date(r.lastUpdated||Date.now()-24*60*60*1e3)}catch{return new Date(Date.now()-24*60*60*1e3)}}static saveWearingSession(e){const n=`${this.STORAGE_PREFIX}-sessions-${e.braceletId}`,s=localStorage.getItem(n);let r=[];if(s)try{r=JSON.parse(s)}catch(a){console.error("解析现有会话失败:",a)}r.push(e),r.length>50&&(r=r.slice(-50)),localStorage.setItem(n,JSON.stringify(r))}}Z(pn,"STORAGE_PREFIX","divine-friend-energy");class Su{static recordConsecration(e){const n={...e,id:`consecration-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};return this.saveConsecrationRecord(n),pn.recordEnergyChange(n.braceletId,"consecration",100,{location:n.temple,notes:`${n.master}法师主持开光仪式，能量提升${n.energyBoost}点`}),n}static getConsecrationRecords(e){const n=`${this.STORAGE_PREFIX}-${e}`,s=localStorage.getItem(n);if(!s)return[];try{return JSON.parse(s).sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(r){return console.error("解析开光记录失败:",r),[]}}static getLatestConsecration(e){const n=this.getConsecrationRecords(e);return n.length>0?n[0]:null}static validateConsecration(e){const n=this.getLatestConsecration(e);if(!n)return{isValid:!1,daysAge:0,energyLevel:0,recommendation:"建议进行开光仪式以激活法宝能量"};const s=Math.floor((Date.now()-new Date(n.date).getTime())/(24*60*60*1e3)),r=pn.getCurrentEnergyLevel(e);let a=!0,l;return s>365?(a=!1,l="开光已超过一年，建议重新开光以恢复最佳效果"):r<30?l="能量较低，建议增加佩戴时间或进行能量充值":s>180&&(l="开光已超过半年，可考虑进行能量加持仪式"),{isValid:a,daysAge:s,energyLevel:r,recommendation:l}}static saveConsecrationRecord(e){const n=`${this.STORAGE_PREFIX}-${e.braceletId}`,s=localStorage.getItem(n);let r=[];if(s)try{r=JSON.parse(s)}catch(a){console.error("解析现有开光记录失败:",a)}r.push(e),localStorage.setItem(n,JSON.stringify(r))}}Z(Su,"STORAGE_PREFIX","divine-friend-consecration");class oo{static analyzeEnergyTrend(e,n=7){const s=pn.getEnergyHistory(e,n);if(s.length<2)return{trend:"stable",averageLevel:pn.getCurrentEnergyLevel(e),recommendations:["建议增加佩戴时间以积累更多能量数据"]};const r=s.reduce((u,f)=>u+f.energyLevel,0)/s.length,a=s.slice(0,Math.floor(s.length/2)).reduce((u,f)=>u+f.energyLevel,0)/Math.floor(s.length/2),l=s.slice(Math.floor(s.length/2)).reduce((u,f)=>u+f.energyLevel,0)/Math.ceil(s.length/2);let o;a-l>5?o="increasing":l-a>5?o="decreasing":o="stable";const c=[];return r<50?(c.push("能量水平较低，建议增加佩戴时间"),c.push("可尝试冥想或诵经来提升能量")):r<80?c.push("能量水平良好，保持当前的佩戴习惯"):c.push("能量水平优秀，法宝与您的连接很好"),o==="decreasing"&&c.push("注意能量下降趋势，检查是否佩戴时间不足"),{trend:o,averageLevel:Math.round(r*10)/10,recommendations:c}}static generatePersonalizedAdvice(e){const n=pn.getCurrentEnergyLevel(e),s=this.analyzeEnergyTrend(e),r=Su.validateConsecration(e),a=[];return n>=90?a.push("✨ 能量充沛，是处理重要事务的好时机"):n>=70?a.push("🌟 能量良好，适合日常活动和轻度冥想"):n>=50?a.push("💫 能量中等，建议增加佩戴时间或进行短暂冥想"):a.push("🔋 能量较低，建议多佩戴并减少负面情绪"),s.trend==="increasing"?a.push("📈 能量呈上升趋势，继续保持良好习惯"):s.trend==="decreasing"&&a.push("📉 注意能量下降，可能需要调整生活节奏"),r.recommendation&&a.push(`🏛️ ${r.recommendation}`),a}}const Eh=({onNavigate:t})=>{const[e,n]=S.useState(""),[s,r]=S.useState(!1),[a,l]=S.useState(!1),[o,c]=S.useState(!1),[u,f]=S.useState("manual"),[g,y]=S.useState(!1),[k,C]=S.useState(!1),{braceletInfo:v,status:_,meritRecord:h,loading:m,error:p,verifyBracelet:N,addMerit:E,refreshStatus:P,clearError:d}=kh(),x=`
    观自在菩萨，行深般若波罗蜜多时，照见五蕴皆空，度一切苦厄。
    舍利子，色不异空，空不异色；色即是空，空即是色；受想行识，亦复如是。
    舍利子，是诸法空相，不生不灭，不垢不净，不增不减。
    是故空中无色，无受想行识；无眼耳鼻舌身意，无色声香味触法；
    无眼界，乃至无意识界；无无明，亦无无明尽，乃至无老死，亦无老死尽；
    无苦集灭道，无智亦无得，以无所得故，菩提萨埵，依般若波罗蜜多故，
    心无罣碍，无罣碍故，无有恐怖，远离颠倒梦想，究竟涅槃。
    三世诸佛，依般若波罗蜜多故，得阿耨多罗三藐三菩提。
    故知般若波罗蜜多，是大神咒，是大明咒，是无上咒，是无等等咒，
    能除一切苦，真实不虚。
    故说般若波罗蜜多咒，即说咒曰：揭谛，揭谛，波罗揭谛，波罗僧揭谛，菩提萨婆诃。
  `,j=async()=>{if(!(u==="manual"&&!e.trim())){y(!0);try{const D=await Sh.performVerification(u,e.trim());D.success&&D.braceletId?(await N(D.braceletId),r(!1),n("")):console.error("验证失败:",D.error)}catch(D){console.error("验证过程出错:",D)}finally{y(!1)}}},M=async()=>{f("nfc"),y(!0);try{const D=await ea.readNFCTag();D.success&&D.braceletId&&(await N(D.braceletId),r(!1))}catch(D){console.error("NFC验证失败:",D)}finally{y(!1)}},z=async()=>{f("qr"),y(!0);try{const D=await ta.scanQRCode();D.success&&D.braceletId&&(await N(D.braceletId),r(!1))}catch(D){console.error("扫码验证失败:",D)}finally{y(!1)}},pe=()=>{E(1),l(!1),"vibrate"in navigator&&navigator.vibrate([100,50,100,50,100])},re=D=>{switch(D){case"connected":return"#10b981";case"disconnected":return"#ef4444";case"verifying":return"#f59e0b";case"error":return"#dc2626";default:return"#6b7280"}},Ee=D=>{switch(D){case"connected":return"已连接";case"disconnected":return"未连接";case"verifying":return"验证中";case"error":return"连接错误";default:return"未知状态"}},w=()=>h?gr.getMeritLevel(h.count):null;return v?i.jsxs("div",{className:"bracelet-page",children:[i.jsx("div",{className:"bracelet-status-card",children:i.jsxs("div",{className:"status-header",children:[i.jsxs("div",{className:"bracelet-image-container",children:[v.imageUrl?i.jsx("img",{src:v.imageUrl,alt:`${v.owner}的手串`,className:"bracelet-image",loading:"lazy"}):i.jsx("div",{className:"bracelet-placeholder",children:i.jsx("span",{className:"bracelet-icon-large",children:"📿"})}),i.jsx("div",{className:"connection-indicator",style:{backgroundColor:re(_)},children:i.jsx("span",{className:"connection-pulse"})})]}),i.jsxs("div",{className:"bracelet-info",children:[i.jsxs("h2",{className:"bracelet-owner",children:[v.owner,"的法宝"]}),i.jsxs("div",{className:"bracelet-details",children:[i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-label",children:"芯片编号:"}),i.jsx("span",{className:"detail-value",children:v.chipId})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-label",children:"材质:"}),i.jsx("span",{className:"detail-value",children:v.material})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-label",children:"佛珠:"}),i.jsxs("span",{className:"detail-value",children:[v.beadCount,"颗"]})]})]}),i.jsxs("div",{className:"status-indicator",children:[i.jsx("span",{className:"status-dot",style:{backgroundColor:re(_)}}),i.jsx("span",{className:"status-text",children:Ee(_)}),i.jsx("button",{className:"refresh-button",onClick:P,title:"刷新状态",children:"🔄"})]})]})]})}),i.jsxs("div",{className:"energy-analysis-card",children:[i.jsxs("div",{className:"energy-header",children:[i.jsx("h3",{className:"energy-title",children:"能量状态分析"}),i.jsx("button",{className:"energy-toggle",onClick:()=>C(!k),children:k?"简化":"详情"})]}),i.jsxs("div",{className:"current-energy-display",children:[i.jsxs("div",{className:"energy-level-circle",children:[i.jsxs("svg",{width:"80",height:"80",className:"energy-progress-ring",children:[i.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"6"}),i.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:"#ffd700",strokeWidth:"6",strokeDasharray:`${2*Math.PI*35}`,strokeDashoffset:`${2*Math.PI*35*(1-((v==null?void 0:v.energyLevel)||100)/100)}`,transform:"rotate(-90 40 40)",className:"energy-progress-stroke"})]}),i.jsxs("div",{className:"energy-level-text",children:[i.jsxs("div",{className:"energy-percentage",children:[(v==null?void 0:v.energyLevel)||100,"%"]}),i.jsx("div",{className:"energy-label",children:"能量"})]})]}),i.jsxs("div",{className:"energy-status-text",children:[i.jsx("div",{className:"energy-description",children:(()=>{const D=(v==null?void 0:v.energyLevel)||100;return D>=90?"✨ 能量充沛，法力强大":D>=70?"🌟 能量良好，状态稳定":D>=50?"💫 能量中等，需要补充":"🔋 能量不足，急需充能"})()}),k&&i.jsx("div",{className:"energy-trend",children:(()=>{const D=oo.analyzeEnergyTrend((v==null?void 0:v.id)||"");return i.jsxs("div",{className:"trend-info",children:[i.jsxs("div",{className:"trend-indicator",children:["趋势: ",D.trend==="increasing"?"📈 上升":D.trend==="decreasing"?"📉 下降":"➡️ 稳定"]}),i.jsxs("div",{className:"trend-average",children:["7日平均: ",D.averageLevel.toFixed(1),"%"]})]})})()})]})]}),k&&i.jsxs("div",{className:"energy-recommendations",children:[i.jsx("h4",{className:"recommendations-title",children:"个性化建议"}),i.jsx("div",{className:"recommendations-list",children:oo.generatePersonalizedAdvice((v==null?void 0:v.id)||"").map((D,B)=>i.jsx("div",{className:"recommendation-item",children:D},B))})]})]}),h&&i.jsxs("div",{className:"merit-card",children:[i.jsxs("div",{className:"merit-header",children:[i.jsx("h3",{className:"merit-title",children:"修行功德"}),i.jsx("div",{className:"merit-level",children:(()=>{const D=w();return D?i.jsx("div",{className:"level-badge",style:{backgroundColor:D.color},children:D.level}):null})()})]}),i.jsxs("div",{className:"merit-stats",children:[i.jsxs("div",{className:"stat-item primary",children:[i.jsx("div",{className:"stat-number",children:h.count}),i.jsx("div",{className:"stat-label",children:"总功德"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-number",children:h.dailyCount}),i.jsx("div",{className:"stat-label",children:"今日修持"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("div",{className:"stat-number",children:h.totalDays}),i.jsx("div",{className:"stat-label",children:"修行天数"})]})]}),(()=>{const D=w();return D&&D.progress<100?i.jsxs("div",{className:"merit-progress",children:[i.jsxs("div",{className:"progress-label",children:["距离下一级还需 ",D.nextLevelAt-h.count," 功德"]}),i.jsx("div",{className:"progress-bar",children:i.jsx("div",{className:"progress-fill",style:{width:`${D.progress}%`}})})]}):null})()]}),i.jsxs("div",{className:"sutra-practice-card",children:[i.jsxs("div",{className:"practice-header",children:[i.jsx("h3",{className:"practice-title",children:"修持心经"}),i.jsx("p",{className:"practice-subtitle",children:"诵读心经，增长智慧，积累功德"})]}),o&&i.jsx("div",{className:"sutra-text-container",children:i.jsx("div",{className:"sutra-text",children:x.trim()})}),i.jsxs("div",{className:"practice-controls",children:[i.jsx("button",{className:"practice-button secondary",onClick:()=>c(!o),children:o?"收起经文":"显示经文"}),i.jsx("button",{className:`practice-button primary ${a?"playing":""}`,onClick:()=>l(!a),children:a?"⏸️ 暂停修持":"▶️ 开始修持"}),i.jsx("button",{className:"practice-button success",onClick:pe,disabled:!a,children:"✅ 完成修持 +1"})]})]}),v.consecrationDate&&i.jsxs("div",{className:"consecration-card",children:[i.jsx("div",{className:"consecration-header",children:i.jsx("h3",{className:"consecration-title",children:"开光信息"})}),i.jsxs("div",{className:"consecration-details",children:[i.jsxs("div",{className:"consecration-item",children:[i.jsx("span",{className:"consecration-icon",children:"📅"}),i.jsxs("div",{children:[i.jsx("div",{className:"consecration-label",children:"开光时间"}),i.jsx("div",{className:"consecration-value",children:v.consecrationDate})]})]}),v.consecrationTemple&&i.jsxs("div",{className:"consecration-item",children:[i.jsx("span",{className:"consecration-icon",children:"🏛️"}),i.jsxs("div",{children:[i.jsx("div",{className:"consecration-label",children:"开光寺院"}),i.jsx("div",{className:"consecration-value",children:v.consecrationTemple})]})]}),v.consecrationMaster&&i.jsxs("div",{className:"consecration-item",children:[i.jsx("span",{className:"consecration-icon",children:"👨‍🦲"}),i.jsxs("div",{children:[i.jsx("div",{className:"consecration-label",children:"主持法师"}),i.jsx("div",{className:"consecration-value",children:v.consecrationMaster})]})]})]}),v.consecrationVideo&&i.jsxs("div",{className:"video-section",children:[i.jsx("h4",{className:"video-title",children:"开光仪式视频"}),i.jsxs("video",{controls:!0,className:"consecration-video",poster:v.imageUrl,children:[i.jsx("source",{src:v.consecrationVideo,type:"video/mp4"}),"您的浏览器不支持视频播放"]})]})]}),i.jsxs("div",{className:"bracelet-actions",children:[i.jsx("button",{className:"action-button secondary",onClick:()=>{n(""),r(!0)},children:"更换手串"}),i.jsx("button",{className:"action-button primary",onClick:()=>t("chat"),children:"与神仙对话"})]}),s&&i.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:i.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"更换手串"}),i.jsx("button",{className:"modal-close",onClick:()=>r(!1),children:"✕"})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("div",{className:"input-group",children:[i.jsx("label",{className:"input-label",children:"新的手串编号"}),i.jsx("input",{type:"text",value:e,onChange:D=>n(D.target.value),placeholder:"请输入手串编号",className:"bracelet-input"})]})}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{className:"modal-button secondary",onClick:()=>r(!1),children:"取消"}),i.jsx("button",{className:"modal-button primary",onClick:j,disabled:m||!e.trim(),children:m?"验证中...":"验证"})]})]})})]}):i.jsx("div",{className:"bracelet-page",children:i.jsx("div",{className:"bracelet-hero-section",children:i.jsxs("div",{className:"zen-card-main",children:[i.jsxs("div",{className:"card-header",children:[i.jsx("div",{className:"bracelet-icon",children:"📿"}),i.jsx("h1",{className:"page-title",children:"我的法宝手串"}),i.jsx("p",{className:"page-subtitle",children:"验证您的开光手串，开启修行之路"})]}),p&&i.jsx("div",{className:"error-message",children:i.jsxs("div",{className:"error-content",children:[i.jsx("span",{className:"error-icon",children:"⚠️"}),i.jsx("span",{children:p}),i.jsx("button",{onClick:d,className:"error-close",children:"✕"})]})}),i.jsxs("div",{className:"verification-section",children:[i.jsxs("div",{className:"input-group",children:[i.jsx("label",{className:"input-label",children:"手串编号"}),i.jsx("input",{type:"text",value:e,onChange:D=>n(D.target.value),placeholder:"请输入您的手串编号",className:"bracelet-input",disabled:m})]}),i.jsx("button",{className:`verify-button ${m?"loading":""}`,onClick:j,disabled:m||!e.trim(),children:m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"loading-spinner"}),"验证中..."]}):"验证手串"}),i.jsxs("div",{className:"verification-methods",children:[i.jsx("p",{className:"methods-title",children:"其他验证方式"}),i.jsxs("div",{className:"methods-grid",children:[i.jsxs("button",{className:"method-button",onClick:M,disabled:g,children:[i.jsx("span",{className:"method-icon",children:"📱"}),i.jsx("span",{children:"NFC感应"}),i.jsx("small",{children:g&&u==="nfc"?"读取中...":"快速验证"})]}),i.jsxs("button",{className:"method-button",onClick:z,disabled:g,children:[i.jsx("span",{className:"method-icon",children:"📷"}),i.jsx("span",{children:"扫码验证"}),i.jsx("small",{children:g&&u==="qr"?"扫描中...":"扫码识别"})]})]})]})]})]})})})};class Jt{static getGrowthProfile(e="default"){const n=`${this.STORAGE_PREFIX}-profile-${e}`,s=localStorage.getItem(n);if(s)try{const a=JSON.parse(s);return{...a,startDate:new Date(a.startDate),lastActiveDate:new Date(a.lastActiveDate)}}catch(a){console.error("解析成长档案失败:",a)}const r={userId:e,startDate:new Date,currentLevel:1,totalExperience:0,companionshipDays:1,lastActiveDate:new Date,preferences:{focusAreas:["spiritual","wisdom","mindfulness"],reminderTime:"09:00",privacyLevel:"private",goalUpdateFrequency:"weekly"}};return this.saveGrowthProfile(r),r}static saveGrowthProfile(e){const n=`${this.STORAGE_PREFIX}-profile-${e.userId}`;localStorage.setItem(n,JSON.stringify(e))}static recordGrowthSession(e){const n={...e,id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};return this.saveGrowthSession(n),this.updateMetricsFromSession(n),this.updateProfileFromSession(n),n}static getGrowthMetrics(e="default"){const n=`${this.STORAGE_PREFIX}-metrics-${e}`,s=localStorage.getItem(n);if(s)try{return JSON.parse(s).map(a=>({...a,historicalData:a.historicalData.map(l=>({...l,date:new Date(l.date)}))}))}catch(r){console.error("解析成长指标失败:",r)}return this.initializeDefaultMetrics(e)}static getMilestones(e="default"){const n=`${this.STORAGE_PREFIX}-milestones-${e}`,s=localStorage.getItem(n);if(s)try{return JSON.parse(s).map(a=>({...a,unlockedAt:a.unlockedAt?new Date(a.unlockedAt):void 0}))}catch(r){console.error("解析里程碑失败:",r)}return this.initializeDefaultMilestones(e)}static unlockMilestone(e,n="default"){const s=this.getMilestones(n),r=s.find(c=>c.id===e);if(!r||r.isCompleted||!this.checkMilestoneRequirements(r,n))return null;r.isCompleted=!0,r.unlockedAt=new Date,this.saveMilestones(s,n);const l={id:`achievement-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:r.title,description:r.description,earnedAt:new Date,category:r.category,rarity:this.getMilestoneRarity(r.difficulty),shareCount:0,relatedMilestone:e};this.saveAchievement(l,n);const o=this.getGrowthProfile(n);return o.totalExperience+=this.getExperienceForMilestone(r.difficulty),o.currentLevel=this.calculateLevel(o.totalExperience),this.saveGrowthProfile(o),l}static generateGrowthInsights(e="default"){const n=this.getGrowthProfile(e),s=this.getGrowthMetrics(e),r=this.getRecentSessions(e,30),a=[],l=this.analyzeTrends(s,r);l&&a.push(l);const o=this.analyzeActivity(r,n);o&&a.push(o);const c=this.analyzeBalance(s);c&&a.push(c);const u=this.generatePredictions(n,s,r);return a.push(...u),a.sort((f,g)=>g.priority.localeCompare(f.priority))}static generatePersonalizedRecommendations(e="default"){const n=this.getGrowthProfile(e),s=this.getGrowthMetrics(e),r=this.getCompanionState(e),a=[],l=this.identifyWeakAreas(s);for(const c of l){const u=this.createAreaImprovementRecommendation(c,n,r);u&&a.push(u)}for(const c of n.preferences.focusAreas){const u=this.createInterestBasedRecommendation(c,n,s);u&&a.push(u)}const o=this.createTimeBasedRecommendation(n,s);return o&&a.push(o),a.slice(0,5)}static saveGrowthSession(e){const n=`${this.STORAGE_PREFIX}-sessions-${e.startTime.toDateString()}`,s=localStorage.getItem(n);let r=[];if(s)try{r=JSON.parse(s)}catch(a){console.error("解析会话记录失败:",a)}r.push(e),localStorage.setItem(n,JSON.stringify(r))}static updateMetricsFromSession(e){const n=this.getGrowthMetrics(),s=n.filter(r=>r.area===e.focusArea);for(const r of s){const a=this.calculateMetricImprovement(e,r);a>0&&(r.currentValue+=a,r.historicalData.push({date:e.startTime,value:r.currentValue,context:`${e.type}会话`,mood:e.mood.after}),r.historicalData.length>100&&(r.historicalData=r.historicalData.slice(-100)))}this.saveGrowthMetrics(n)}static initializeDefaultMetrics(e){const n=[{id:"spiritual-practice",area:"spiritual",name:"精神修行指数",description:"通过冥想、诵经等精神修行活动提升的指标",unit:"分",currentValue:0,targetValue:100,historicalData:[],trend:"stable",importance:5},{id:"wisdom-understanding",area:"wisdom",name:"智慧理解度",description:"对人生哲理和智慧教诲的理解程度",unit:"分",currentValue:0,targetValue:100,historicalData:[],trend:"stable",importance:4},{id:"compassion-level",area:"compassion",name:"慈悲心指数",description:"对他人和众生的慈悲关怀程度",unit:"分",currentValue:0,targetValue:100,historicalData:[],trend:"stable",importance:5},{id:"mindfulness-awareness",area:"mindfulness",name:"正念觉察力",description:"当下觉察和专注能力",unit:"分",currentValue:0,targetValue:100,historicalData:[],trend:"stable",importance:4}];return this.saveGrowthMetrics(n,e),n}static initializeDefaultMilestones(e){const n=[{id:"first-week",title:"相伴七日",description:"与神仙朋友相伴的第一周，建立了初步的信任和默契",category:"spiritual",requirements:[{type:"days_active",description:"连续活跃7天",target:7,current:0}],rewards:[{type:"title",name:"初心修行者",description:"踏上修行之路的第一步"},{type:"deity_message",name:"观音菩萨的祝福",description:"收到来自观音菩萨的特别祝福消息"}],isCompleted:!1,difficulty:"beginner",estimatedDays:7,icon:"🌱",backgroundStory:"每一段伟大的修行之路，都始于这样的七个日夜..."},{id:"meditation-master",title:"冥想小成",description:"通过持续的冥想修行，内心获得了宁静与智慧",category:"mindfulness",requirements:[{type:"total_sessions",description:"完成30次冥想会话",target:30,current:0},{type:"metric_value",description:"正念觉察力达到60分",target:60,current:0,metricId:"mindfulness-awareness"}],rewards:[{type:"badge",name:"静心禅师",description:"冥想修行的成就徽章",icon:"🧘"},{type:"unlock_feature",name:"高级冥想指导",description:"解锁更深层次的冥想练习"}],isCompleted:!1,difficulty:"intermediate",estimatedDays:30,icon:"🧘‍♂️",backgroundStory:"当心如止水，智慧之花便会在寂静中绽放..."},{id:"compassion-awakening",title:"慈悲觉醒",description:"慈悲心的觉醒，对众生生起真正的关怀和爱护",category:"compassion",requirements:[{type:"metric_value",description:"慈悲心指数达到80分",target:80,current:0,metricId:"compassion-level"},{type:"specific_action",description:"完成10次帮助他人的善行",target:10,current:0}],rewards:[{type:"title",name:"慈悲行者",description:"慈悲心觉醒的修行者"},{type:"special_content",name:"慈悲冥想法门",description:"获得专属的慈悲冥想指导内容"}],isCompleted:!1,difficulty:"advanced",estimatedDays:60,icon:"💖",backgroundStory:"慈悲不是同情，而是真正理解众生皆苦，并愿意为之付出..."}];return this.saveMilestones(n,e),n}static saveGrowthMetrics(e,n="default"){const s=`${this.STORAGE_PREFIX}-metrics-${n}`;localStorage.setItem(s,JSON.stringify(e))}static saveMilestones(e,n="default"){const s=`${this.STORAGE_PREFIX}-milestones-${n}`;localStorage.setItem(s,JSON.stringify(e))}static saveAchievement(e,n="default"){const s=`${this.STORAGE_PREFIX}-achievements-${n}`,r=localStorage.getItem(s);let a=[];if(r)try{a=JSON.parse(r)}catch(l){console.error("解析成就记录失败:",l)}a.push(e),localStorage.setItem(s,JSON.stringify(a))}static getCompanionState(e="default"){return{currentDeity:"guanyin",relationshipLevel:50,lastInteraction:new Date,personalityTraits:["thoughtful","patient"],preferredCommunicationStyle:"encouraging",specialMemories:[]}}static updateProfileFromSession(e){const n=this.getGrowthProfile();n.lastActiveDate=new Date,n.totalExperience+=Math.floor(e.duration/10),n.currentLevel=this.calculateLevel(n.totalExperience);const s=Math.floor((Date.now()-n.startDate.getTime())/(24*60*60*1e3));n.companionshipDays=s+1,this.saveGrowthProfile(n)}static calculateLevel(e){return Math.floor(e/100)+1}static checkMilestoneRequirements(e,n){return e.requirements.every(s=>s.current>=s.target)}static getMilestoneRarity(e){return{beginner:"common",intermediate:"rare",advanced:"epic",master:"legendary"}[e]}static getExperienceForMilestone(e){return{beginner:50,intermediate:150,advanced:300,master:500}[e]}static getRecentSessions(e,n){return[]}static calculateMetricImprovement(e,n){const s=e.quality*(e.duration/60),r=(e.mood.after-e.mood.before)*.5;return Math.max(s+r,0)}static analyzeTrends(e,n){if(e.length===0)return null;const s=e.filter(a=>a.trend==="increasing"),r=e.filter(a=>a.trend==="decreasing");return s.length>0?{id:`trend-${Date.now()}`,type:"trend",title:"成长趋势良好",content:`您在 ${s.map(a=>a.name).join("、")} 方面表现出色，继续保持！`,supportingData:{improvingAreas:s.length},confidence:.8,actionable:!0,priority:"medium",validUntil:new Date(Date.now()+7*24*60*60*1e3),relatedAreas:s.map(a=>a.area)}:r.length>1?{id:`trend-decline-${Date.now()}`,type:"challenge",title:"需要关注的领域",content:`在 ${r.map(a=>a.name).join("、")} 方面需要更多关注和练习`,supportingData:{decliningAreas:r.length},confidence:.9,actionable:!0,priority:"high",validUntil:new Date(Date.now()+14*24*60*60*1e3),relatedAreas:r.map(a=>a.area)}:null}static analyzeActivity(e,n){const s=Math.floor((Date.now()-n.lastActiveDate.getTime())/864e5);return s>3?{id:`activity-${Date.now()}`,type:"recommendation",title:"该回来修行了",content:`您已经 ${s} 天没有活跃了，神仙朋友很想念您呢！`,supportingData:{daysInactive:s},confidence:1,actionable:!0,priority:"high",validUntil:new Date(Date.now()+3*24*60*60*1e3),relatedAreas:["spiritual","mindfulness"]}:n.companionshipDays>30&&n.companionshipDays%30===0?{id:`milestone-celebration-${Date.now()}`,type:"celebration",title:"相伴里程碑！",content:`恭喜！您与神仙朋友已经相伴 ${n.companionshipDays} 天了，这是一个值得庆祝的成就！`,supportingData:{companionshipDays:n.companionshipDays},confidence:1,actionable:!1,priority:"medium",validUntil:new Date(Date.now()+7*24*60*60*1e3),relatedAreas:["spiritual"]}:null}static analyzeBalance(e){if(e.length<3)return null;e.reduce((r,a)=>r+a.currentValue/a.targetValue,0)/e.length;const n=Math.min(...e.map(r=>r.currentValue/r.targetValue)),s=Math.max(...e.map(r=>r.currentValue/r.targetValue));if(s-n>.3){const r=e.find(l=>l.currentValue/l.targetValue===n),a=e.find(l=>l.currentValue/l.targetValue===s);return{id:`balance-${Date.now()}`,type:"recommendation",title:"平衡发展建议",content:`建议在 ${r==null?void 0:r.name} 方面投入更多精力，以平衡您在 ${a==null?void 0:a.name} 上的优势`,supportingData:{imbalanceRatio:s-n},confidence:.7,actionable:!0,priority:"medium",validUntil:new Date(Date.now()+14*24*60*60*1e3),relatedAreas:[r==null?void 0:r.area,a==null?void 0:a.area].filter(Boolean)}}return null}static generatePredictions(e,n,s){const r=[];(e.currentLevel-1)*100;const l=e.currentLevel*100-e.totalExperience;l<=50&&r.push({id:`level-prediction-${Date.now()}`,type:"prediction",title:"即将升级！",content:`再获得 ${l} 经验值就可以升到 ${e.currentLevel+1} 级了！`,supportingData:{expNeeded:l,nextLevel:e.currentLevel+1},confidence:.9,actionable:!0,priority:"medium",validUntil:new Date(Date.now()+7*24*60*60*1e3),relatedAreas:["spiritual"]});const o=this.getMilestones().filter(c=>!c.isCompleted);for(const c of o.slice(0,2)){const u=c.requirements.reduce((f,g)=>f+g.current/g.target,0)/c.requirements.length;u>.7&&r.push({id:`milestone-prediction-${c.id}`,type:"prediction",title:`即将达成：${c.title}`,content:`您在 "${c.title}" 上已有 ${Math.round(u*100)}% 的进度，再加把劲就能达成了！`,supportingData:{milestoneId:c.id,progress:u},confidence:.8,actionable:!0,priority:"medium",validUntil:new Date(Date.now()+14*24*60*60*1e3),relatedAreas:[c.category]})}return r}static identifyWeakAreas(e){return e.filter(n=>n.currentValue<n.targetValue*.5).map(n=>n.area)}static createAreaImprovementRecommendation(e,n,s){const r={spiritual:"精神修养",wisdom:"智慧提升",compassion:"慈悲心",mindfulness:"正念觉察",discipline:"自律品格",relationships:"人际和谐",health:"身心健康",prosperity:"事业财运"},l={spiritual:{title:"晨间诵经练习",description:"每天早晨诵读心经或金刚经，培养内心宁静",estimatedTime:15,content:"推荐从心经开始，专注于每个字句的含义"},wisdom:{title:"智慧经典阅读",description:"阅读道德经或佛经中的智慧篇章，思考人生哲理",estimatedTime:20,content:"建议每天阅读一个章节，并记录感悟"},compassion:{title:"慈悲心冥想",description:"练习慈悲冥想，培养对众生的关爱之心",estimatedTime:10,content:"从对自己的慈悲开始，逐渐扩展到他人"},mindfulness:{title:"正念呼吸练习",description:"专注呼吸的正念练习，提升当下觉察力",estimatedTime:10,content:"每次练习专注于呼吸的感受，观察念头的来去"}}[e];return l?{id:`improvement-${e}-${Date.now()}`,type:"practice",title:l.title,description:l.description,estimatedTime:l.estimatedTime,difficulty:2,expectedBenefit:`提升${r[e]}能力`,relatedAreas:[e],personalizedReason:`基于您在${r[e]}方面的发展需要`,content:l.content}:null}static createInterestBasedRecommendation(e,n,s){const r=s.find(c=>c.area===e);if(!r||r.currentValue<r.targetValue*.8)return null;const a={spiritual:"精神修养",wisdom:"智慧提升",compassion:"慈悲心",mindfulness:"正念觉察"},o={spiritual:{title:"高级禅修指导",description:"深入的禅修技巧和高阶修行方法",estimatedTime:30},wisdom:{title:"哲学思辨练习",description:"通过哲学思辨深化对智慧的理解",estimatedTime:25},compassion:{title:"菩萨行愿实践",description:"将慈悲心转化为实际的利他行动",estimatedTime:60},mindfulness:{title:"日常生活正念",description:"将正念觉察融入日常生活的每个细节",estimatedTime:15}}[e];return o?{id:`interest-${e}-${Date.now()}`,type:"challenge",title:o.title,description:o.description,estimatedTime:o.estimatedTime,difficulty:4,expectedBenefit:"在已有优势基础上进一步提升",relatedAreas:[e],personalizedReason:`您在${a[e]||e}方面表现优秀，适合更高层次的挑战`}:null}static createTimeBasedRecommendation(e,n){const s=new Date().getHours();return s>=6&&s<=9?{id:`time-morning-${Date.now()}`,type:"practice",title:"晨光修行",description:"趁着清晨的宁静时光，进行一次深度的冥想练习",estimatedTime:15,difficulty:2,expectedBenefit:"为一天带来内心的平静和专注",relatedAreas:["spiritual","mindfulness"],personalizedReason:"早晨是修行的黄金时间，心境最为宁静"}:s>=19&&s<=22?{id:`time-evening-${Date.now()}`,type:"reflection",title:"夜晚反思",description:"回顾今天的成长和收获，感恩一天的经历",estimatedTime:10,difficulty:1,expectedBenefit:"总结经验，带着感恩入眠",relatedAreas:["wisdom","spiritual"],personalizedReason:"夜晚是反思和感恩的好时光"}:null}}Z(Jt,"STORAGE_PREFIX","divine-friend-growth");const Ch=({onNavigate:t})=>{const[e,n]=S.useState("overview"),[s,r]=S.useState(null),[a,l]=S.useState([]),[o,c]=S.useState([]),[u,f]=S.useState([]),[g,y]=S.useState([]),[k,C]=S.useState(!0);S.useEffect(()=>{v()},[]);const v=async()=>{try{C(!0);const d=Jt.getGrowthProfile(),x=Jt.getGrowthMetrics(),j=Jt.getMilestones(),M=Jt.generateGrowthInsights(),z=Jt.generatePersonalizedRecommendations();r(d),l(x),c(j),f(M),y(z)}catch(d){console.error("加载成长数据失败:",d)}finally{C(!1)}},_=(d,x)=>Math.min(d/x*100,100),h=()=>{if(!s)return 0;const d=(s.currentLevel-1)*100;return s.currentLevel*100,(s.totalExperience-d)/100*100},m=()=>s?i.jsxs("div",{className:"growth-overview space-y-6",children:[i.jsxs("div",{className:"growth-hero-card",children:[i.jsxs("div",{className:"growth-level-display",children:[i.jsxs("div",{className:"level-badge",children:[i.jsx("span",{className:"level-number",children:s.currentLevel}),i.jsx("span",{className:"level-label",children:"修行层次"})]}),i.jsxs("div",{className:"level-progress",children:[i.jsx("div",{className:"progress-track",children:i.jsx("div",{className:"progress-fill",style:{width:`${h()}%`}})}),i.jsxs("div",{className:"experience-text",children:[s.totalExperience," / ",s.currentLevel*100," 经验值"]})]})]}),i.jsxs("div",{className:"companionship-stats",children:[i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"🌸"}),i.jsx("span",{className:"stat-number",children:s.companionshipDays}),i.jsx("span",{className:"stat-label",children:"相伴天数"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"⭐"}),i.jsx("span",{className:"stat-number",children:o.filter(d=>d.isCompleted).length}),i.jsx("span",{className:"stat-label",children:"达成里程碑"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"💎"}),i.jsx("span",{className:"stat-number",children:a.reduce((d,x)=>d+x.currentValue,0)}),i.jsx("span",{className:"stat-label",children:"总成长值"})]})]})]}),i.jsxs("div",{className:"metrics-overview",children:[i.jsx("h3",{className:"section-title",children:"📊 成长维度"}),i.jsx("div",{className:"metrics-grid",children:a.slice(0,4).map(d=>i.jsxs("div",{className:"metric-card",children:[i.jsxs("div",{className:"metric-header",children:[i.jsx("span",{className:"metric-name",children:d.name}),i.jsxs("span",{className:"metric-value",children:[d.currentValue,"/",d.targetValue]})]}),i.jsx("div",{className:"metric-progress",children:i.jsx("div",{className:"progress-track",children:i.jsx("div",{className:"progress-fill",style:{width:`${_(d.currentValue,d.targetValue)}%`}})})}),i.jsx("div",{className:"metric-trend",children:i.jsxs("span",{className:`trend-indicator ${d.trend}`,children:[d.trend==="increasing"?"📈":d.trend==="decreasing"?"📉":"➡️",d.trend==="increasing"?"上升中":d.trend==="decreasing"?"需关注":"稳定"]})})]},d.id))})]}),i.jsxs("div",{className:"recent-milestones",children:[i.jsx("h3",{className:"section-title",children:"🎯 最新里程碑"}),i.jsx("div",{className:"milestones-preview",children:o.slice(0,3).map(d=>i.jsxs("div",{className:`milestone-item ${d.isCompleted?"completed":"in-progress"}`,children:[i.jsx("div",{className:"milestone-icon",children:d.icon}),i.jsxs("div",{className:"milestone-info",children:[i.jsx("h4",{className:"milestone-title",children:d.title}),i.jsx("p",{className:"milestone-desc",children:d.description}),i.jsx("div",{className:"milestone-progress",children:d.requirements.map((x,j)=>i.jsxs("div",{className:"requirement-item",children:[i.jsxs("span",{className:"req-progress",children:[x.current,"/",x.target]}),i.jsx("span",{className:"req-desc",children:x.description})]},j))})]}),i.jsx("div",{className:"milestone-status",children:d.isCompleted?"✅":"⏳"})]},d.id))})]}),u.length>0&&i.jsxs("div",{className:"growth-insights",children:[i.jsx("h3",{className:"section-title",children:"💡 成长洞察"}),i.jsx("div",{className:"insights-list",children:u.slice(0,2).map(d=>i.jsxs("div",{className:`insight-card ${d.priority}`,children:[i.jsx("div",{className:"insight-type",children:d.type==="trend"?"📈":d.type==="recommendation"?"💭":d.type==="celebration"?"🎉":"🔮"}),i.jsxs("div",{className:"insight-content",children:[i.jsx("h4",{className:"insight-title",children:d.title}),i.jsx("p",{className:"insight-text",children:d.content})]}),i.jsxs("div",{className:"insight-confidence",children:[i.jsx("span",{className:"confidence-bar",children:i.jsx("span",{className:"confidence-fill",style:{width:`${d.confidence*100}%`}})}),i.jsxs("span",{className:"confidence-text",children:[Math.round(d.confidence*100),"%"]})]})]},d.id))})]})]}):null,p=()=>i.jsxs("div",{className:"metrics-detailed space-y-6",children:[i.jsx("h3",{className:"section-title",children:"📊 详细成长指标"}),i.jsx("div",{className:"metrics-list",children:a.map(d=>i.jsxs("div",{className:"detailed-metric-card",children:[i.jsxs("div",{className:"metric-header",children:[i.jsx("h4",{className:"metric-name",children:d.name}),i.jsxs("span",{className:"metric-importance",children:["重要度: ","⭐".repeat(d.importance)]})]}),i.jsx("p",{className:"metric-description",children:d.description}),i.jsxs("div",{className:"metric-current-state",children:[i.jsxs("div",{className:"value-display",children:[i.jsx("span",{className:"current-value",children:d.currentValue}),i.jsxs("span",{className:"unit",children:["/",d.targetValue," ",d.unit]})]}),i.jsxs("div",{className:"progress-visualization",children:[i.jsx("div",{className:"progress-track large",children:i.jsx("div",{className:"progress-fill",style:{width:`${_(d.currentValue,d.targetValue)}%`}})}),i.jsxs("span",{className:"progress-percentage",children:[Math.round(_(d.currentValue,d.targetValue)),"%"]})]})]}),d.historicalData.length>0&&i.jsxs("div",{className:"metric-history",children:[i.jsx("h5",{children:"历史趋势"}),i.jsx("div",{className:"history-chart",children:d.historicalData.slice(-7).map((x,j)=>i.jsxs("div",{className:"history-point",children:[i.jsx("div",{className:"point-bar",style:{height:`${x.value/d.targetValue*100}%`,minHeight:"2px"}}),i.jsxs("span",{className:"point-date",children:[x.date.getDate(),"/",x.date.getMonth()+1]})]},j))})]})]},d.id))})]}),N=()=>i.jsxs("div",{className:"milestones-detailed space-y-6",children:[i.jsx("h3",{className:"section-title",children:"🎯 修行里程碑"}),i.jsx("div",{className:"milestones-timeline",children:o.map(d=>i.jsxs("div",{className:`milestone-timeline-item ${d.isCompleted?"completed":"pending"}`,children:[i.jsx("div",{className:"timeline-marker",children:i.jsx("span",{className:"marker-icon",children:d.icon})}),i.jsxs("div",{className:"milestone-content",children:[i.jsxs("div",{className:"milestone-header",children:[i.jsx("h4",{className:"milestone-title",children:d.title}),i.jsx("span",{className:`difficulty-badge ${d.difficulty}`,children:d.difficulty==="beginner"?"初学":d.difficulty==="intermediate"?"进阶":d.difficulty==="advanced"?"高级":"大师"})]}),i.jsx("p",{className:"milestone-description",children:d.description}),d.backgroundStory&&i.jsxs("div",{className:"milestone-story",children:[i.jsx("span",{className:"story-icon",children:"📜"}),i.jsx("p",{className:"story-text",children:d.backgroundStory})]}),i.jsxs("div",{className:"milestone-requirements",children:[i.jsx("h5",{children:"完成条件"}),d.requirements.map((x,j)=>i.jsxs("div",{className:"requirement-item",children:[i.jsx("div",{className:"req-progress-bar",children:i.jsx("div",{className:"req-fill",style:{width:`${x.current/x.target*100}%`}})}),i.jsxs("span",{className:"req-text",children:[x.description,": ",x.current,"/",x.target]})]},j))]}),i.jsxs("div",{className:"milestone-rewards",children:[i.jsx("h5",{children:"解锁奖励"}),i.jsx("div",{className:"rewards-list",children:d.rewards.map((x,j)=>i.jsxs("div",{className:"reward-item",children:[i.jsx("span",{className:"reward-icon",children:"🎁"}),i.jsxs("div",{className:"reward-info",children:[i.jsx("span",{className:"reward-name",children:x.name}),i.jsx("span",{className:"reward-desc",children:x.description})]})]},j))})]}),d.isCompleted&&d.unlockedAt&&i.jsxs("div",{className:"completion-info",children:[i.jsx("span",{className:"completion-icon",children:"🎉"}),i.jsxs("span",{className:"completion-date",children:["已于 ",d.unlockedAt.toLocaleDateString()," 达成"]})]})]})]},d.id))})]}),E=()=>i.jsxs("div",{className:"insights-detailed space-y-6",children:[i.jsx("h3",{className:"section-title",children:"💡 智慧洞察"}),i.jsx("div",{className:"insights-grid",children:u.map(d=>i.jsxs("div",{className:`detailed-insight-card ${d.type} ${d.priority}`,children:[i.jsxs("div",{className:"insight-header",children:[i.jsx("span",{className:"insight-type-icon",children:d.type==="trend"?"📈":d.type==="recommendation"?"💭":d.type==="celebration"?"🎉":d.type==="prediction"?"🔮":"⚡"}),i.jsxs("div",{className:"insight-meta",children:[i.jsx("h4",{className:"insight-title",children:d.title}),i.jsxs("div",{className:"insight-tags",children:[i.jsx("span",{className:`priority-tag ${d.priority}`,children:d.priority}),i.jsx("span",{className:"type-tag",children:d.type})]})]}),i.jsxs("div",{className:"insight-confidence-display",children:[i.jsxs("span",{className:"confidence-value",children:[Math.round(d.confidence*100),"%"]}),i.jsx("span",{className:"confidence-label",children:"置信度"})]})]}),i.jsxs("div",{className:"insight-content",children:[i.jsx("p",{className:"insight-text",children:d.content}),d.relatedAreas.length>0&&i.jsxs("div",{className:"related-areas",children:[i.jsx("span",{className:"areas-label",children:"相关领域:"}),i.jsx("div",{className:"areas-tags",children:d.relatedAreas.map(x=>i.jsx("span",{className:"area-tag",children:x==="spiritual"?"精神修养":x==="wisdom"?"智慧提升":x==="compassion"?"慈悲心":x==="mindfulness"?"正念觉察":x},x))})]}),d.actionable&&i.jsxs("div",{className:"actionable-note",children:[i.jsx("span",{className:"action-icon",children:"⚡"}),i.jsx("span",{className:"action-text",children:"可付诸行动的建议"})]})]}),i.jsx("div",{className:"insight-footer",children:i.jsxs("span",{className:"valid-until",children:["有效期至: ",d.validUntil.toLocaleDateString()]})})]},d.id))})]}),P=()=>i.jsxs("div",{className:"timeline-view space-y-6",children:[i.jsx("h3",{className:"section-title",children:"📅 成长时间线"}),i.jsx("div",{className:"timeline-placeholder",children:i.jsxs("div",{className:"placeholder-content",children:[i.jsx("span",{className:"placeholder-icon",children:"🚧"}),i.jsx("h4",{children:"时间线功能开发中"}),i.jsx("p",{children:"将展示您与神仙朋友的互动历程、成长轨迹和重要时刻"})]})})]});return k?i.jsx("div",{className:"growth-loading-container",children:i.jsxs("div",{className:"loading-spinner",children:[i.jsx("div",{className:"spinner-icon",children:"🌸"}),i.jsx("p",{children:"正在加载您的成长档案..."})]})}):i.jsxs("div",{className:"growth-page-container",children:[i.jsx("div",{className:"growth-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{onClick:()=>t("home"),className:"back-button",children:i.jsx("span",{className:"back-icon",children:"←"})}),i.jsxs("div",{className:"header-title",children:[i.jsx("h1",{className:"page-title",children:"🌱 共同成长"}),i.jsx("p",{className:"page-subtitle",children:"与神仙朋友一起的修行之路"})]})]})}),i.jsx("div",{className:"growth-tabs",children:i.jsx("div",{className:"tabs-container",children:[{id:"overview",label:"总览",icon:"🏠"},{id:"metrics",label:"指标",icon:"📊"},{id:"milestones",label:"里程碑",icon:"🎯"},{id:"insights",label:"洞察",icon:"💡"},{id:"timeline",label:"时间线",icon:"📅"}].map(d=>i.jsxs("button",{className:`tab-button ${e===d.id?"active":""}`,onClick:()=>n(d.id),children:[i.jsx("span",{className:"tab-icon",children:d.icon}),i.jsx("span",{className:"tab-label",children:d.label})]},d.id))})}),i.jsxs("div",{className:"growth-content",children:[e==="overview"&&m(),e==="metrics"&&p(),e==="milestones"&&N(),e==="insights"&&E(),e==="timeline"&&P()]})]})};class Je{static getCurrentUser(){const e=localStorage.getItem(`${this.STORAGE_PREFIX}-current-user`);if(!e)return null;try{const n=JSON.parse(e);return{...n,joinDate:new Date(n.joinDate),lastActive:new Date(n.lastActive)}}catch(n){return console.error("解析用户信息失败:",n),null}}static initializeCurrentUser(e){let n=this.getCurrentUser();return n?(n={...n,...e,lastActive:new Date},this.saveCurrentUser(n)):(n={id:`user-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,username:`修行者${Math.floor(Math.random()*9999)}`,displayName:"新修行者",avatar:"🌸",level:1,joinDate:new Date,lastActive:new Date,companionDeity:"guanyin",growthAreas:["spiritual","mindfulness"],achievementBadges:[],karmaPoints:100,contributionScore:0,followersCount:0,followingCount:0,isVerified:!1,privacySettings:{profileVisibility:"public",allowDirectMessage:!0,showGrowthProgress:!0,showLocation:!1},...e},this.saveCurrentUser(n)),n}static saveCurrentUser(e){localStorage.setItem(`${this.STORAGE_PREFIX}-current-user`,JSON.stringify(e))}static getCommunityFeed(e=1,n=10,s){const r=`${this.STORAGE_PREFIX}-feed`;let a=[];try{const u=localStorage.getItem(r);u?a=JSON.parse(u).map(g=>({...g,createdAt:new Date(g.createdAt),updatedAt:g.updatedAt?new Date(g.updatedAt):void 0})):(a=this.generateSamplePosts(),localStorage.setItem(r,JSON.stringify(a)))}catch(u){console.error("获取社区动态失败:",u),a=this.generateSamplePosts()}s&&(a=a.filter(u=>u.category===s)),a.sort((u,f)=>f.createdAt.getTime()-u.createdAt.getTime());const l=(e-1)*n,o=l+n;return{posts:a.slice(l,o),hasMore:o<a.length,nextCursor:o<a.length?o.toString():void 0,totalCount:a.length}}static createPost(e){const n=this.getCurrentUser();if(!n)throw new Error("用户未登录");const s={id:`post-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,authorId:n.id,author:n,createdAt:new Date,likeCount:0,commentCount:0,shareCount:0,isLiked:!1,isBookmarked:!1,...e},r=`${this.STORAGE_PREFIX}-feed`,a=localStorage.getItem(r);let l=[];if(a)try{l=JSON.parse(a)}catch(o){console.error("解析帖子数据失败:",o)}return l.unshift(s),localStorage.setItem(r,JSON.stringify(l)),s}static likePost(e){const n=`${this.STORAGE_PREFIX}-feed`,s=localStorage.getItem(n);if(!s)return!1;try{const r=JSON.parse(s),a=r.findIndex(l=>l.id===e);if(a!==-1){const l=r[a];return l.isLiked?(l.likeCount-=1,l.isLiked=!1):(l.likeCount+=1,l.isLiked=!0),localStorage.setItem(n,JSON.stringify(r)),!0}}catch(r){console.error("点赞操作失败:",r)}return!1}static getCommunityCircles(){const e=`${this.STORAGE_PREFIX}-circles`,n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(a=>({...a,createdAt:new Date(a.createdAt)}))}catch(r){console.error("解析圈子数据失败:",r)}const s=this.generateSampleCircles();return localStorage.setItem(e,JSON.stringify(s)),s}static joinCircle(e){const n=`${this.STORAGE_PREFIX}-circles`,s=localStorage.getItem(n);if(!s)return!1;try{const r=JSON.parse(s),a=r.findIndex(l=>l.id===e);if(a!==-1){const l=r[a];if(!l.isJoined)return l.isJoined=!0,l.memberCount+=1,localStorage.setItem(n,JSON.stringify(r)),!0}}catch(r){console.error("加入圈子失败:",r)}return!1}static getBlessingExchanges(){const e=`${this.STORAGE_PREFIX}-blessings`,n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(r=>({...r,createdAt:new Date(r.createdAt)}))}catch(s){console.error("解析祝福数据失败:",s)}return this.generateSampleBlessings()}static sendBlessing(e){const n={id:`blessing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,isReceived:!1,reciprocated:!1,...e},s=`${this.STORAGE_PREFIX}-blessings`,r=localStorage.getItem(s);let a=[];if(r)try{a=JSON.parse(r)}catch(l){console.error("解析祝福数据失败:",l)}return a.unshift(n),localStorage.setItem(s,JSON.stringify(a)),n}static getWisdomShares(){const e=`${this.STORAGE_PREFIX}-wisdom`,n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(r=>({...r,createdAt:new Date(r.createdAt)}))}catch(s){console.error("解析智慧分享数据失败:",s)}return this.generateSampleWisdom()}static getMeditationSessions(){const e=`${this.STORAGE_PREFIX}-meditations`,n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(r=>({...r,scheduledAt:new Date(r.scheduledAt),host:{...r.host,joinDate:new Date(r.host.joinDate),lastActive:new Date(r.host.lastActive)}}))}catch(s){console.error("解析冥想活动数据失败:",s)}return this.generateSampleMeditations()}static joinMeditationSession(e){const n=`${this.STORAGE_PREFIX}-meditations`,s=localStorage.getItem(n);if(!s)return!1;const r=this.getCurrentUser();if(!r)return!1;try{const a=JSON.parse(s),l=a.findIndex(o=>o.id===e);if(l!==-1){const o=a[l];if(!o.isJoined&&o.currentParticipants.length<o.maxParticipants)return o.isJoined=!0,o.currentParticipants.push(r.id),localStorage.setItem(n,JSON.stringify(a)),!0}}catch(a){console.error("参加冥想活动失败:",a)}return!1}static searchCommunity(e){const n=this.getCommunityFeed(1,50).posts.filter(a=>{var l;return a.content.toLowerCase().includes(e.toLowerCase())||((l=a.title)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))||a.tags.some(o=>o.toLowerCase().includes(e.toLowerCase()))}),s=this.getCommunityCircles().filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.description.toLowerCase().includes(e.toLowerCase())||a.tags.some(l=>l.toLowerCase().includes(e.toLowerCase()))),r=this.getWisdomShares().filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.content.toLowerCase().includes(e.toLowerCase())||a.tags.some(l=>l.toLowerCase().includes(e.toLowerCase())));return{users:[],posts:n.slice(0,10),circles:s.slice(0,5),events:[],wisdomShares:r.slice(0,10)}}static generateSamplePosts(){const e=this.generateSampleUsers(),n=[];return[{type:"sharing",category:"meditation",title:"今日禅修心得",content:"今晨在山中禅修，听鸟语闻花香，内心格外宁静。与大自然融为一体的感觉真是美妙，仿佛能感受到宇宙的韵律。🌸",tags:["禅修","自然","宁静"],mood:"peaceful"},{type:"wisdom",category:"wisdom",title:"分享《心经》感悟",content:'"色不异空，空不异色"，这句话今天突然有了新的理解。世间万物看似实有，实则如梦幻泡影。修行就是要看透这份虚幻，回归本心。',tags:["心经","佛法","感悟"],mood:"contemplative"},{type:"question",category:"questions",title:"关于打坐时的杂念",content:"请教各位师兄师姐，打坐时总是有很多杂念涌现，应该如何对治？有时越想压制杂念，杂念反而越多。求指导！",tags:["打坐","杂念","求助"],mood:"confused"},{type:"blessing",category:"blessing_circle",title:"为生病的朋友祈福",content:"我的好友生病了，希望大家一起为她祈福。愿观音菩萨保佑她早日康复，身体健康！🙏",tags:["祈福","健康","观音菩萨"],mood:"blessed",blessingCount:23},{type:"gratitude",category:"daily_practice",title:"感恩今日的小确幸",content:"今天遇到了很多温暖的小事：公车司机等我上车，陌生人的微笑，还有家里的花开了。感恩这些美好的瞬间！✨",tags:["感恩","日常","美好"],mood:"joyful"}].forEach((r,a)=>{const l=e[a%e.length],o=Math.floor(Math.random()*24);n.push({id:`post-${Date.now()}-${a}`,authorId:l.id,author:l,type:r.type,title:r.title,content:r.content,tags:r.tags,category:r.category,createdAt:new Date(Date.now()-o*60*60*1e3),likeCount:Math.floor(Math.random()*50),commentCount:Math.floor(Math.random()*20),shareCount:Math.floor(Math.random()*10),isLiked:Math.random()>.7,isBookmarked:Math.random()>.8,visibility:"public",mood:r.mood,blessingCount:r.type==="blessing"?r.blessingCount:void 0})}),n}static generateSampleUsers(){const e=["🌸","🍃","⛩️","🕯️","🌙","☯️","🎋","🪷"],n=["guanyin","wenshu","puxian","dizang","amitabha"],s=["初心修行者","静心禅师","慈悲行者","智慧学者","正念导师"];return["莲心","静观","慧明","觉悟","慈航","普贤","文殊","观自在"].map((a,l)=>({id:`user-${l+1}`,username:`${a}${l+1}`,displayName:a,avatar:e[l%e.length],level:Math.floor(Math.random()*10)+1,title:s[l%s.length],joinDate:new Date(Date.now()-Math.random()*365*24*60*60*1e3),lastActive:new Date(Date.now()-Math.random()*24*60*60*1e3),companionDeity:n[l%n.length],growthAreas:["spiritual","wisdom","mindfulness"].slice(0,Math.floor(Math.random()*3)+1),achievementBadges:["first_week","meditation_master"].slice(0,Math.floor(Math.random()*2)+1),karmaPoints:Math.floor(Math.random()*1e3)+100,contributionScore:Math.floor(Math.random()*500),followersCount:Math.floor(Math.random()*100),followingCount:Math.floor(Math.random()*50),isVerified:Math.random()>.7,privacySettings:{profileVisibility:"public",allowDirectMessage:!0,showGrowthProgress:!0,showLocation:!1}}))}static generateSampleCircles(){return[{id:"circle-meditation",name:"禅修共修社",description:"每日共修打坐，分享禅修心得，共同精进修行",avatar:"🧘‍♂️",category:"meditation",memberCount:156,postCount:234,createdAt:new Date("2024-01-15"),creatorId:"user-1",moderators:["user-1","user-2"],isJoined:!0,isPrivate:!1,tags:["禅修","打坐","共修","正念"],rules:["保持正念觉知","尊重他人修行","分享真实体验","互帮互助"],focusAreas:["mindfulness","spiritual"],activityLevel:"high"},{id:"circle-wisdom",name:"经典智慧研读会",description:"一起研读佛经、道德经等经典，探讨其中的人生智慧",avatar:"📿",category:"book_study",memberCount:89,postCount:167,createdAt:new Date("2024-02-01"),creatorId:"user-3",moderators:["user-3"],isJoined:!1,isPrivate:!1,tags:["经典","智慧","研读","讨论"],rules:["理性讨论","引经据典","保持开放心态","避免争执"],focusAreas:["wisdom","spiritual"],activityLevel:"medium"},{id:"circle-blessing",name:"祈福互助圈",description:"为彼此祈福，互相支持，传递正能量和爱心",avatar:"🙏",category:"blessing_circle",memberCount:203,postCount:445,createdAt:new Date("2024-01-20"),creatorId:"user-2",moderators:["user-2","user-4"],isJoined:!0,isPrivate:!1,tags:["祈福","互助","正能量","慈悲"],rules:["传递正能量","真心祈福","互相关爱","感恩回馈"],focusAreas:["compassion","relationships"],activityLevel:"very_high"},{id:"circle-beginner",name:"修行新人指导站",description:"为初入修行的朋友提供指导和帮助，解答修行疑问",avatar:"🌱",category:"newcomer",memberCount:78,postCount:123,createdAt:new Date("2024-03-01"),creatorId:"user-5",moderators:["user-5"],isJoined:!1,isPrivate:!1,tags:["新人","指导","基础","入门"],rules:["耐心指导","友善回答","分享经验","鼓励新人"],focusAreas:["spiritual","wisdom"],activityLevel:"medium"}]}static generateSampleBlessings(){return[{id:"blessing-1",senderId:"user-1",receiverId:"current-user",type:"daily",category:"peace",message:"愿你内心平静如水，智慧如莲花般绽放！🌸",deityBlessings:["观音菩萨慈悲护佑"],createdAt:new Date(Date.now()-72e5),isReceived:!0,reciprocated:!1},{id:"blessing-2",senderId:"user-3",receiverId:"current-user",type:"support",category:"wisdom",message:"在迷茫时，愿智慧明灯为你指引前路！✨",deityBlessings:["文殊菩萨智慧加持"],createdAt:new Date(Date.now()-18e6),isReceived:!0,reciprocated:!0}]}static generateSampleWisdom(){return[{id:"wisdom-1",authorId:"user-4",title:"心经精句分享",content:"色不异空，空不异色，色即是空，空即是色。",source:"《般若波罗蜜多心经》",translation:"一切物质现象与空性本质是一致的，现象就是空性，空性就是现象。",commentary:"这句话教导我们要透过现象看本质，不要被表面的事物所迷惑。在日常生活中，当我们遇到困难时，要记住这些都是无常的，都会过去。",tags:["心经","空性","般若智慧"],difficulty:"intermediate",likeCount:45,saveCount:23,shareCount:12,createdAt:new Date(Date.now()-12*60*60*1e3),category:"buddhist"},{id:"wisdom-2",authorId:"user-2",title:"道德经智慧",content:"知人者智，自知者明。",source:"《道德经》第三十三章",translation:"能够了解别人的人是聪明的，能够了解自己的人是明智的。",commentary:"真正的智慧不在于了解外界，而在于了解自己。只有认识自己的内心，才能获得真正的自由和平静。",tags:["道德经","自知","智慧"],difficulty:"beginner",likeCount:32,saveCount:18,shareCount:8,createdAt:new Date(Date.now()-18*60*60*1e3),category:"taoist"}]}static generateSampleMeditations(){const e=this.generateSampleUsers();return[{id:"meditation-1",hostId:e[0].id,host:e[0],title:"晨光静心冥想",description:"在清晨的第一缕阳光中，一起进行正念呼吸练习，开启美好的一天",type:"guided",technique:"正念呼吸",duration:20,maxParticipants:50,currentParticipants:["user-2","user-3"],scheduledAt:new Date(Date.now()+12*60*60*1e3),timezone:"Asia/Shanghai",isJoined:!1,requirements:["安静的环境","舒适的坐姿"],preparationNotes:"请准备一个舒适的坐垫，穿着宽松的衣服",backgroundMusic:"禅修音乐",language:"zh-CN"},{id:"meditation-2",hostId:e[1].id,host:e[1],title:"慈悲心冥想共修",description:"通过慈悲心冥想，培养对自己和他人的慈悲与爱心",type:"guided",technique:"慈悲心观想",duration:30,maxParticipants:30,currentParticipants:["user-1"],scheduledAt:new Date(Date.now()+24*60*60*1e3),timezone:"Asia/Shanghai",isJoined:!0,requirements:["基础冥想经验"],preparationNotes:"建议先学习基础的正念冥想",backgroundMusic:"西藏颂钵",language:"zh-CN"}]}}Z(Je,"STORAGE_PREFIX","divine-community");const Mh=({onNavigate:t})=>{const[e,n]=S.useState("feed"),[s,r]=S.useState(null),[a,l]=S.useState({posts:[],hasMore:!1,totalCount:0}),[o,c]=S.useState([]),[u,f]=S.useState([]),[g,y]=S.useState([]),[k,C]=S.useState([]),[v,_]=S.useState(!0),[h,m]=S.useState(),[p,N]=S.useState(!1);S.useEffect(()=>{E()},[]);const E=async()=>{try{_(!0);const w=Je.initializeCurrentUser();r(w),await P()}catch(w){console.error("初始化社区失败:",w)}finally{_(!1)}},P=async()=>{const w=Je.getCommunityFeed(1,20,h),D=Je.getCommunityCircles(),B=Je.getBlessingExchanges(),b=Je.getWisdomShares(),L=Je.getMeditationSessions();l(w),c(D),f(B),y(b),C(L)},d=w=>{Je.likePost(w)&&l(B=>({...B,posts:B.posts.map(b=>b.id===w?{...b,isLiked:!b.isLiked,likeCount:b.isLiked?b.likeCount-1:b.likeCount+1}:b)}))},x=w=>{Je.joinCircle(w)&&c(B=>B.map(b=>b.id===w?{...b,isJoined:!0,memberCount:b.memberCount+1}:b))},j=w=>{Je.joinMeditationSession(w)&&C(B=>B.map(b=>b.id===w?{...b,isJoined:!0,currentParticipants:[...b.currentParticipants,(s==null?void 0:s.id)||""]}:b))},M=()=>i.jsxs("div",{className:"community-feed space-y-4",children:[i.jsx("div",{className:"create-post-section",children:i.jsxs("button",{className:"create-post-btn",onClick:()=>N(!0),children:[i.jsx("span",{className:"create-icon",children:"✨"}),i.jsx("span",{children:"分享修行感悟..."})]})}),i.jsx("div",{className:"category-filters",children:i.jsxs("div",{className:"filter-tabs",children:[i.jsx("button",{className:`filter-tab ${h?"":"active"}`,onClick:()=>m(void 0),children:"全部"}),[{key:"meditation",label:"🧘 禅修",value:"meditation"},{key:"wisdom",label:"📿 智慧",value:"wisdom"},{key:"blessing_circle",label:"🙏 祝福",value:"blessing_circle"},{key:"questions",label:"❓ 求助",value:"questions"}].map(w=>i.jsx("button",{className:`filter-tab ${h===w.value?"active":""}`,onClick:()=>m(w.value),children:w.label},w.key))]})}),i.jsx("div",{className:"posts-list",children:a.posts.map(w=>i.jsxs("div",{className:"post-card",children:[i.jsxs("div",{className:"post-header",children:[i.jsxs("div",{className:"author-info",children:[i.jsx("span",{className:"author-avatar",children:w.author.avatar}),i.jsxs("div",{className:"author-details",children:[i.jsx("span",{className:"author-name",children:w.author.displayName}),w.author.title&&i.jsx("span",{className:"author-title",children:w.author.title}),i.jsx("span",{className:"post-time",children:w.createdAt.toLocaleDateString()})]})]}),i.jsx("div",{className:"post-category",children:i.jsx("span",{className:"category-badge",children:w.category==="meditation"?"🧘 禅修":w.category==="wisdom"?"📿 智慧":w.category==="blessing_circle"?"🙏 祝福":w.category==="questions"?"❓ 求助":w.category==="daily_practice"?"📅 日常":"💭 分享"})})]}),w.title&&i.jsx("h3",{className:"post-title",children:w.title}),i.jsx("div",{className:"post-content",children:i.jsx("p",{children:w.content})}),w.mood&&i.jsx("div",{className:"post-mood",children:i.jsx("span",{className:"mood-indicator",children:w.mood==="peaceful"?"😌 平静":w.mood==="grateful"?"🙏 感恩":w.mood==="joyful"?"😊 喜悦":w.mood==="contemplative"?"🤔 深思":w.mood==="blessed"?"✨ 蒙福":"😕 困惑"})}),w.tags.length>0&&i.jsx("div",{className:"post-tags",children:w.tags.map(D=>i.jsx("span",{className:"tag",children:D},D))}),i.jsxs("div",{className:"post-actions",children:[i.jsxs("button",{className:`action-btn ${w.isLiked?"liked":""}`,onClick:()=>d(w.id),children:[i.jsx("span",{className:"action-icon",children:w.isLiked?"❤️":"🤍"}),i.jsx("span",{className:"action-count",children:w.likeCount})]}),i.jsxs("button",{className:"action-btn",children:[i.jsx("span",{className:"action-icon",children:"💭"}),i.jsx("span",{className:"action-count",children:w.commentCount})]}),w.type==="blessing"&&w.blessingCount&&i.jsxs("button",{className:"action-btn blessing",children:[i.jsx("span",{className:"action-icon",children:"🙏"}),i.jsx("span",{className:"action-count",children:w.blessingCount})]})]})]},w.id))})]}),z=()=>i.jsxs("div",{className:"community-circles space-y-4",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"🔮 修行圈子"}),i.jsx("p",{className:"section-desc",children:"加入志同道合的修行社群"})]}),i.jsx("div",{className:"circles-grid",children:o.map(w=>i.jsxs("div",{className:"circle-card",children:[i.jsxs("div",{className:"circle-header",children:[i.jsx("div",{className:"circle-avatar",children:w.avatar}),i.jsxs("div",{className:"circle-info",children:[i.jsx("h4",{className:"circle-name",children:w.name}),i.jsx("p",{className:"circle-desc",children:w.description})]})]}),i.jsxs("div",{className:"circle-stats",children:[i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"👥"}),i.jsxs("span",{className:"stat-text",children:[w.memberCount,"人"]})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"📝"}),i.jsxs("span",{className:"stat-text",children:[w.postCount,"帖"]})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:"⚡"}),i.jsx("span",{className:"stat-text",children:w.activityLevel==="very_high"?"非常活跃":w.activityLevel==="high"?"很活跃":w.activityLevel==="medium"?"较活跃":"一般"})]})]}),i.jsx("div",{className:"circle-tags",children:w.tags.slice(0,3).map(D=>i.jsx("span",{className:"tag",children:D},D))}),i.jsx("div",{className:"circle-action",children:w.isJoined?i.jsx("button",{className:"btn-joined",children:"已加入 ✓"}):i.jsx("button",{className:"btn-join",onClick:()=>x(w.id),children:"加入圈子"})})]},w.id))})]}),pe=()=>i.jsxs("div",{className:"community-blessings space-y-4",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"🙏 祝福交换"}),i.jsx("p",{className:"section-desc",children:"传递善意，收获慈悲"})]}),i.jsx("div",{className:"blessing-exchange-section",children:i.jsxs("button",{className:"send-blessing-btn",children:[i.jsx("span",{className:"blessing-icon",children:"✨"}),i.jsx("span",{children:"发送祝福"})]})}),i.jsx("div",{className:"blessings-list",children:u.map(w=>i.jsxs("div",{className:"blessing-card",children:[i.jsxs("div",{className:"blessing-header",children:[i.jsx("span",{className:"blessing-type",children:w.type==="daily"?"日常祝福":w.type==="support"?"支持祝福":w.type==="gratitude"?"感恩祝福":"特殊祝福"}),i.jsx("span",{className:"blessing-time",children:w.createdAt.toLocaleDateString()})]}),i.jsx("div",{className:"blessing-content",children:i.jsx("p",{children:w.message})}),i.jsx("div",{className:"blessing-deities",children:w.deityBlessings.map(D=>i.jsx("span",{className:"deity-blessing",children:D},D))}),i.jsx("div",{className:"blessing-actions",children:!w.reciprocated&&i.jsx("button",{className:"reciprocate-btn",children:"回赠祝福 🙏"})})]},w.id))})]}),re=()=>i.jsxs("div",{className:"community-wisdom space-y-4",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"💎 智慧分享"}),i.jsx("p",{className:"section-desc",children:"经典智慧，共同学习"})]}),i.jsx("div",{className:"wisdom-list",children:g.map(w=>i.jsxs("div",{className:"wisdom-card",children:[i.jsxs("div",{className:"wisdom-header",children:[i.jsx("h4",{className:"wisdom-title",children:w.title}),i.jsx("span",{className:"wisdom-category",children:w.category==="buddhist"?"佛学":w.category==="taoist"?"道学":w.category==="confucian"?"儒学":"民俗"})]}),i.jsxs("div",{className:"wisdom-content",children:[i.jsx("blockquote",{className:"wisdom-quote",children:w.content}),w.source&&i.jsxs("cite",{className:"wisdom-source",children:["—— ",w.source]}),w.translation&&i.jsxs("div",{className:"wisdom-translation",children:[i.jsx("strong",{children:"白话:"})," ",w.translation]}),w.commentary&&i.jsxs("div",{className:"wisdom-commentary",children:[i.jsx("strong",{children:"感悟:"})," ",w.commentary]})]}),i.jsx("div",{className:"wisdom-tags",children:w.tags.map(D=>i.jsx("span",{className:"tag",children:D},D))}),i.jsxs("div",{className:"wisdom-stats",children:[i.jsxs("span",{className:"stat",children:["👍 ",w.likeCount]}),i.jsxs("span",{className:"stat",children:["💾 ",w.saveCount]}),i.jsxs("span",{className:"stat",children:["📤 ",w.shareCount]})]})]},w.id))})]}),Ee=()=>i.jsxs("div",{className:"community-meditations space-y-4",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"🧘‍♂️ 共修冥想"}),i.jsx("p",{className:"section-desc",children:"一起禅修，共同精进"})]}),i.jsx("div",{className:"meditations-list",children:k.map(w=>i.jsxs("div",{className:"meditation-card",children:[i.jsxs("div",{className:"meditation-header",children:[i.jsxs("div",{className:"host-info",children:[i.jsx("span",{className:"host-avatar",children:w.host.avatar}),i.jsxs("div",{className:"host-details",children:[i.jsx("span",{className:"host-name",children:w.host.displayName}),w.host.title&&i.jsx("span",{className:"host-title",children:w.host.title})]})]}),i.jsx("div",{className:"session-type",children:w.type==="guided"?"引导冥想":w.type==="silent"?"静默冥想":w.type==="group_chanting"?"集体诵经":"行走冥想"})]}),i.jsxs("div",{className:"meditation-content",children:[i.jsx("h4",{className:"session-title",children:w.title}),i.jsx("p",{className:"session-desc",children:w.description}),i.jsxs("div",{className:"session-details",children:[i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-icon",children:"⏱️"}),i.jsxs("span",{children:[w.duration,"分钟"]})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-icon",children:"🕐"}),i.jsx("span",{children:w.scheduledAt.toLocaleString()})]}),i.jsxs("div",{className:"detail-item",children:[i.jsx("span",{className:"detail-icon",children:"👥"}),i.jsxs("span",{children:[w.currentParticipants.length,"/",w.maxParticipants,"人"]})]})]}),w.technique&&i.jsxs("div",{className:"session-technique",children:[i.jsx("strong",{children:"方法:"})," ",w.technique]})]}),i.jsx("div",{className:"meditation-action",children:w.isJoined?i.jsx("button",{className:"btn-joined",children:"已报名 ✓"}):i.jsx("button",{className:"btn-join",onClick:()=>j(w.id),disabled:w.currentParticipants.length>=w.maxParticipants,children:w.currentParticipants.length>=w.maxParticipants?"人数已满":"报名参加"})})]},w.id))})]});return v?i.jsx("div",{className:"community-loading-container",children:i.jsxs("div",{className:"loading-spinner",children:[i.jsx("div",{className:"spinner-icon",children:"🌸"}),i.jsx("p",{children:"正在加载神仙圈子..."})]})}):i.jsxs("div",{className:"community-page-container",children:[i.jsx("div",{className:"community-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{onClick:()=>t("home"),className:"back-button",children:i.jsx("span",{className:"back-icon",children:"←"})}),i.jsxs("div",{className:"header-title",children:[i.jsx("h1",{className:"page-title",children:"👥 神仙圈子"}),i.jsx("p",{className:"page-subtitle",children:"善友同修，道在人间"})]}),s&&i.jsxs("div",{className:"user-info",children:[i.jsx("span",{className:"user-avatar",children:s.avatar}),i.jsxs("span",{className:"user-level",children:["Lv.",s.level]})]})]})}),i.jsx("div",{className:"community-tabs",children:i.jsx("div",{className:"tabs-container",children:[{id:"feed",label:"动态",icon:"📱"},{id:"circles",label:"圈子",icon:"🔮"},{id:"blessings",label:"祝福",icon:"🙏"},{id:"wisdom",label:"智慧",icon:"💎"},{id:"meditations",label:"共修",icon:"🧘‍♂️"}].map(w=>i.jsxs("button",{className:`tab-button ${e===w.id?"active":""}`,onClick:()=>n(w.id),children:[i.jsx("span",{className:"tab-icon",children:w.icon}),i.jsx("span",{className:"tab-label",children:w.label})]},w.id))})}),i.jsxs("div",{className:"community-content",children:[e==="feed"&&M(),e==="circles"&&z(),e==="blessings"&&pe(),e==="wisdom"&&re(),e==="meditations"&&Ee()]}),p&&i.jsx("div",{className:"create-post-modal",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"分享修行感悟"}),i.jsx("button",{className:"close-btn",onClick:()=>N(!1),children:"✕"})]}),i.jsxs("div",{className:"modal-body",children:[i.jsx("textarea",{placeholder:"分享你的修行心得，或向大家提出问题...",className:"post-textarea",rows:6}),i.jsx("div",{className:"post-options",children:i.jsxs("select",{className:"post-type-select",children:[i.jsx("option",{value:"sharing",children:"🌸 修行分享"}),i.jsx("option",{value:"question",children:"❓ 求助提问"}),i.jsx("option",{value:"wisdom",children:"💎 智慧感悟"}),i.jsx("option",{value:"blessing",children:"🙏 祈福祝愿"}),i.jsx("option",{value:"gratitude",children:"🌟 感恩分享"})]})})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{className:"btn-cancel",onClick:()=>N(!1),children:"取消"}),i.jsx("button",{className:"btn-publish",children:"发布"})]})]})})]})};class Ne{static calculateBazi(e){const n=new Date(e.birthYear,e.birthMonth-1,e.birthDay,e.birthHour,e.birthMinute),s=this.calculateYearPillar(e.birthYear),r=this.calculateMonthPillar(e.birthYear,e.birthMonth),a=this.calculateDayPillar(n),l=this.calculateHourPillar(e.birthHour);return{yearPillar:s,monthPillar:r,dayPillar:a,hourPillar:l,dayMaster:a.element,birthInfo:e,calculatedAt:new Date}}static calculateYearPillar(e){const n=(e-4)%10,s=(e-4)%12,r=this.HEAVENLY_STEMS[n],a=this.EARTHLY_BRANCHES[s],l=this.STEM_ELEMENTS[r],o=this.NAYIN_MAP[r+a]||"待查";return{heavenlyStem:r,earthlyBranch:a,element:l,nayin:o}}static calculateMonthPillar(e,n){const r=((e-4)%10*2+n)%10,a=(n+1)%12,l=this.HEAVENLY_STEMS[r],o=this.EARTHLY_BRANCHES[a],c=this.STEM_ELEMENTS[l],u=this.NAYIN_MAP[l+o]||"待查";return{heavenlyStem:l,earthlyBranch:o,element:c,nayin:u}}static calculateDayPillar(e){const n=Math.floor(e.getTime()/864e5),s=(n+15)%10,r=(n+49)%12,a=this.HEAVENLY_STEMS[s],l=this.EARTHLY_BRANCHES[r],o=this.STEM_ELEMENTS[a],c=this.NAYIN_MAP[a+l]||"待查";return{heavenlyStem:a,earthlyBranch:l,element:o,nayin:c}}static calculateHourPillar(e){const n=Math.floor((e+1)/2)%12,s=(e*2+12)%10,r=this.HEAVENLY_STEMS[s],a=this.EARTHLY_BRANCHES[n],l=this.STEM_ELEMENTS[r],o=this.NAYIN_MAP[r+a]||"待查";return{heavenlyStem:r,earthlyBranch:a,element:l,nayin:o}}static analyzeBazi(e){const n=this.calculateElementBalance(e),s=this.analyzePersonality(e,n);return{chart:e,elementBalance:n,personalityTraits:s,strengths:this.getStrengths(e,n),weaknesses:this.getWeaknesses(e,n),suggestions:this.getSuggestions(e,n),luckyElements:this.getLuckyElements(e,n),unluckyElements:this.getUnluckyElements(e,n),careerSuggestions:this.getCareerSuggestions(e,n),healthSuggestions:this.getHealthSuggestions(e,n),relationshipSuggestions:this.getRelationshipSuggestions(e,n)}}static calculateElementBalance(e){const n={wood:0,fire:0,earth:0,metal:0,water:0};[e.yearPillar,e.monthPillar,e.dayPillar,e.hourPillar].forEach(u=>{n[u.element]+=2,n[this.BRANCH_ELEMENTS[u.earthlyBranch]]+=1});const r=Object.entries(n).sort(([,u],[,f])=>f-u),a=r[0][0],l=r[r.length-1][0],o=[],c=[];return Object.entries(n).forEach(([u,f])=>{f===0&&o.push(u),f>=4&&c.push(u)}),{...n,strongest:a,weakest:l,missing:o,excessive:c}}static analyzePersonality(e,n){const s=e.dayMaster;let r=[],a="balanced",l="ambivert",o="rational",c="adaptive";switch(s){case"wood":r=["仁慈","正直","有条理","进取心强"],a="warm",l="extroverted",o="rational";break;case"fire":r=["热情","礼貌","光明磊落","急性子"],a="hot",l="extroverted",o="emotional";break;case"earth":r=["忠诚","厚道","稳重","有责任心"],a="balanced",l="ambivert",o="rational",c="resilient";break;case"metal":r=["义气","果断","有原则","严格"],a="cool",l="introverted",o="rational";break;case"water":r=["智慧","灵活","善变","深沉"],a="cold",l="introverted",o="intuitive",c="adaptive";break}return{mainTraits:r,temperament:a,socialTendency:l,decisionMaking:o,stressHandling:c}}static getStrengths(e,n){const s=[];return n.strongest===e.dayMaster&&s.push("个人能力强，自信心足"),n.wood>2&&s.push("有仁爱之心，善于成长发展"),n.fire>2&&s.push("热情开朗，有感染力"),n.earth>2&&s.push("稳重可靠，有包容心"),n.metal>2&&s.push("意志坚定，有正义感"),n.water>2&&s.push("智慧聪颖，适应能力强"),s.length?s:["性格温和，容易相处"]}static getWeaknesses(e,n){const s=[];return n.excessive.forEach(r=>{switch(r){case"wood":s.push("过于理想主义，缺乏现实性");break;case"fire":s.push("容易冲动，缺乏耐心");break;case"earth":s.push("过于保守，缺乏变通");break;case"metal":s.push("过于严格，不够灵活");break;case"water":s.push("过于多疑，缺乏决断");break}}),n.missing.forEach(r=>{switch(r){case"wood":s.push("缺乏成长动力和计划性");break;case"fire":s.push("缺乏热情和表达能力");break;case"earth":s.push("缺乏稳定性和包容心");break;case"metal":s.push("缺乏原则性和执行力");break;case"water":s.push("缺乏智慧和适应能力");break}}),s.length?s:["五行相对平衡，性格较为温和"]}static getSuggestions(e,n){const s=[];return n.missing.forEach(r=>{switch(r){case"wood":s.push("多接触绿色植物，培养耐心和成长心态");break;case"fire":s.push("多参加社交活动，培养表达和沟通能力");break;case"earth":s.push("多做慈善公益，培养包容和稳重品格");break;case"metal":s.push("多学习规则制度，培养原则性和执行力");break;case"water":s.push("多读书学习，培养智慧和思考能力");break}}),s.length?s:["保持当前的平衡状态，继续修行提升"]}static getLuckyElements(e,n){const s=[];return s.push(...n.missing),n[e.dayMaster]<3&&(s.includes(e.dayMaster)||s.push(e.dayMaster)),s.length?s:["earth"]}static getUnluckyElements(e,n){return n.excessive}static getCareerSuggestions(e,n){const s=[];switch(e.dayMaster){case"wood":s.push("适合教育、文化、医疗、农业等行业");break;case"fire":s.push("适合娱乐、广告、能源、餐饮等行业");break;case"earth":s.push("适合房地产、建筑、管理、服务等行业");break;case"metal":s.push("适合金融、机械、军警、珠宝等行业");break;case"water":s.push("适合贸易、物流、信息、旅游等行业");break}return s}static getHealthSuggestions(e,n){const s=[];return n.excessive.forEach(r=>{switch(r){case"wood":s.push("注意肝胆健康，避免过度劳累");break;case"fire":s.push("注意心脏健康，避免情绪激动");break;case"earth":s.push("注意脾胃健康，规律饮食");break;case"metal":s.push("注意肺部健康，避免呼吸道疾病");break;case"water":s.push("注意肾脏健康，避免过度消耗");break}}),n.missing.forEach(r=>{switch(r){case"wood":s.push("加强肝胆保养，多做伸展运动");break;case"fire":s.push("注意心血管健康，保持积极心态");break;case"earth":s.push("调理脾胃功能，注意营养搭配");break;case"metal":s.push("增强肺功能，多做呼吸练习");break;case"water":s.push("补益肾气，避免熬夜过劳");break}}),s.length?s:["保持五行平衡，注意起居有常"]}static getRelationshipSuggestions(e,n){const s=[];switch(e.dayMaster){case"wood":s.push("寻找火型或水型伴侣，互相促进成长");break;case"fire":s.push("寻找木型或土型伴侣，获得支持与稳定");break;case"earth":s.push("寻找火型或金型伴侣，平衡生活节奏");break;case"metal":s.push("寻找土型或水型伴侣，软化性格刚硬");break;case"water":s.push("寻找金型或木型伴侣，激发生活热情");break}return s.push("在感情中保持真诚，培养包容心"),s}static getAllDeities(){return[{id:"guanyin",name:"Avalokitesvara",chineseName:"观世音菩萨",title:"大慈大悲观世音菩萨",avatar:"🕯️",domain:["慈悲","救苦","智慧","平安"],element:"water",personality:["慈悲","包容","智慧","温和"],specialties:["化解困厄","增长智慧","护佑平安","消灾解难"],blessings:["身体健康","家庭和睦","事业顺利","智慧增长"],description:"观世音菩萨是佛教中慈悲与智慧的象征，寻声救苦，有求必应。",iconEmoji:"🌸",color:"#87CEEB",mantra:"南无观世音菩萨",symbol:"🪷",festival:"观音成道日（农历六月十九）",temple:"普陀山",story:"观音菩萨闻声救苦，普度众生，是最受崇拜的菩萨之一。",compatibility:{bestElements:["water","wood"],goodElements:["earth"],neutralElements:["fire"],poorElements:["metal"]}},{id:"wenshu",name:"Manjusri",chineseName:"文殊菩萨",title:"大智文殊师利菩萨",avatar:"🗡️",domain:["智慧","学业","文艺","辩才"],element:"wood",personality:["智慧","理性","博学","善辩"],specialties:["开启智慧","助学业","增进文艺","提升辩才"],blessings:["考试顺利","学业有成","智慧增长","文思敏捷"],description:"文殊菩萨是智慧的化身，特别护佑学业和智慧的增长。",iconEmoji:"📚",color:"#32CD32",mantra:"南无文殊师利菩萨",symbol:"⚔️",festival:"文殊诞辰（农历四月初四）",temple:"五台山",story:"文殊菩萨是七佛之师，以智慧著称，手持慧剑斩断烦恼。",compatibility:{bestElements:["wood","fire"],goodElements:["water"],neutralElements:["earth"],poorElements:["metal"]}},{id:"puxian",name:"Samantabhadra",chineseName:"普贤菩萨",title:"大行普贤菩萨",avatar:"🐘",domain:["践行","愿力","德行","修行"],element:"earth",personality:["实干","坚韧","慈悲","稳重"],specialties:["增强愿力","助修行","增德行","护持正法"],blessings:["修行精进","愿望成就","德行增长","菩提心坚"],description:"普贤菩萨以大行愿著称，是实践和愿力的象征。",iconEmoji:"🌟",color:"#FFD700",mantra:"南无普贤菩萨",symbol:"🐘",festival:"普贤诞辰（农历二月二十一）",temple:"峨眉山",story:"普贤菩萨发十大愿，以实际行动践行菩萨道。",compatibility:{bestElements:["earth","fire"],goodElements:["metal"],neutralElements:["wood"],poorElements:["water"]}},{id:"dizang",name:"Ksitigarbha",chineseName:"地藏王菩萨",title:"大愿地藏王菩萨",avatar:"🔮",domain:["地狱","超度","孝道","愿力"],element:"earth",personality:["坚定","慈悲","勇敢","不屈"],specialties:["超度亡灵","护持孝道","拯救苦难","坚定愿力"],blessings:["祖先安息","孝心增长","业障消除","愿力坚定"],description:"地藏菩萨发大愿度尽地狱众生，是孝道和愿力的典范。",iconEmoji:"⛩️",color:"#8B4513",mantra:"南无地藏王菩萨",symbol:"🏺",festival:"地藏诞辰（农历七月三十）",temple:"九华山",story:'地藏菩萨发愿"地狱不空，誓不成佛"，体现无尽悲愿。',compatibility:{bestElements:["earth","metal"],goodElements:["fire"],neutralElements:["water"],poorElements:["wood"]}},{id:"amitabha",name:"Amitabha Buddha",chineseName:"阿弥陀佛",title:"南无阿弥陀佛",avatar:"🪔",domain:["净土","往生","无量寿","光明"],element:"fire",personality:["光明","慈悲","包容","清净"],specialties:["引导往生","消除业障","增长寿命","净化心灵"],blessings:["寿命延长","心灵清净","往生净土","光明照耀"],description:"阿弥陀佛是西方极乐世界的教主，以无量寿和无量光闻名。",iconEmoji:"🏮",color:"#FF6B6B",mantra:"南无阿弥陀佛",symbol:"🪔",festival:"阿弥陀佛圣诞（农历十一月十七）",temple:"净土宗各大寺院",story:"阿弥陀佛发四十八愿，建立极乐净土，接引众生往生。",compatibility:{bestElements:["fire","wood"],goodElements:["earth"],neutralElements:["water"],poorElements:["metal"]}},{id:"guandi",name:"Guan Di",chineseName:"关帝圣君",title:"关圣帝君",avatar:"⚔️",domain:["正义","忠义","武勇","财运"],element:"metal",personality:["正直","忠诚","勇敢","义气"],specialties:["护持正义","增强勇气","招财进宝","驱邪避凶"],blessings:["正义得张","勇气倍增","财运亨通","平安护佑"],description:"关帝圣君以忠义著称，是正义和财运的守护神。",iconEmoji:"🗡️",color:"#DC143C",mantra:"南无关圣帝君",symbol:"⚔️",festival:"关帝诞辰（农历六月二十四）",temple:"关帝庙",story:"关羽因其忠义勇武被后世尊为关帝，护佑正义和财运。",compatibility:{bestElements:["metal","earth"],goodElements:["water"],neutralElements:["wood"],poorElements:["fire"]}},{id:"mazu",name:"Mazu",chineseName:"妈祖",title:"天上圣母",avatar:"🌊",domain:["海洋","平安","出行","护航"],element:"water",personality:["慈祥","保护","智慧","神通"],specialties:["护航海行","保佑平安","指引方向","救急救难"],blessings:["出行平安","一路顺风","化险为夷","导引光明"],description:"妈祖是海上女神，专门保护航海者和出行人员的平安。",iconEmoji:"⛵",color:"#4682B4",mantra:"南无天上圣母",symbol:"🌊",festival:"妈祖诞辰（农历三月二十三）",temple:"湄洲妈祖庙",story:"妈祖林默娘因救助海难而得道成仙，成为海上保护神。",compatibility:{bestElements:["water","metal"],goodElements:["wood"],neutralElements:["earth"],poorElements:["fire"]}},{id:"caishen",name:"God of Wealth",chineseName:"财神爷",title:"招财进宝财神",avatar:"💰",domain:["财运","商业","投资","富贵"],element:"earth",personality:["慷慨","富有","智慧","公正"],specialties:["招财进宝","生意兴隆","投资获利","财源广进"],blessings:["财运亨通","生意兴隆","投资成功","富贵满堂"],description:"财神爷专管世间财富，是商人和投资者的守护神。",iconEmoji:"🏮",color:"#FFD700",mantra:"恭请财神爷",symbol:"💰",festival:"财神诞辰（农历三月十五）",temple:"财神庙",story:"财神爷掌管人间财富，公正分配，护佑勤劳善良之人。",compatibility:{bestElements:["earth","metal"],goodElements:["fire"],neutralElements:["water"],poorElements:["wood"]}}]}static matchDeities(e){const n=this.getAllDeities(),s=[];for(const r of n){const a=this.calculateDeityCompatibility(e,r),l={deity:r,compatibility:a,reasons:this.getMatchReasons(e,r,a),blessings:this.getPersonalizedBlessings(e,r),guidance:this.getPersonalizedGuidance(e,r),dailyPractice:this.getDailyPractice(e,r)};s.push(l)}return s.sort((r,a)=>a.compatibility-r.compatibility),{primaryDeity:s[0],secondaryDeities:s.slice(1,4),seasonalDeity:this.getSeasonalDeity(s,new Date),explanation:this.generateExplanation(e,s[0])}}static calculateDeityCompatibility(e,n){let s=50;n.compatibility.bestElements.includes(e.chart.dayMaster)?s+=30:n.compatibility.goodElements.includes(e.chart.dayMaster)?s+=20:n.compatibility.neutralElements.includes(e.chart.dayMaster)?s+=10:n.compatibility.poorElements.includes(e.chart.dayMaster)&&(s-=10),e.elementBalance.missing.includes(n.element)&&(s+=25);const r=this.calculatePersonalityMatch(e.personalityTraits,n.personality);return s+=r*15,this.hasCareerNeeds(e)&&n.domain.includes("事业")&&(s+=10),this.hasHealthNeeds(e)&&n.domain.includes("健康")&&(s+=10),this.hasWisdomNeeds(e)&&n.domain.includes("智慧")&&(s+=10),this.hasRelationshipNeeds(e)&&n.domain.includes("感情")&&(s+=10),Math.min(Math.max(s,0),100)}static calculatePersonalityMatch(e,n){let s=0,r=e.mainTraits.length+n.length;return e.mainTraits.forEach(a=>{n.some(l=>l.includes(a)||a.includes(l))&&(s+=2)}),r>0?s/r:0}static hasCareerNeeds(e){return e.elementBalance.missing.length>1||e.weaknesses.some(n=>n.includes("事业"))}static hasHealthNeeds(e){return e.elementBalance.excessive.length>1||e.healthSuggestions.length>2}static hasWisdomNeeds(e){return e.chart.dayMaster==="water"||e.personalityTraits.decisionMaking==="emotional"}static hasRelationshipNeeds(e){return e.personalityTraits.socialTendency==="introverted"||e.relationshipSuggestions.length>1}static getMatchReasons(e,n,s){const r=[];n.compatibility.bestElements.includes(e.chart.dayMaster)&&r.push(`您的日主${e.chart.dayMaster}与${n.chineseName}的能量完美契合`),e.elementBalance.missing.includes(n.element)&&r.push(`${n.chineseName}可以补充您所缺失的${n.element}能量`);const a=e.personalityTraits.mainTraits.filter(l=>n.personality.some(o=>o.includes(l)));return a.length>0&&r.push(`您的性格特质"${a.join("、")}"与${n.chineseName}相应`),s>80&&r.push(`极高的灵性共鸣，${n.chineseName}将是您最好的修行伙伴`),r}static getPersonalizedBlessings(e,n){const s=[...n.blessings];return e.elementBalance.missing.forEach(r=>{switch(r){case"wood":(n.domain.includes("成长")||n.element==="wood")&&s.push("愿您如春木般茁壮成长");break;case"fire":(n.domain.includes("光明")||n.element==="fire")&&s.push("愿您内心充满光明与热情");break;case"earth":(n.domain.includes("稳定")||n.element==="earth")&&s.push("愿您心境稳如泰山");break;case"metal":(n.domain.includes("正义")||n.element==="metal")&&s.push("愿您意志如金石般坚定");break;case"water":(n.domain.includes("智慧")||n.element==="water")&&s.push("愿您智慧如海般深邃");break}}),s.slice(0,5)}static getPersonalizedGuidance(e,n){const s=[];return n.id==="guanyin"&&(s.push("每日诵读《心经》，培养慈悲心"),s.push("在困难时默念观音圣号，获得内心平静"),e.personalityTraits.stressHandling==="sensitive"&&s.push("学习观音菩萨的包容，以慈悲化解烦恼")),n.id==="wenshu"&&e.elementBalance.missing.includes("wood")&&(s.push("多读经典智慧书籍，开启智慧之门"),s.push("在学习时祈请文殊菩萨加持")),n.id==="caishen"&&e.elementBalance.missing.includes("earth")&&(s.push("正当经营，以德聚财"),s.push("多做布施，财布施得财富报")),s.push(`学习${n.chineseName}的品格，在生活中践行`),s.push(`定期向${n.chineseName}祈祷，建立心灵连接`),s}static getDailyPractice(e,n){const s=[];switch(n.mantra&&s.push(`每日念诵"${n.mantra}"108遍`),n.id){case"guanyin":s.push("晨起向观音菩萨问安，感恩新的一天"),s.push("睡前诵读《心经》，净化心灵");break;case"wenshu":s.push("读书前祈请文殊菩萨加持智慧"),s.push("每日学习一段经典，增长智慧");break;case"amitabha":s.push("每日念佛，回向众生"),s.push("观想西方极乐净土，净化心境");break}return e.elementBalance.missing.forEach(r=>{switch(r){case"wood":n.element==="wood"&&s.push("多接触绿色植物，在自然中修行");break;case"fire":n.element==="fire"&&s.push("面向阳光静坐，吸收正能量");break;case"water":n.element==="water"&&s.push("听流水声冥想，培养智慧");break}}),s}static getSeasonalDeity(e,n){const s=n.getMonth()+1;let r;return s>=3&&s<=5?r="wenshu":s>=6&&s<=8?r="amitabha":s>=9&&s<=11?r="guanyin":r="dizang",e.find(a=>a.deity.id===r)}static generateExplanation(e,n){const s=n.deity,r=n.compatibility;let a=`根据您的八字分析，${s.chineseName}与您的匹配度高达${r}%。`;return r>90?a+=`这是极为难得的高匹配度，说明您与${s.chineseName}有着深厚的灵性缘分。`:r>80?a+=`这是很高的匹配度，${s.chineseName}将成为您修行路上的良师益友。`:r>70&&(a+=`这是较好的匹配度，${s.chineseName}能够给您带来很好的帮助和指导。`),a+=`建议您以${s.chineseName}为主要修行对象，同时可以参考其他几位神仙的指导。`,a}static saveBaziInfo(e,n,s){const r={birthInfo:e,analysis:n,recommendation:s,updatedAt:new Date};localStorage.setItem(`${this.STORAGE_PREFIX}-user-bazi`,JSON.stringify(r))}static getUserBaziInfo(){const e=localStorage.getItem(`${this.STORAGE_PREFIX}-user-bazi`);if(!e)return null;try{const n=JSON.parse(e);return{birthInfo:n.birthInfo,analysis:{...n.analysis,chart:{...n.analysis.chart,calculatedAt:new Date(n.analysis.chart.calculatedAt)}},recommendation:n.recommendation}}catch(n){return console.error("解析八字信息失败:",n),null}}static hasBaziInfo(){return this.getUserBaziInfo()!==null}}Z(Ne,"STORAGE_PREFIX","divine-bazi"),Z(Ne,"HEAVENLY_STEMS",["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"]),Z(Ne,"EARTHLY_BRANCHES",["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"]),Z(Ne,"STEM_ELEMENTS",{甲:"wood",乙:"wood",丙:"fire",丁:"fire",戊:"earth",己:"earth",庚:"metal",辛:"metal",壬:"water",癸:"water"}),Z(Ne,"BRANCH_ELEMENTS",{子:"water",丑:"earth",寅:"wood",卯:"wood",辰:"earth",巳:"fire",午:"fire",未:"earth",申:"metal",酉:"metal",戌:"earth",亥:"water"}),Z(Ne,"NAYIN_MAP",{甲子:"海中金",乙丑:"海中金",丙寅:"炉中火",丁卯:"炉中火",戊辰:"大林木",己巳:"大林木",庚午:"路旁土",辛未:"路旁土",壬申:"剑锋金",癸酉:"剑锋金",甲戌:"山头火",乙亥:"山头火"});class na{static calculateDailyFortune(e,n=new Date){const s=new Date(n);s.setHours(0,0,0,0);const r=this.calculateDailyElements(n),a=this.calculateOverallLuck(e,r),l={career:this.calculateCareerFortune(e,r),wealth:this.calculateWealthFortune(e,r),love:this.calculateLoveFortune(e,r),health:this.calculateHealthFortune(e,r),study:this.calculateStudyFortune(e,r),travel:this.calculateTravelFortune(e,r)},o=this.calculateLuckyItems(e,r),c=this.generateDailyAdvice(e,r,l),u=this.getDeityGuidance(e,r),f=this.calculateAuspiciousTimes(e,r),g=this.generateWarnings(e,r,l),y={date:s,bazi:e,overallLuck:a,categories:l,luckyItems:o,advice:c,deityGuidance:u,auspiciousTimes:f,warnings:g};return this.cacheDailyFortune(y),y}static calculateDailyElements(e){e.getFullYear();const n=e.getMonth()+1,s=e.getDate(),r=e.getHours(),a={wood:20,fire:20,earth:20,metal:20,water:20};n>=3&&n<=5?(a.wood+=30,a.fire+=10,a.metal-=10):n>=6&&n<=8?(a.fire+=30,a.earth+=10,a.water-=10):n>=9&&n<=11?(a.metal+=30,a.water+=10,a.wood-=10):(a.water+=30,a.wood+=10,a.fire-=10);const l=this.getHourElement(r);a[l]+=15;const o=s%5,c=["wood","fire","earth","metal","water"];return a[c[o]]+=10,a}static getHourElement(e){return e>=3&&e<9?"wood":e>=9&&e<15?"fire":e>=15&&e<21?"metal":"water"}static calculateOverallLuck(e,n){let s=50;const r=n[e.dayMaster];r>35?s+=25:r<15&&(s-=15);const a=Math.max(...Object.values(n)),l=Math.min(...Object.values(n));return a-l<20?s+=15:a-l>40&&(s-=10),s+=Math.floor(Math.random()*20)-10,Math.min(Math.max(s,0),100)}static calculateCareerFortune(e,n){let s=50,r="stable",a="事业运势平稳",l="按部就班，稳步前进";switch(e.dayMaster){case"wood":n.water>30&&(s+=20,r="rising",a="得贵人相助，事业有所突破",l="把握机会，主动出击"),n.metal>35&&(s-=15,r="declining",a="遇到阻力，需要谨慎应对",l="低调行事，避免冲突");break;case"fire":n.wood>30&&(s+=18,r="rising",a="创意想法得到支持",l="发挥创造力，展现才华"),n.water>35&&(s-=12,a="计划受阻，需要调整策略",l="保持冷静，重新规划");break;case"earth":n.fire>30&&(s+=15,r="rising",a="领导能力得到认可",l="承担更多责任，展现管理才能");break;case"metal":n.earth>30&&(s+=22,r="rising",a="执行力强，完成重要任务",l="专注目标，严格执行计划");break;case"water":n.metal>30&&(s+=20,r="rising",a="智慧策略获得成功",l="运用智慧，巧妙处理复杂问题");break}return{name:"事业运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:this.getElementColor(this.getBeneficialElement(e.dayMaster)),luckyNumber:[1,6,8]}}static calculateWealthFortune(e,n){let s=50,r="stable",a="财运平平",l="理性消费，谨慎投资";const o=this.getWealthElement(e.dayMaster),c=n[o];return c>35?(s+=25,r="rising",a="财运上升，有意外收入",l="抓住机会，适度投资"):c<15&&(s-=10,r="declining",a="财运低迷，支出较大",l="节约开支，避免投资"),n.earth>30&&(s+=10,a+="，适合储蓄理财"),{name:"财运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:this.getElementColor(o),luckyNumber:[2,8,9]}}static calculateLoveFortune(e,n){let s=50,r="stable",a="感情状况稳定",l="真诚待人，培养感情";return n.fire>35&&(s+=20,r="rising",a="魅力增强，桃花运旺",l="主动表达，把握缘分"),n.water>30&&(s+=15,a+="，心灵沟通更深入",l="多交流思想，增进理解"),n.metal>40&&(s-=10,r="declining",a="容易因固执影响关系",l="学会妥协，包容对方"),{name:"爱情运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:"#FF69B4",luckyNumber:[3,7,9]}}static calculateHealthFortune(e,n){let s=70,r="stable",a="身体状况良好",l="保持规律作息";const o=Object.entries(n).reduce((u,f)=>u[1]>f[1]?u:f),c=Object.entries(n).reduce((u,f)=>u[1]<f[1]?u:f);switch(o[1]-c[1]>35&&(s-=15,r="declining",a="五行失衡，需注意身体调理",l=`补充${c[0]}元素，平衡${o[0]}过旺`),e.dayMaster){case"wood":n.metal>40&&(s-=10,l="注意肝胆健康，避免情绪波动");break;case"fire":n.water>40&&(s-=8,l="注意心血管健康，保持平和心态");break;case"earth":n.wood>40&&(s-=8,l="注意消化系统，饮食要规律");break;case"metal":n.fire>40&&(s-=10,l="注意呼吸系统，避免上火");break;case"water":n.earth>40&&(s-=8,l="注意肾脏健康，避免过度劳累");break}return{name:"健康运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:"#90EE90",luckyNumber:[4,5,6]}}static calculateStudyFortune(e,n){let s=50,r="stable",a="学习状态一般",l="制定计划，持续努力";return n.wood>30&&(s+=18,r="rising",a="思维活跃，学习能力强",l="抓住机会深入学习"),n.water>35&&(s+=15,a+="，理解力增强",l="多思考，深度学习"),n.fire>45&&(s-=10,a="容易分心，需要专注",l="控制情绪，提高专注力"),{name:"学业运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:"#87CEEB",luckyNumber:[1,4,9]}}static calculateTravelFortune(e,n){let s=60,r="stable",a="出行运势平稳",l="注意安全，做好准备";return n.water>30&&(s+=15,r="rising",a="出行顺利，旅途愉快",l="适合远行，会有收获"),n.earth>45&&(s-=15,r="declining",a="出行易遇阻碍",l="推迟出行或加强准备"),{name:"出行运",score:Math.min(Math.max(s,0),100),trend:r,description:a,suggestion:l,luckyColor:"#4169E1",luckyNumber:[6,7,8]}}static calculateLuckyItems(e,n){const s=Object.entries(n).reduce((a,l)=>a[1]>l[1]?a:l)[0],r=this.getBeneficialElement(e.dayMaster);return{colors:[this.getElementColor(r),this.getElementColor(s),"#FFD700"],numbers:this.getLuckyNumbers(e.dayMaster),directions:this.getLuckyDirections(e.dayMaster),elements:[r,s],activities:this.getLuckyActivities(e.dayMaster,n),avoid:this.getAvoidActivities(e.dayMaster,n),gemstones:this.getLuckyGemstones(r),flowers:this.getLuckyFlowers(r)}}static generateDailyAdvice(e,n,s){const r=Object.entries(n).reduce((a,l)=>a[1]>l[1]?a:l)[0];return{morning:this.getMorningAdvice(e.dayMaster,r),afternoon:this.getAfternoonAdvice(e.dayMaster,s),evening:this.getEveningAdvice(e.dayMaster,r),meditation:this.getMeditationAdvice(e.dayMaster),mantra:this.getDailyMantra(e.dayMaster),visualization:this.getVisualizationAdvice(e.dayMaster)}}static getDeityGuidance(e,n){const s=Ne.getUserBaziInfo();if(!s)return[];const r=s.recommendation.primaryDeity.deity,a=Object.entries(n).reduce((c,u)=>c[1]>u[1]?c:u)[0],l=[];l.push({deity:r,message:this.getDeityDailyMessage(r,e.dayMaster),blessing:this.getDeityDailyBlessing(r),practice:this.getDeityDailyPractice(r),timing:this.getBestTime(r.element)});const o=this.getElementDeity(a);return o&&o.id!==r.id&&l.push({deity:o,message:`今日${a}元素旺盛，${o.chineseName}特别关注您`,blessing:`愿${o.chineseName}的${a}能量护佑您`,practice:`今日可特别向${o.chineseName}祈祷`,timing:"全天"}),l}static calculateAuspiciousTimes(e,n){const s=[];return[{period:"子时 (23:00-01:00)",element:"water"},{period:"丑时 (01:00-03:00)",element:"earth"},{period:"寅时 (03:00-05:00)",element:"wood"},{period:"卯时 (05:00-07:00)",element:"wood"},{period:"辰时 (07:00-09:00)",element:"earth"},{period:"巳时 (09:00-11:00)",element:"fire"},{period:"午时 (11:00-13:00)",element:"fire"},{period:"未时 (13:00-15:00)",element:"earth"},{period:"申时 (15:00-17:00)",element:"metal"},{period:"酉时 (17:00-19:00)",element:"metal"},{period:"戌时 (19:00-21:00)",element:"earth"},{period:"亥时 (21:00-23:00)",element:"water"}].forEach(a=>{const l=n[a.element];let o=50,c="日常活动";a.element===e.dayMaster&&(o+=20,c="个人重要事务"),l>35&&(o+=15,a.element==="fire"?c="社交会议":a.element==="water"?c="学习思考":a.element==="wood"?c="计划制定":a.element==="metal"?c="执行决策":a.element==="earth"&&(c="理财储蓄")),s.push({period:a.period,activity:c,luck:Math.min(Math.max(o,0),100),element:a.element})}),s.sort((a,l)=>l.luck-a.luck).slice(0,6)}static generateWarnings(e,n,s){const r=[];s.health.score<40&&r.push({type:"health",message:"今日身体状况需要特别关注",severity:"medium",suggestion:s.health.suggestion,timeframe:"今日"}),s.wealth.score<30&&r.push({type:"financial",message:"财运低迷，避免大额投资",severity:"high",suggestion:"谨慎理财，避免投机",timeframe:"今日"}),s.love.score<35&&r.push({type:"relationship",message:"感情方面容易产生误会",severity:"low",suggestion:"多沟通理解，避免冲突",timeframe:"今日"});const a=Math.max(...Object.values(n)),l=Math.min(...Object.values(n));return a-l>45&&r.push({type:"decision",message:"今日五行失衡严重，重要决定宜推迟",severity:"high",suggestion:"保持平常心，避免重大决策",timeframe:"今日"}),r}static getBeneficialElement(e){return{wood:"water",fire:"wood",earth:"fire",metal:"earth",water:"metal"}[e]}static getWealthElement(e){return{wood:"earth",fire:"metal",earth:"water",metal:"wood",water:"fire"}[e]}static getElementColor(e){return{wood:"#32CD32",fire:"#FF4500",earth:"#DAA520",metal:"#C0C0C0",water:"#4169E1"}[e]}static getLuckyNumbers(e){return{wood:[1,2,3,8],fire:[2,3,7,9],earth:[5,6,8,0],metal:[4,7,8,9],water:[1,6,9,0]}[e]}static getLuckyDirections(e){return{wood:["东方","东南"],fire:["南方","东南"],earth:["中央","西南","东北"],metal:["西方","西北"],water:["北方","西北"]}[e]}static getLuckyActivities(e,n){const s={wood:["学习成长","制定计划","户外活动"],fire:["社交聚会","创意工作","表达展示"],earth:["理财储蓄","整理收纳","慈善公益"],metal:["执行决策","处理公务","锻炼身体"],water:["思考反省","学习智慧","静心冥想"]},r=[...s[e]],a=Object.entries(n).reduce((l,o)=>l[1]>o[1]?l:o)[0];return a!==e&&r.push(...s[a].slice(0,1)),r}static getAvoidActivities(e,n){const r=[...{wood:["激烈竞争","金属作业"],fire:["长时间独处","消极思考"],earth:["冒险投资","急躁决定"],metal:["情绪化行为","过度消费"],water:["重体力劳动","高温环境"]}[e]];return Object.entries(n).forEach(([a,l])=>{l>45&&this.isDestructiveElement(a,e)&&r.push(`避免${a}元素相关活动`)}),r}static isDestructiveElement(e,n){return{wood:"metal",fire:"water",earth:"wood",metal:"fire",water:"earth"}[n]===e}static getLuckyGemstones(e){return{wood:["绿松石","翡翠","橄榄石"],fire:["红宝石","石榴石","红玛瑙"],earth:["黄水晶","琥珀","黄玉"],metal:["白水晶","珍珠","银饰"],water:["蓝宝石","海蓝宝","青金石"]}[e]}static getLuckyFlowers(e){return{wood:["玫瑰","牡丹","绿萝"],fire:["向日葵","红掌","火鹤"],earth:["菊花","康乃馨","满天星"],metal:["百合","茉莉","白兰"],water:["荷花","水仙","风信子"]}[e]}static getMorningAdvice(e,n){let r={wood:"晨起面向东方，深呼吸迎接朝阳，规划今日成长目标",fire:"用热情开始新的一天，与他人分享积极能量",earth:"稳重开始一天，整理环境和思绪，为今日奠定基础",metal:"制定明确计划，用纪律和决心面对今日挑战",water:"静心冥想片刻，让智慧指引今日的选择"}[e];return n!==e&&(r+=`，今日${n}能量旺盛，可适当调整节奏`),r}static getAfternoonAdvice(e,n){let s="午后保持专注，处理重要事务";return n.career.score>70?s="午后是处理工作的好时机，效率会很高":n.study.score>75?s="午后适合学习和思考，大脑活跃度较高":n.wealth.score>80&&(s="午后可关注理财信息，做出明智的财务决定"),s}static getEveningAdvice(e,n){return{wood:"晚间适合阅读和学习，为明日成长做准备",fire:"晚间与家人朋友温馨相聚，分享一天的收获",earth:"晚间整理一天的收获，感恩身边的美好",metal:"晚间反思今日得失，为明日制定更好的计划",water:"晚间静心思考，让智慧沉淀"}[e]}static getMeditationAdvice(e){return{wood:"观想自己如大树般成长，扎根大地，枝叶向天",fire:"观想内心光明温暖，照亮自己也温暖他人",earth:"观想自己稳如山岳，包容万物，厚德载物",metal:"观想内心坚如金石，意志纯净，斩断烦恼",water:"观想智慧如海般深邃，流动不息，滋润万物"}[e]}static getDailyMantra(e){return{wood:"仁者爱人，智者不惑",fire:"礼者敬人，明者不迷",earth:"信者立人，德者不败",metal:"义者正人，勇者不惧",water:"智者知人，善者不争"}[e]}static getVisualizationAdvice(e){return{wood:"想象自己在茂密森林中，感受生命的蓬勃生长",fire:"想象自己被温暖阳光包围，内心充满光明能量",earth:"想象自己站在广袤大地上，感受稳重与包容",metal:"想象自己如宝剑般锋利纯净，意志坚定不移",water:"想象自己如清澈湖水，宁静深邃，智慧流淌"}[e]}static getDeityDailyMessage(e,n){const s=[`${e.chineseName}今日特别关注您，愿您在修行路上精进不退`,`${e.chineseName}护佑您今日平安顺遂，心想事成`,`${e.chineseName}感应到您的虔诚，将为您指引前路`,`${e.chineseName}祝福您今日充满智慧与慈悲`,`${e.chineseName}陪伴您度过这美好的一天`];return s[Math.floor(Math.random()*s.length)]}static getDeityDailyBlessing(e){return e.blessings[Math.floor(Math.random()*e.blessings.length)]}static getDeityDailyPractice(e){if(e.mantra)return`诵念"${e.mantra}"${Math.floor(Math.random()*5+1)*21}遍`;const n=[`向${e.chineseName}献花供养`,`静心祈祷，感受${e.chineseName}的慈悲`,`学习${e.chineseName}的品格，在生活中实践`,`以${e.chineseName}为榜样，行善积德`];return n[Math.floor(Math.random()*n.length)]}static getBestTime(e){return{wood:"卯时 (5-7点)",fire:"午时 (11-13点)",earth:"戌时 (19-21点)",metal:"酉时 (17-19点)",water:"子时 (23-1点)"}[e]}static getElementDeity(e){return Ne.getAllDeities().find(s=>s.element===e)}static cacheDailyFortune(e){const n=e.date.toISOString().split("T")[0],s=`${this.STORAGE_PREFIX}-${n}`;localStorage.setItem(s,JSON.stringify(e))}static getCachedFortune(e=new Date){const n=new Date(e);n.setHours(0,0,0,0);const s=n.toISOString().split("T")[0],r=`${this.STORAGE_PREFIX}-${s}`,a=localStorage.getItem(r);if(!a)return null;try{const l=JSON.parse(a);return{...l,date:new Date(l.date)}}catch(l){return console.error("解析缓存运势失败:",l),null}}static getDailyFortune(e=new Date){const n=Ne.getUserBaziInfo();if(!n)return null;const s=this.getCachedFortune(e);return s||this.calculateDailyFortune(n.analysis.chart,e)}}Z(na,"STORAGE_PREFIX","divine-fortune");const Dh=({onNavigate:t})=>{const[e,n]=S.useState("profile"),[s,r]=S.useState({name:"",gender:"male",birthYear:new Date().getFullYear()-25,birthMonth:1,birthDay:1,birthHour:12,birthMinute:0,timezone:"Asia/Shanghai",location:{province:"",city:""}}),[a,l]=S.useState(null),[o,c]=S.useState(null),[u,f]=S.useState(null),[g,y]=S.useState(!1),[k,C]=S.useState(!1);S.useEffect(()=>{const d=Ne.getUserBaziInfo();if(d){r(d.birthInfo),l(d.analysis),c(d.recommendation),C(!0);const x=na.getDailyFortune();x&&f(x)}},[]);const v=(d,x)=>{r(j=>({...j,[d]:x}))},_=(d,x)=>{r(j=>({...j,location:{...j.location,[d]:x}}))},h=async()=>{if(!s.name.trim()){alert("请输入姓名");return}y(!0);try{const d=Ne.calculateBazi(s),x=Ne.analyzeBazi(d),j=Ne.matchDeities(x);l(x),c(j),Ne.saveBaziInfo(s,x,j),C(!0);const M=na.calculateDailyFortune(d);f(M),n("bazi")}catch(d){console.error("计算八字失败:",d),alert("计算失败，请检查输入信息")}finally{y(!1)}},m=()=>{var d,x;return i.jsxs("div",{className:"profile-settings space-y-6",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"个人信息"}),i.jsx("p",{className:"section-desc",children:"输入您的出生信息，计算八字命理"})]}),i.jsxs("div",{className:"birth-info-form",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"姓名"}),i.jsx("input",{type:"text",className:"form-input",value:s.name,onChange:j=>v("name",j.target.value),placeholder:"请输入您的姓名"})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"性别"}),i.jsxs("div",{className:"gender-selection",children:[i.jsx("button",{className:`gender-btn ${s.gender==="male"?"active":""}`,onClick:()=>v("gender","male"),children:"👨 男"}),i.jsx("button",{className:`gender-btn ${s.gender==="female"?"active":""}`,onClick:()=>v("gender","female"),children:"👩 女"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"出生日期"}),i.jsxs("div",{className:"date-inputs",children:[i.jsx("select",{className:"form-select",value:s.birthYear,onChange:j=>v("birthYear",parseInt(j.target.value)),children:Array.from({length:80},(j,M)=>{const z=new Date().getFullYear()-M;return i.jsxs("option",{value:z,children:[z,"年"]},z)})}),i.jsx("select",{className:"form-select",value:s.birthMonth,onChange:j=>v("birthMonth",parseInt(j.target.value)),children:Array.from({length:12},(j,M)=>i.jsxs("option",{value:M+1,children:[M+1,"月"]},M+1))}),i.jsx("select",{className:"form-select",value:s.birthDay,onChange:j=>v("birthDay",parseInt(j.target.value)),children:Array.from({length:31},(j,M)=>i.jsxs("option",{value:M+1,children:[M+1,"日"]},M+1))})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"出生时间"}),i.jsxs("div",{className:"time-inputs",children:[i.jsx("select",{className:"form-select",value:s.birthHour,onChange:j=>v("birthHour",parseInt(j.target.value)),children:Array.from({length:24},(j,M)=>i.jsxs("option",{value:M,children:[M.toString().padStart(2,"0"),"时"]},M))}),i.jsx("select",{className:"form-select",value:s.birthMinute,onChange:j=>v("birthMinute",parseInt(j.target.value)),children:Array.from({length:60},(j,M)=>i.jsxs("option",{value:M,children:[M.toString().padStart(2,"0"),"分"]},M))})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"出生地点"}),i.jsxs("div",{className:"location-inputs",children:[i.jsx("input",{type:"text",className:"form-input",value:((d=s.location)==null?void 0:d.province)||"",onChange:j=>_("province",j.target.value),placeholder:"省份"}),i.jsx("input",{type:"text",className:"form-input",value:((x=s.location)==null?void 0:x.city)||"",onChange:j=>_("city",j.target.value),placeholder:"城市"})]})]}),i.jsx("div",{className:"form-actions",children:i.jsx("button",{className:"btn-calculate",onClick:h,disabled:g,children:g?"计算中...":k?"重新计算八字":"计算八字命理"})})]})]})},p=()=>{if(!a)return i.jsxs("div",{className:"no-data",children:[i.jsx("div",{className:"no-data-icon",children:"🤷‍♂️"}),i.jsx("h3",{children:"还未计算八字"}),i.jsx("p",{children:"请先在个人信息中输入出生信息"}),i.jsx("button",{className:"btn-primary",onClick:()=>n("profile"),children:"去输入信息"})]});const{chart:d,elementBalance:x,personalityTraits:j}=a;return i.jsxs("div",{className:"bazi-analysis space-y-6",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"八字命理分析"}),i.jsx("p",{className:"section-desc",children:"您的八字组合与命理特征"})]}),i.jsxs("div",{className:"bazi-pillars",children:[i.jsx("h4",{className:"subsection-title",children:"八字四柱"}),i.jsxs("div",{className:"pillars-grid",children:[i.jsxs("div",{className:"pillar-card",children:[i.jsx("div",{className:"pillar-label",children:"年柱"}),i.jsxs("div",{className:"pillar-value",children:[d.yearPillar.heavenlyStem,d.yearPillar.earthlyBranch]}),i.jsx("div",{className:"pillar-element",children:d.yearPillar.element}),i.jsx("div",{className:"pillar-nayin",children:d.yearPillar.nayin})]}),i.jsxs("div",{className:"pillar-card",children:[i.jsx("div",{className:"pillar-label",children:"月柱"}),i.jsxs("div",{className:"pillar-value",children:[d.monthPillar.heavenlyStem,d.monthPillar.earthlyBranch]}),i.jsx("div",{className:"pillar-element",children:d.monthPillar.element}),i.jsx("div",{className:"pillar-nayin",children:d.monthPillar.nayin})]}),i.jsxs("div",{className:"pillar-card day-pillar",children:[i.jsx("div",{className:"pillar-label",children:"日柱（日主）"}),i.jsxs("div",{className:"pillar-value",children:[d.dayPillar.heavenlyStem,d.dayPillar.earthlyBranch]}),i.jsx("div",{className:"pillar-element",children:d.dayPillar.element}),i.jsx("div",{className:"pillar-nayin",children:d.dayPillar.nayin})]}),i.jsxs("div",{className:"pillar-card",children:[i.jsx("div",{className:"pillar-label",children:"时柱"}),i.jsxs("div",{className:"pillar-value",children:[d.hourPillar.heavenlyStem,d.hourPillar.earthlyBranch]}),i.jsx("div",{className:"pillar-element",children:d.hourPillar.element}),i.jsx("div",{className:"pillar-nayin",children:d.hourPillar.nayin})]})]})]}),i.jsxs("div",{className:"element-balance",children:[i.jsx("h4",{className:"subsection-title",children:"五行平衡"}),i.jsx("div",{className:"elements-grid",children:Object.entries(x).filter(([M])=>["wood","fire","earth","metal","water"].includes(M)).map(([M,z])=>i.jsxs("div",{className:"element-card",children:[i.jsx("div",{className:"element-name",children:M==="wood"?"木":M==="fire"?"火":M==="earth"?"土":M==="metal"?"金":"水"}),i.jsx("div",{className:"element-value",children:z}),i.jsx("div",{className:"element-bar",children:i.jsx("div",{className:"element-fill",style:{width:`${Math.min(z/5*100,100)}%`}})})]},M))}),i.jsxs("div",{className:"balance-summary",children:[i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"最强:"}),i.jsx("span",{className:"summary-value strongest",children:x.strongest})]}),i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"最弱:"}),i.jsx("span",{className:"summary-value weakest",children:x.weakest})]}),x.missing.length>0&&i.jsxs("div",{className:"summary-item",children:[i.jsx("span",{className:"summary-label",children:"缺失:"}),i.jsx("span",{className:"summary-value missing",children:x.missing.join(", ")})]})]})]}),i.jsxs("div",{className:"personality-traits",children:[i.jsx("h4",{className:"subsection-title",children:"性格特征"}),i.jsxs("div",{className:"traits-grid",children:[i.jsxs("div",{className:"trait-item",children:[i.jsx("span",{className:"trait-label",children:"主要特质:"}),i.jsx("div",{className:"trait-tags",children:j.mainTraits.map(M=>i.jsx("span",{className:"trait-tag",children:M},M))})]}),i.jsxs("div",{className:"trait-item",children:[i.jsx("span",{className:"trait-label",children:"性情倾向:"}),i.jsx("span",{className:"trait-value",children:j.temperament==="hot"?"热情":j.temperament==="cold"?"冷静":j.temperament==="warm"?"温和":j.temperament==="cool"?"冷静":"平衡"})]}),i.jsxs("div",{className:"trait-item",children:[i.jsx("span",{className:"trait-label",children:"社交倾向:"}),i.jsx("span",{className:"trait-value",children:j.socialTendency==="extroverted"?"外向":j.socialTendency==="introverted"?"内向":"中向"})]}),i.jsxs("div",{className:"trait-item",children:[i.jsx("span",{className:"trait-label",children:"决策方式:"}),i.jsx("span",{className:"trait-value",children:j.decisionMaking==="rational"?"理性":j.decisionMaking==="emotional"?"情感":"直觉"})]})]})]}),i.jsxs("div",{className:"strengths-weaknesses",children:[i.jsxs("div",{className:"strengths",children:[i.jsx("h4",{className:"subsection-title",children:"优势特点"}),i.jsx("ul",{className:"list-items",children:a.strengths.map((M,z)=>i.jsx("li",{className:"list-item positive",children:M},z))})]}),i.jsxs("div",{className:"weaknesses",children:[i.jsx("h4",{className:"subsection-title",children:"需注意"}),i.jsx("ul",{className:"list-items",children:a.weaknesses.map((M,z)=>i.jsx("li",{className:"list-item warning",children:M},z))})]})]}),i.jsxs("div",{className:"suggestions",children:[i.jsx("h4",{className:"subsection-title",children:"修行建议"}),i.jsx("ul",{className:"list-items",children:a.suggestions.map((M,z)=>i.jsx("li",{className:"list-item suggestion",children:M},z))})]})]})},N=()=>{if(!o)return i.jsxs("div",{className:"no-data",children:[i.jsx("div",{className:"no-data-icon",children:"🙏"}),i.jsx("h3",{children:"还未匹配神仙朋友"}),i.jsx("p",{children:"请先计算八字后再查看神仙匹配"}),i.jsx("button",{className:"btn-primary",onClick:()=>n("profile"),children:"去计算八字"})]});const{primaryDeity:d,secondaryDeities:x,explanation:j}=o;return i.jsxs("div",{className:"deity-recommendation space-y-6",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"神仙朋友匹配"}),i.jsx("p",{className:"section-desc",children:"根据您的八字特征推荐的神仙朋友"})]}),i.jsx("div",{className:"recommendation-explanation",children:i.jsx("p",{className:"explanation-text",children:j})}),i.jsxs("div",{className:"primary-deity",children:[i.jsx("h4",{className:"subsection-title",children:"您的主要神仙朋友"}),i.jsxs("div",{className:"deity-card primary",children:[i.jsxs("div",{className:"deity-header",children:[i.jsx("div",{className:"deity-avatar",children:d.deity.avatar}),i.jsxs("div",{className:"deity-info",children:[i.jsx("h5",{className:"deity-name",children:d.deity.chineseName}),i.jsx("p",{className:"deity-title",children:d.deity.title}),i.jsxs("div",{className:"compatibility-score",children:[i.jsx("span",{className:"score-label",children:"匹配度:"}),i.jsxs("span",{className:"score-value",children:[d.compatibility,"%"]}),i.jsx("div",{className:"score-bar",children:i.jsx("div",{className:"score-fill",style:{width:`${d.compatibility}%`}})})]})]})]}),i.jsx("div",{className:"deity-description",children:i.jsx("p",{children:d.deity.description})}),i.jsxs("div",{className:"deity-domains",children:[i.jsx("span",{className:"domains-label",children:"主管领域:"}),i.jsx("div",{className:"domain-tags",children:d.deity.domain.map(M=>i.jsx("span",{className:"domain-tag",children:M},M))})]}),i.jsxs("div",{className:"match-reasons",children:[i.jsx("h6",{children:"匹配原因:"}),i.jsx("ul",{className:"reasons-list",children:d.reasons.map((M,z)=>i.jsx("li",{className:"reason-item",children:M},z))})]}),i.jsxs("div",{className:"daily-practice",children:[i.jsx("h6",{children:"日常修行:"}),i.jsx("ul",{className:"practice-list",children:d.dailyPractice.map((M,z)=>i.jsx("li",{className:"practice-item",children:M},z))})]})]})]}),i.jsxs("div",{className:"secondary-deities",children:[i.jsx("h4",{className:"subsection-title",children:"辅助神仙朋友"}),i.jsx("div",{className:"deities-grid",children:x.slice(0,3).map(M=>i.jsxs("div",{className:"deity-card secondary",children:[i.jsxs("div",{className:"deity-header",children:[i.jsx("div",{className:"deity-avatar small",children:M.deity.avatar}),i.jsxs("div",{className:"deity-info",children:[i.jsx("h6",{className:"deity-name",children:M.deity.chineseName}),i.jsx("div",{className:"compatibility-score small",children:i.jsxs("span",{className:"score-value",children:[M.compatibility,"%"]})})]})]}),i.jsxs("div",{className:"deity-specialties",children:[i.jsx("span",{className:"specialties-label",children:"擅长:"}),i.jsx("div",{className:"specialty-tags",children:M.deity.specialties.slice(0,2).map(z=>i.jsx("span",{className:"specialty-tag",children:z},z))})]})]},M.deity.id))})]})]})},E=()=>u?i.jsxs("div",{className:"fortune-display space-y-6",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"今日运势"}),i.jsxs("p",{className:"section-desc",children:[u.date.toLocaleDateString(),"的运势分析"]})]}),i.jsx("div",{className:"overall-luck",children:i.jsxs("div",{className:"luck-score",children:[i.jsxs("div",{className:"score-circle",children:[i.jsx("div",{className:"score-number",children:u.overallLuck}),i.jsx("div",{className:"score-label",children:"总体运势"})]}),i.jsx("div",{className:"luck-description",children:i.jsx("p",{children:u.overallLuck>=80?"今日运势极佳，诸事顺利":u.overallLuck>=60?"今日运势良好，可把握机会":u.overallLuck>=40?"今日运势平稳，保持常心":"今日运势较低，宜谨慎为之"})})]})}),i.jsxs("div",{className:"fortune-categories",children:[i.jsx("h4",{className:"subsection-title",children:"分类运势"}),i.jsx("div",{className:"categories-grid",children:Object.entries(u.categories).map(([d,x])=>i.jsxs("div",{className:"category-card",children:[i.jsxs("div",{className:"category-header",children:[i.jsx("span",{className:"category-name",children:x.name}),i.jsx("span",{className:"category-score",children:x.score})]}),i.jsx("div",{className:"category-progress",children:i.jsx("div",{className:"progress-track",children:i.jsx("div",{className:"progress-fill",style:{width:`${x.score}%`}})})}),i.jsx("div",{className:"category-trend",children:i.jsx("span",{className:`trend-indicator ${x.trend}`,children:x.trend==="rising"?"↗️ 上升":x.trend==="declining"?"↘️ 下降":"➡️ 平稳"})}),i.jsx("p",{className:"category-description",children:x.description}),i.jsxs("p",{className:"category-suggestion",children:[i.jsx("strong",{children:"建议:"})," ",x.suggestion]})]},d))})]}),i.jsxs("div",{className:"lucky-items",children:[i.jsx("h4",{className:"subsection-title",children:"今日幸运"}),i.jsxs("div",{className:"lucky-grid",children:[i.jsxs("div",{className:"lucky-item",children:[i.jsx("span",{className:"lucky-label",children:"幸运颜色:"}),i.jsx("div",{className:"lucky-colors",children:u.luckyItems.colors.map((d,x)=>i.jsx("div",{className:"color-dot",style:{backgroundColor:d},title:d},x))})]}),i.jsxs("div",{className:"lucky-item",children:[i.jsx("span",{className:"lucky-label",children:"幸运数字:"}),i.jsx("div",{className:"lucky-numbers",children:u.luckyItems.numbers.map(d=>i.jsx("span",{className:"number-tag",children:d},d))})]}),i.jsxs("div",{className:"lucky-item",children:[i.jsx("span",{className:"lucky-label",children:"幸运方位:"}),i.jsx("div",{className:"lucky-directions",children:u.luckyItems.directions.map(d=>i.jsx("span",{className:"direction-tag",children:d},d))})]})]})]}),u.deityGuidance.length>0&&i.jsxs("div",{className:"deity-guidance",children:[i.jsx("h4",{className:"subsection-title",children:"神仙指导"}),i.jsx("div",{className:"guidance-list",children:u.deityGuidance.map((d,x)=>i.jsxs("div",{className:"guidance-card",children:[i.jsxs("div",{className:"guidance-header",children:[i.jsx("span",{className:"deity-avatar",children:d.deity.avatar}),i.jsx("span",{className:"deity-name",children:d.deity.chineseName}),d.timing&&i.jsx("span",{className:"guidance-timing",children:d.timing})]}),i.jsxs("div",{className:"guidance-message",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"指导:"})," ",d.message]}),i.jsxs("p",{children:[i.jsx("strong",{children:"祝福:"})," ",d.blessing]}),i.jsxs("p",{children:[i.jsx("strong",{children:"修行:"})," ",d.practice]})]})]},x))})]}),i.jsxs("div",{className:"auspicious-times",children:[i.jsx("h4",{className:"subsection-title",children:"今日吉时"}),i.jsx("div",{className:"times-grid",children:u.auspiciousTimes.slice(0,4).map((d,x)=>i.jsxs("div",{className:"time-card",children:[i.jsx("div",{className:"time-period",children:d.period}),i.jsx("div",{className:"time-activity",children:d.activity}),i.jsxs("div",{className:"time-luck",children:[i.jsx("span",{className:"luck-score",children:d.luck}),i.jsx("span",{className:"luck-label",children:"运势指数"})]})]},x))})]}),i.jsxs("div",{className:"daily-advice",children:[i.jsx("h4",{className:"subsection-title",children:"每日建议"}),i.jsxs("div",{className:"advice-timeline",children:[i.jsxs("div",{className:"advice-item",children:[i.jsx("span",{className:"advice-time",children:"🌅 清晨"}),i.jsx("p",{className:"advice-text",children:u.advice.morning})]}),i.jsxs("div",{className:"advice-item",children:[i.jsx("span",{className:"advice-time",children:"☀️ 午后"}),i.jsx("p",{className:"advice-text",children:u.advice.afternoon})]}),i.jsxs("div",{className:"advice-item",children:[i.jsx("span",{className:"advice-time",children:"🌙 晚上"}),i.jsx("p",{className:"advice-text",children:u.advice.evening})]})]}),u.advice.meditation&&i.jsxs("div",{className:"meditation-advice",children:[i.jsx("h5",{children:"冥想建议:"}),i.jsx("p",{children:u.advice.meditation})]}),u.advice.mantra&&i.jsxs("div",{className:"mantra-advice",children:[i.jsx("h5",{children:"今日真言:"}),i.jsx("p",{className:"mantra-text",children:u.advice.mantra})]})]}),u.warnings.length>0&&i.jsxs("div",{className:"warnings",children:[i.jsx("h4",{className:"subsection-title",children:"注意事项"}),i.jsx("div",{className:"warnings-list",children:u.warnings.map((d,x)=>i.jsxs("div",{className:`warning-card ${d.severity}`,children:[i.jsx("div",{className:"warning-message",children:d.message}),i.jsx("div",{className:"warning-suggestion",children:d.suggestion}),d.timeframe&&i.jsxs("div",{className:"warning-timeframe",children:["时间: ",d.timeframe]})]},x))})]})]}):i.jsxs("div",{className:"no-data",children:[i.jsx("div",{className:"no-data-icon",children:"🔮"}),i.jsx("h3",{children:"还未生成运势"}),i.jsx("p",{children:"请先计算八字后再查看运势"}),i.jsx("button",{className:"btn-primary",onClick:()=>n("profile"),children:"去计算八字"})]}),P=()=>i.jsxs("div",{className:"preferences-settings space-y-6",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h3",{className:"section-title",children:"偏好设置"}),i.jsx("p",{className:"section-desc",children:"个性化您的使用体验"})]}),i.jsxs("div",{className:"preferences-form",children:[i.jsxs("div",{className:"form-section",children:[i.jsx("h4",{className:"form-section-title",children:"通知设置"}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"switch-label",children:[i.jsx("input",{type:"checkbox",className:"switch-input",defaultChecked:!0}),i.jsx("span",{className:"switch-slider"}),"每日运势推送"]})}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"switch-label",children:[i.jsx("input",{type:"checkbox",className:"switch-input",defaultChecked:!0}),i.jsx("span",{className:"switch-slider"}),"神仙指导提醒"]})}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"switch-label",children:[i.jsx("input",{type:"checkbox",className:"switch-input"}),i.jsx("span",{className:"switch-slider"}),"吉时提醒"]})})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h4",{className:"form-section-title",children:"显示设置"}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"运势详细度"}),i.jsxs("select",{className:"form-select",children:[i.jsx("option",{value:"simple",children:"简单"}),i.jsx("option",{value:"detailed",selected:!0,children:"详细"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:"主题色彩"}),i.jsxs("select",{className:"form-select",children:[i.jsx("option",{value:"auto",selected:!0,children:"自动"}),i.jsx("option",{value:"light",children:"浅色"}),i.jsx("option",{value:"dark",children:"深色"})]})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsx("h4",{className:"form-section-title",children:"隐私设置"}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"switch-label",children:[i.jsx("input",{type:"checkbox",className:"switch-input"}),i.jsx("span",{className:"switch-slider"}),"允许分享个人资料"]})}),i.jsx("div",{className:"form-group",children:i.jsxs("label",{className:"switch-label",children:[i.jsx("input",{type:"checkbox",className:"switch-input"}),i.jsx("span",{className:"switch-slider"}),"允许神仙匹配"]})})]})]})]});return i.jsxs("div",{className:"settings-page-container",children:[i.jsx("div",{className:"settings-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{onClick:()=>t("home"),className:"back-button",children:i.jsx("span",{className:"back-icon",children:"←"})}),i.jsxs("div",{className:"header-title",children:[i.jsx("h1",{className:"page-title",children:"⚙️ 我的设置"}),i.jsx("p",{className:"page-subtitle",children:"个性化您的神仙体验"})]})]})}),i.jsx("div",{className:"settings-tabs",children:i.jsx("div",{className:"tabs-container",children:[{id:"profile",label:"个人信息",icon:"👤"},{id:"bazi",label:"八字命理",icon:"☯️"},{id:"deity",label:"神仙匹配",icon:"🙏"},{id:"fortune",label:"今日运势",icon:"🔮"},{id:"preferences",label:"偏好设置",icon:"⚙️"}].map(d=>i.jsxs("button",{className:`tab-button ${e===d.id?"active":""}`,onClick:()=>n(d.id),children:[i.jsx("span",{className:"tab-icon",children:d.icon}),i.jsx("span",{className:"tab-label",children:d.label})]},d.id))})}),i.jsxs("div",{className:"settings-content",children:[e==="profile"&&m(),e==="bazi"&&p(),e==="deity"&&N(),e==="fortune"&&E(),e==="preferences"&&P()]})]})},Ph=()=>{const[t,e]=S.useState("home");S.useEffect(()=>{const a=window.location.hash;a.includes("page=free-chat")?e("free-chat"):a.includes("page=chat")?e("chat"):a.includes("page=bracelet")?e("bracelet"):a.includes("page=growth")?e("growth"):a.includes("page=community")?e("community"):a.includes("page=settings")&&e("settings")},[]);const n=a=>{e(a),window.location.hash=`?page=${a}`},s=()=>{switch(t){case"home":return i.jsx(ao,{onNavigate:n});case"chat":return i.jsx(ch,{onNavigate:n});case"free-chat":return i.jsx(Nh,{onNavigate:n});case"deepseek-demo":return i.jsx(jh,{});case"bracelet":return i.jsx(Eh,{onNavigate:n});case"growth":return i.jsx(Ch,{onNavigate:n});case"community":return i.jsx(Mh,{onNavigate:n});case"settings":return i.jsx(Dh,{onNavigate:n});default:return i.jsx(ao,{onNavigate:n})}},r=[{id:"home",icon:"🏠",label:"今日相伴",description:"每日问候",value:"温暖陪伴感"},{id:"free-chat",icon:"💬",label:"深度对话",description:"智慧交流",value:"AI神仙陪伴"},{id:"bracelet",icon:"📿",label:"我的手串",description:"法宝护佑",value:"拥有安全感"},{id:"growth",icon:"🌱",label:"共同成长",description:"修行历程",value:"成就进步感"},{id:"community",icon:"👥",label:"神仙圈子",description:"善友同修",value:"归属社交感"},{id:"settings",icon:"⚙️",label:"我的设置",description:"个性化",value:"掌控定制感"}];return i.jsxs("div",{className:"min-h-screen",children:[i.jsx("main",{style:{paddingBottom:t==="chat"||t==="free-chat"?"0px":"100px",minHeight:"100vh"},children:i.jsx("div",{className:"page-transition-enter",children:s()})}),i.jsx("nav",{className:"zen-bottom-nav",style:{position:"fixed",bottom:0,left:0,right:0,background:t==="chat"||t==="free-chat"?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(20px)",borderTop:"1px solid rgba(255, 215, 0, 0.3)",padding:"12px 0",zIndex:t==="chat"||t==="free-chat"?900:999,boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",opacity:t==="chat"||t==="free-chat"?.8:1,transition:"all 0.3s ease"},children:i.jsx("div",{className:"zen-nav-items",style:{display:"flex",justifyContent:"space-around",maxWidth:"600px",margin:"0 auto",padding:"0 16px"},children:r.map(a=>i.jsxs("div",{className:`zen-nav-item hover-ethereal mobile-ripple ${t===a.id?"active":""}`,onClick:()=>n(a.id),title:a.value,style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"8px 12px",fontSize:"0.75rem",color:t===a.id?"var(--color-primary-action, #ffd700)":"rgba(255, 255, 255, 0.7)",cursor:"pointer",transition:"all 0.3s ease",textDecoration:"none",borderRadius:"8px",minWidth:"60px",position:"relative",background:t===a.id?"rgba(255, 215, 0, 0.15)":"transparent"},children:[i.jsx("div",{className:"zen-nav-icon",style:{fontSize:"1.5rem",marginBottom:"4px",transition:"transform 0.3s ease",color:t===a.id?"var(--color-primary-action, #ffd700)":"rgba(255, 255, 255, 0.8)"},children:a.icon}),i.jsx("div",{className:"zen-nav-label",style:{fontSize:"0.7rem",fontWeight:t===a.id?"600":"400",letterSpacing:"0.02em",color:t===a.id?"var(--color-primary-action, #ffd700)":"rgba(255, 255, 255, 0.7)",marginBottom:"2px"},children:a.label}),i.jsx("div",{className:"zen-nav-desc",style:{fontSize:"0.6rem",color:t===a.id?"rgba(255, 215, 0, 0.8)":"rgba(255, 255, 255, 0.5)",textAlign:"center"},children:a.description})]},a.id))})})]})};li.createRoot(document.getElementById("root")).render(i.jsx(Wu.StrictMode,{children:i.jsx(Ph,{})}));"serviceWorker"in navigator&&window.location.hostname!=="localhost"?window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})}):"serviceWorker"in navigator&&window.location.hostname==="localhost"&&(console.log("🧹 开发环境：清除Service Worker..."),navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)e.unregister(),console.log("🗑️ 已卸载Service Worker:",e)}));
