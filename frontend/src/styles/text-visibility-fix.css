/* ========================================
   ğŸ”§ æ–‡å­—å¯è§æ€§ä¿®å¤ç³»ç»Ÿ
   è§£å†³ç™½è‰²èƒŒæ™¯ä¸Šç™½è‰²æ–‡å­—ä¸å¯è§çš„é—®é¢˜
   ======================================== */

/* ===== é»˜è®¤æ¨¡å¼æ–‡å­—å¯è§æ€§ä¿è¯ ===== */

/* ç¡®ä¿æ·±è‰²èƒŒæ™¯ä¸Šçš„æ–‡å­—ä¸ºç™½è‰² */
body:not(.accessibility-mode) {
  /* æ·±è‰²èƒŒæ™¯é»˜è®¤ä½¿ç”¨ç™½è‰²æ–‡å­— */
  --safe-text-color: #ffffff;
  --safe-text-light: rgba(255, 255, 255, 0.8);
  --safe-text-lighter: rgba(255, 255, 255, 0.6);
  
  /* zenè®¾è®¡ç³»ç»Ÿé»˜è®¤ç™½è‰²æ–‡å­— */
  --zen-text-primary-safe: #ffffff;
  --zen-text-secondary-safe: rgba(255, 255, 255, 0.8);
  --zen-text-tertiary-safe: rgba(255, 255, 255, 0.6);
  
  /* ä¸ºç™½è‰²èƒŒæ™¯å®¹å™¨å‡†å¤‡çš„é»‘è‰²æ–‡å­—å˜é‡ */
  --safe-text-color-dark: #2d2d2d;
  --safe-text-light-dark: #666666;
  --safe-text-lighter-dark: #999999;
}

/* ===== ZENè®¾è®¡ç³»ç»Ÿä¿®å¤ ===== */

/* å½“é¡µé¢æˆ–ç»„ä»¶æœ‰ç™½è‰²èƒŒæ™¯æ—¶ï¼Œå¼ºåˆ¶ä½¿ç”¨å®‰å…¨çš„æ–‡å­—é¢œè‰² */
body:not(.accessibility-mode) [style*="background: white"],
body:not(.accessibility-mode) [style*="background: #fff"],
body:not(.accessibility-mode) [style*="background: #ffffff"],
body:not(.accessibility-mode) [style*="background-color: white"],
body:not(.accessibility-mode) [style*="background-color: #fff"],
body:not(.accessibility-mode) [style*="background-color: #ffffff"],
body:not(.accessibility-mode) .white-background,
body:not(.accessibility-mode) .light-background {
  --zen-text-primary: var(--zen-text-primary-safe) !important;
  --zen-text-secondary: var(--zen-text-secondary-safe) !important;
  --zen-text-tertiary: var(--zen-text-tertiary-safe) !important;
  color: var(--zen-text-primary-safe) !important;
}

/* ç¡®ä¿æ·±è‰²èƒŒæ™¯åŒºåŸŸä½¿ç”¨ç™½è‰²æ–‡å­— */
body:not(.accessibility-mode) .zen-page-container-redesign,
body:not(.accessibility-mode) .zen-main-content-redesign {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
  --zen-text-secondary: var(--zen-text-secondary-safe) !important;
  --zen-text-tertiary: var(--zen-text-tertiary-safe) !important;
}

/* åªæœ‰æ˜ç¡®çš„ç™½è‰²èƒŒæ™¯æ‰ä½¿ç”¨é»‘è‰²æ–‡å­— */
body:not(.accessibility-mode) [style*="background: white"],
body:not(.accessibility-mode) [style*="background: #fff"],
body:not(.accessibility-mode) [style*="background-color: white"],
body:not(.accessibility-mode) [style*="background-color: #fff"],
body:not(.accessibility-mode) [style*="background-color: #ffffff"] {
  color: var(--safe-text-color-dark) !important;
  --zen-text-primary: var(--safe-text-color-dark) !important;
  --zen-text-secondary: var(--safe-text-light-dark) !important;
  --zen-text-tertiary: var(--safe-text-lighter-dark) !important;
}

/* ä¿®å¤ç‰¹å®šç»„ä»¶çš„æ–‡å­—å¯è§æ€§ */
body:not(.accessibility-mode) .card,
body:not(.accessibility-mode) .modal,
body:not(.accessibility-mode) .dialog,
body:not(.accessibility-mode) .popup,
body:not(.accessibility-mode) .dropdown,
body:not(.accessibility-mode) .menu,
body:not(.accessibility-mode) .zen-card {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
  --zen-text-secondary: var(--zen-text-secondary-safe) !important;
}

/* ä¿®å¤æ ‡é¢˜æ–‡å­— */
body:not(.accessibility-mode) h1,
body:not(.accessibility-mode) h2,
body:not(.accessibility-mode) h3,
body:not(.accessibility-mode) h4,
body:not(.accessibility-mode) h5,
body:not(.accessibility-mode) h6 {
  color: var(--safe-text-color) !important;
}

/* ä¿®å¤æ®µè½å’Œæ™®é€šæ–‡å­— */
body:not(.accessibility-mode) p,
body:not(.accessibility-mode) span,
body:not(.accessibility-mode) div,
body:not(.accessibility-mode) label,
body:not(.accessibility-mode) .text {
  color: inherit;
}

/* ç‰¹åˆ«ä¿®å¤ç™½è‰²èƒŒæ™¯åŒºåŸŸå†…çš„æ–‡å­— */
body:not(.accessibility-mode) [style*="background"][style*="white"] *,
body:not(.accessibility-mode) [style*="background"][style*="#fff"] *,
body:not(.accessibility-mode) [style*="background"][style*="#ffffff"] * {
  color: var(--safe-text-color) !important;
}

/* ===== å¼ºåˆ¶æ–‡å­—å¯è§æ€§è§„åˆ™ ===== */

/* ä»»ä½•å…·æœ‰ç™½è‰²æˆ–æµ…è‰²èƒŒæ™¯çš„å…ƒç´ ï¼Œå¼ºåˆ¶ä½¿ç”¨æ·±è‰²æ–‡å­— */
[style*="background: white"] *:not(.keep-original-color),
[style*="background: #fff"] *:not(.keep-original-color),
[style*="background: #ffffff"] *:not(.keep-original-color),
[style*="background-color: white"] *:not(.keep-original-color),
[style*="background-color: #fff"] *:not(.keep-original-color),
[style*="background-color: #ffffff"] *:not(.keep-original-color),
[style*="background-color: rgb(255, 255, 255)"] *:not(.keep-original-color) {
  color: var(--safe-text-color-dark) !important;
  --zen-text-primary: var(--safe-text-color-dark) !important;
  --zen-text-secondary: var(--safe-text-light-dark) !important;
  --zen-text-tertiary: var(--safe-text-lighter-dark) !important;
}

/* ===== å…¨å±€ZENå˜é‡å®‰å…¨ä¿®å¤ ===== */

/* ç¡®ä¿bodyå§‹ç»ˆæœ‰æ·±è‰²èƒŒæ™¯ */
body {
  background: var(--gradient-cosmic) !important;
  background-attachment: fixed !important;
}

/* ä»…åœ¨ç‰¹å®šç™½è‰²èƒŒæ™¯å®¹å™¨å†…é‡æ–°å®šä¹‰zenå˜é‡ï¼Œè€Œä¸æ˜¯å…¨å±€ */
.white-bg-container,
.light-bg-container,
[style*="background: white"],
[style*="background: #fff"],
[style*="background: #ffffff"],
[style*="background-color: white"],
[style*="background-color: #fff"],
[style*="background-color: #ffffff"] {
  --zen-text-primary: var(--safe-text-color-dark) !important;
  --zen-text-secondary: var(--safe-text-light-dark) !important;
  --zen-text-tertiary: var(--safe-text-lighter-dark) !important;
  --zen-text-muted: rgba(45, 45, 45, 0.4) !important;
  color: var(--safe-text-color-dark) !important;
}

/* ä¿®å¤è¡¨å•å…ƒç´  */
body:not(.accessibility-mode) input,
body:not(.accessibility-mode) textarea,
body:not(.accessibility-mode) select,
body:not(.accessibility-mode) button {
  color: var(--safe-text-color);
}

/* ä¿®å¤å¯¼èˆªå…ƒç´  */
body:not(.accessibility-mode) .nav,
body:not(.accessibility-mode) .navigation,
body:not(.accessibility-mode) .menu-item,
body:not(.accessibility-mode) .tab {
  color: var(--safe-text-color);
}

/* ===== åå‘æ–‡å­—ä¿æŠ¤ ===== */

/* ä¿æŠ¤åŸæœ¬åº”è¯¥æ˜¯ç™½è‰²æ–‡å­—çš„å…ƒç´ ï¼ˆåœ¨æ·±è‰²èƒŒæ™¯ä¸Šï¼‰ */
.keep-white-text,
.dark-background,
.dark-background .text,
.dark-background h1,
.dark-background h2,
.dark-background h3,
.dark-background h4,
.dark-background h5,
.dark-background h6,
.dark-background p,
.dark-background span {
  color: #ffffff !important;
  --zen-text-primary: #ffffff !important;
  --zen-text-secondary: rgba(255, 255, 255, 0.8) !important;
  --zen-text-tertiary: rgba(255, 255, 255, 0.6) !important;
}

/* ä¿æŠ¤æ·±è‰²èƒŒæ™¯çš„zenç»„ä»¶ */
body,
[style*="background"][style*="gradient"],
[style*="background"][style*="linear-gradient"],
[style*="background"][style*="radial-gradient"],
.zen-bg-primary,
.dark-gradient,
.dark-background {
  --zen-text-primary: #ffffff !important;
  --zen-text-secondary: rgba(255, 255, 255, 0.8) !important;
  --zen-text-tertiary: rgba(255, 255, 255, 0.6) !important;
  color: #ffffff !important;
}

/* ===== ç‰¹å®šé¡µé¢ä¿®å¤ ===== */

/* ä¿®å¤æ‰‹ä¸²é¡µé¢ */
.bracelet-page *:not(.keep-original-color),
[data-page="bracelet"] *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ä¿®å¤ç”¨æˆ·ä¸­å¿ƒé¡µé¢ */
.user-center *:not(.keep-original-color),
.profile-page *:not(.keep-original-color),
[data-page="profile"] *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ä¿®å¤è®¾ç½®é¡µé¢ */
.settings-page *:not(.keep-original-color),
[data-page="settings"] *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ä¿®å¤å¼€è¿é¡µé¢ */
.fortune-page *:not(.keep-original-color),
[data-page="fortune"] *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ä¿®å¤èŠå¤©é¡µé¢ */
.chat-page *:not(.keep-original-color),
[data-page="oracle"] *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ===== æ¨¡æ€æ¡†å’Œå¼¹çª—ä¿®å¤ ===== */

.ant-modal-content *:not(.keep-original-color),
.ant-drawer-content *:not(.keep-original-color),
.ant-popover-content *:not(.keep-original-color),
.zen-modal *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ===== è¡¨æ ¼ä¿®å¤ ===== */

.ant-table *:not(.keep-original-color),
table *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ===== å¡ç‰‡ä¿®å¤ ===== */

.ant-card *:not(.keep-original-color),
.card *:not(.keep-original-color),
.zen-card *:not(.keep-original-color) {
  color: var(--safe-text-color) !important;
  --zen-text-primary: var(--zen-text-primary-safe) !important;
}

/* ===== ç´§æ€¥ä¿®å¤è§„åˆ™ ===== */

/* å¦‚æœå…¶ä»–è§„åˆ™éƒ½å¤±æ•ˆï¼Œè¿™æ˜¯æœ€åçš„ä¿éšœ */
body:not(.accessibility-mode) {
  --text-celestial: #ffffff !important;
  --text-mystic: rgba(255, 255, 255, 0.8) !important;
  --text-mortal: rgba(255, 255, 255, 0.6) !important;
}

/* ç¡®ä¿é€‚è€åŒ–æ¨¡å¼çš„æ ·å¼ä¼˜å…ˆçº§æ›´é«˜ */
.accessibility-mode {
  --text-celestial: var(--color-text-primary) !important;
  --text-mystic: var(--color-text-secondary) !important;
  --text-mortal: var(--color-text-tertiary) !important;
  --zen-text-primary: var(--color-text-primary) !important;
  --zen-text-secondary: var(--color-text-secondary) !important;
  --zen-text-tertiary: var(--color-text-tertiary) !important;
}

/* ===== è°ƒè¯•è¾…åŠ© ===== */

/* å¼€å‘ç¯å¢ƒä¸‹å¯ä»¥å¯ç”¨è¿™ä¸ªæ¥æŸ¥çœ‹é—®é¢˜åŒºåŸŸ */
.debug-text-visibility [style*="background"][style*="white"] {
  border: 2px solid red !important;
}

.debug-text-visibility [style*="color"][style*="white"] {
  background: yellow !important;
}

/* ===== å“åº”å¼ä¿®å¤ ===== */

@media (max-width: 768px) {
  /* ç§»åŠ¨ç«¯é¢å¤–ç¡®ä¿æ–‡å­—å¯è§ */
  body:not(.accessibility-mode) * {
    text-shadow: none !important;
  }
}

/* ===== é«˜å¯¹æ¯”åº¦æ¨¡å¼é¢å¤–ä¿æŠ¤ ===== */

@media (prefers-contrast: high) {
  body:not(.accessibility-mode) {
    --safe-text-color: #ffffff !important;
    --safe-text-light: #ffffff !important;
    --safe-text-lighter: #ffffff !important;
    --zen-text-primary: #ffffff !important;
    --zen-text-secondary: #ffffff !important;
    --zen-text-tertiary: #ffffff !important;
  }
} 