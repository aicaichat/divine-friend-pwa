# ğŸ“‹ ä»Šæ—¥å®œå¿Œæ˜¾ç¤ºé—®é¢˜åˆ†ææŠ¥å‘Š

## ğŸ” é—®é¢˜ç°è±¡

ç”¨æˆ·åæ˜ åœ¨ `http://localhost:3003/?page=today` é¦–é¡µä¸Šï¼š
- **æ–°ç‰ˆä»Šæ—¥å®œå¿Œ**: æœ‰æ—¶å€™å‡ºç°ï¼Œæœ‰æ—¶å€™ä¸å‡ºç° âŒ
- **æ—§ç‰ˆä»Šæ—¥å®œå¿ŒæŒ‡å¯¼**: æ¯æ¬¡éƒ½æ­£å¸¸æ˜¾ç¤º âœ…

## ğŸ•µï¸ é—®é¢˜æ ¹å› åˆ†æ

### 1ï¸âƒ£ **APIç«¯å£å†²çªé—®é¢˜** (å·²ä¿®å¤ âœ…)

**é—®é¢˜æè¿°**: 
- åç«¯æœåŠ¡é…ç½®ä¸ºåœ¨5000ç«¯å£å¯åŠ¨
- macOSç³»ç»Ÿçš„AirPlay ReceiveræœåŠ¡å ç”¨äº†5000ç«¯å£
- å¯¼è‡´åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥

**å…·ä½“è¡¨ç°**:
```bash
Address already in use
Port 5000 is in use by another program. Either identify and stop that program, or start the server with a different port.
On macOS, try disabling the 'AirPlay Receiver' service from System Preferences -> General -> AirDrop & Handoff.
```

**è§£å†³æ–¹æ¡ˆ**:
- âœ… å°†åç«¯æœåŠ¡ç«¯å£æ”¹ä¸º5001
- âœ… ç»Ÿä¸€å‰ç«¯APIé…ç½®ä½¿ç”¨5001ç«¯å£
- âœ… æ›´æ–°æ‰€æœ‰ç›¸å…³é…ç½®æ–‡ä»¶

### 2ï¸âƒ£ **APIé…ç½®ä¸ä¸€è‡´é—®é¢˜** (å·²ä¿®å¤ âœ…)

**é—®é¢˜æè¿°**:
å‰ç«¯ä»£ç ä¸­å­˜åœ¨ä¸¤å¥—ä¸åŒçš„APIåœ°å€é…ç½®ï¼š

```javascript
// TodayHomePageProfessional.tsx (æ­£ç¡®)
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:5000/api';

// å…¶ä»–æ–‡ä»¶ (é”™è¯¯)
const API_BASE_URL = 'http://localhost:5001/api'
```

**è§£å†³æ–¹æ¡ˆ**:
- âœ… ç»Ÿä¸€æ‰€æœ‰APIé…ç½®ä½¿ç”¨5001ç«¯å£
- âœ… æ›´æ–°ç¯å¢ƒé…ç½®æ–‡ä»¶

### 3ï¸âƒ£ **æ•°æ®åŠ è½½é€»è¾‘åˆ†æ**

**æ–°ç‰ˆä»Šæ—¥å®œå¿ŒåŠ è½½æµç¨‹**:
```javascript
// ğŸ—“ï¸ ä¸–ç•Œçº§ä¸ªäººåŒ–ä»Šæ—¥å®œå¿Œè®¡ç®—ç³»ç»Ÿ
const getDailyTaboo = async (): Promise<any> => {
  try {
    const userProfile = getUserProfile();
    if (!userProfile) {
      // æ— ç”¨æˆ·èµ„æ–™æ—¶ä½¿ç”¨é»˜è®¤å®œå¿Œ
      return defaultTabooData;
    }

    // æ£€æŸ¥24å°æ—¶ç¼“å­˜
    const today = new Date().toDateString();
    const cacheKey = `daily-taboo-${userProfile.birthdate}-${today}`;
    const cached = localStorage.getItem(cacheKey);
    if (cached && !expired) {
      return cachedData;
    }

    // è°ƒç”¨åç«¯API
    const response = await fetch(`${API_BASE_URL}/calculate-daily-taboo`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        birthdate: userProfile.birthdate,
        name: userProfile.name,
        gender: userProfile.gender,
        target_date: new Date().toISOString().split('T')[0]
      })
    });

    if (response.ok) {
      const result = await response.json();
      // ç¼“å­˜ç»“æœ24å°æ—¶
      localStorage.setItem(cacheKey, JSON.stringify({
        data: result.data,
        timestamp: Date.now()
      }));
      return result.data;
    }
  } catch (error) {
    console.error('âŒ ä»Šæ—¥å®œå¿Œè®¡ç®—å¤±è´¥:', error);
  }

  // å…œåº•æ•°æ®
  return defaultTabooData;
};
```

### 4ï¸âƒ£ **æ˜¾ç¤ºé€»è¾‘åˆ†æ**

**æ¸²æŸ“æ¡ä»¶**:
```javascript
{/* ğŸ—“ï¸ ä¸–ç•Œçº§ä¸ªäººåŒ–ä»Šæ—¥å®œå¿Œ */}
{dailyTaboo && (
  <motion.div>
    <h3>ğŸ—“ï¸ ä»Šæ—¥å®œå¿Œ Â· ä¼ ç»Ÿæ‹©æ—¥</h3>
    {/* å®œå¿Œå†…å®¹ */}
  </motion.div>
)}
```

**å¯èƒ½çš„æ˜¾ç¤ºé—®é¢˜**:
1. **APIè¯·æ±‚å¤±è´¥**: ç½‘ç»œé”™è¯¯æˆ–åç«¯ä¸å¯ç”¨
2. **æ•°æ®è§£æé”™è¯¯**: è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®
3. **çŠ¶æ€æ›´æ–°å»¶è¿Ÿ**: ReactçŠ¶æ€æ›´æ–°å¼‚æ­¥é—®é¢˜
4. **ç¼“å­˜é—®é¢˜**: è¿‡æœŸç¼“å­˜æˆ–æŸåæ•°æ®

## ğŸ› ï¸ å·²å®æ–½çš„ä¿®å¤æªæ–½

### âœ… 1. è§£å†³ç«¯å£å†²çª
```bash
# ä¿®æ”¹åç«¯é…ç½®
app.run(host='0.0.0.0', port=5001, debug=True)  # ä»5000æ”¹ä¸º5001

# ç»Ÿä¸€å‰ç«¯APIé…ç½®
const API_BASE_URL = 'http://localhost:5001/api';
```

### âœ… 2. é‡æ–°å¯åŠ¨æœåŠ¡
```bash
./stop_services.sh          # åœæ­¢æ‰€æœ‰æœåŠ¡
./quick_start.sh start       # é‡æ–°å¯åŠ¨æ‰€æœ‰æœåŠ¡
```

### âœ… 3. éªŒè¯APIåŠŸèƒ½
```bash
curl -X POST "http://localhost:5001/api/calculate-daily-taboo" \
  -H "Content-Type: application/json" \
  -d '{"birthdate":"1990-01-01","name":"æµ‹è¯•","gender":"male","target_date":"2025-08-06"}'
# âœ… è¿”å›æ­£å¸¸JSONæ•°æ®
```

## ğŸ¯ å½“å‰æœåŠ¡çŠ¶æ€

| æœåŠ¡ | çŠ¶æ€ | åœ°å€ | åŠŸèƒ½ |
|-----|------|------|------|
| **å‰ç«¯åº”ç”¨** | âœ… è¿è¡Œä¸­ | http://localhost:3003 | ç”¨æˆ·ç•Œé¢ |
| **ç®¡ç†åå°** | âœ… è¿è¡Œä¸­ | http://localhost:3001 | ç®¡ç†åŠŸèƒ½ |
| **åç«¯API** | âœ… è¿è¡Œä¸­ | http://localhost:5001 | APIæœåŠ¡ |

## ğŸ”® é¢„æœŸæ•ˆæœ

ä¿®å¤åï¼Œä»Šæ—¥å®œå¿ŒåŠŸèƒ½åº”è¯¥ï¼š

1. **ç¨³å®šæ˜¾ç¤º**: æ¯æ¬¡è®¿é—®éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º
2. **æ•°æ®å‡†ç¡®**: åŸºäºç”¨æˆ·å…«å­—ä¸ªæ€§åŒ–è®¡ç®—
3. **ç¼“å­˜ä¼˜åŒ–**: 24å°æ—¶å†…ä½¿ç”¨ç¼“å­˜æå‡æ€§èƒ½
4. **ä¼˜é›…é™çº§**: APIå¤±è´¥æ—¶æ˜¾ç¤ºé»˜è®¤æ•°æ®

## ğŸ“Š æµ‹è¯•å»ºè®®

### 1. åŠŸèƒ½æµ‹è¯•
```bash
# è®¿é—®é¦–é¡µ
http://localhost:3003/?page=today

# æ£€æŸ¥å…ƒç´ 
- æŸ¥çœ‹"ğŸ—“ï¸ ä»Šæ—¥å®œå¿Œ Â· ä¼ ç»Ÿæ‹©æ—¥"æ ‡é¢˜
- ç¡®è®¤å®œå¿Œæ´»åŠ¨ç½‘æ ¼æ˜¾ç¤º
- éªŒè¯æ•°æ®ä¸ªæ€§åŒ–ç¨‹åº¦
```

### 2. APIæµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:5001/api/health

# å®œå¿Œè®¡ç®—
curl -X POST http://localhost:5001/api/calculate-daily-taboo \
  -H "Content-Type: application/json" \
  -d '{"birthdate":"1990-01-01","name":"æµ‹è¯•","gender":"male","target_date":"2025-08-06"}'
```

### 3. ç¼“å­˜æµ‹è¯•
```javascript
// æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥ç¼“å­˜
const today = new Date().toDateString();
const cacheKey = `daily-taboo-userBirthdate-${today}`;
console.log('ç¼“å­˜æ•°æ®:', localStorage.getItem(cacheKey));
```

## ğŸš¨ ç›‘æ§è¦ç‚¹

1. **APIå“åº”æ—¶é—´**: åº”åœ¨3ç§’å†…è¿”å›
2. **é”™è¯¯ç‡**: APIè°ƒç”¨æˆåŠŸç‡åº”>95%
3. **ç¼“å­˜å‘½ä¸­ç‡**: 24å°æ—¶å†…é‡å¤è®¿é—®åº”ä½¿ç”¨ç¼“å­˜
4. **ç”¨æˆ·ä½“éªŒ**: åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤ºå‹å¥½

## ğŸ“ é—®é¢˜è¿½è¸ª

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼š
1. æµè§ˆå™¨å¼€å‘è€…å·¥å…·Networké¢æ¿çš„APIè¯·æ±‚çŠ¶æ€
2. æµè§ˆå™¨æ§åˆ¶å°çš„JavaScripté”™è¯¯ä¿¡æ¯
3. åç«¯æ—¥å¿—æ–‡ä»¶ `logs/backend.log`
4. ç”¨æˆ·èµ„æ–™æ˜¯å¦æ­£ç¡®ä¿å­˜

---

**ğŸ“ æŠ¥å‘Šåˆ›å»ºæ—¶é—´**: 2025å¹´8æœˆ6æ—¥  
**ğŸ”§ ä¿®å¤çŠ¶æ€**: å·²ä¿®å¤ - ç­‰å¾…éªŒè¯  
**ğŸ‘¨â€ğŸ’» è´Ÿè´£äºº**: Divine Friend PWAå›¢é˜Ÿ
